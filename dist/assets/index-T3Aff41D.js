function my(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function gy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hh={exports:{}},Qo={},Gh={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var as=Symbol.for("react.element"),_y=Symbol.for("react.portal"),yy=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),wy=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),Cy=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Ny=Symbol.for("react.memo"),ky=Symbol.for("react.lazy"),Ed=Symbol.iterator;function Ty(t){return t===null||typeof t!="object"?null:(t=Ed&&t[Ed]||t["@@iterator"],typeof t=="function"?t:null)}var Kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qh=Object.assign,Yh={};function Gr(t,e,n){this.props=t,this.context=e,this.refs=Yh,this.updater=n||Kh}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qh(){}qh.prototype=Gr.prototype;function Lu(t,e,n){this.props=t,this.context=e,this.refs=Yh,this.updater=n||Kh}var Ou=Lu.prototype=new qh;Ou.constructor=Lu;Qh(Ou,Gr.prototype);Ou.isPureReactComponent=!0;var Nd=Array.isArray,Xh=Object.prototype.hasOwnProperty,Mu={current:null},Jh={key:!0,ref:!0,__self:!0,__source:!0};function Zh(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xh.call(e,r)&&!Jh.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:as,type:t,key:s,ref:o,props:i,_owner:Mu.current}}function Iy(t,e){return{$$typeof:as,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ju(t){return typeof t=="object"&&t!==null&&t.$$typeof===as}function Ry(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kd=/\/+/g;function bl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ry(""+t.key):e.toString(36)}function Hs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case as:case _y:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+bl(o,0):r,Nd(i)?(n="",t!=null&&(n=t.replace(kd,"$&/")+"/"),Hs(i,e,n,"",function(u){return u})):i!=null&&(ju(i)&&(i=Iy(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Nd(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+bl(s,l);o+=Hs(s,e,n,a,i)}else if(a=Ty(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+bl(s,l++),o+=Hs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Es(t,e,n){if(t==null)return t;var r=[],i=0;return Hs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function by(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ue={current:null},Gs={transition:null},Py={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Gs,ReactCurrentOwner:Mu};function ep(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Es,forEach:function(t,e,n){Es(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Es(t,function(){e++}),e},toArray:function(t){return Es(t,function(e){return e})||[]},only:function(t){if(!ju(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=Gr;W.Fragment=yy;W.Profiler=wy;W.PureComponent=Lu;W.StrictMode=vy;W.Suspense=Ey;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Py;W.act=ep;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Mu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Xh.call(e,a)&&!Jh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:as,type:t.type,key:i,ref:s,props:r,_owner:o}};W.createContext=function(t){return t={$$typeof:Sy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xy,_context:t},t.Consumer=t};W.createElement=Zh;W.createFactory=function(t){var e=Zh.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:Cy,render:t}};W.isValidElement=ju;W.lazy=function(t){return{$$typeof:ky,_payload:{_status:-1,_result:t},_init:by}};W.memo=function(t,e){return{$$typeof:Ny,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=Gs.transition;Gs.transition={};try{t()}finally{Gs.transition=e}};W.unstable_act=ep;W.useCallback=function(t,e){return Ue.current.useCallback(t,e)};W.useContext=function(t){return Ue.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return Ue.current.useDeferredValue(t)};W.useEffect=function(t,e){return Ue.current.useEffect(t,e)};W.useId=function(){return Ue.current.useId()};W.useImperativeHandle=function(t,e,n){return Ue.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return Ue.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return Ue.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return Ue.current.useMemo(t,e)};W.useReducer=function(t,e,n){return Ue.current.useReducer(t,e,n)};W.useRef=function(t){return Ue.current.useRef(t)};W.useState=function(t){return Ue.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return Ue.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return Ue.current.useTransition()};W.version="18.3.1";Gh.exports=W;var C=Gh.exports;const Fu=gy(C),Ay=my({__proto__:null,default:Fu},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=C,Ly=Symbol.for("react.element"),Oy=Symbol.for("react.fragment"),My=Object.prototype.hasOwnProperty,jy=Dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fy={key:!0,ref:!0,__self:!0,__source:!0};function tp(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)My.call(e,r)&&!Fy.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ly,type:t,key:s,ref:o,props:i,_owner:jy.current}}Qo.Fragment=Oy;Qo.jsx=tp;Qo.jsxs=tp;Hh.exports=Qo;var h=Hh.exports,ya={},np={exports:{}},nt={},rp={exports:{}},ip={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,D){var L=k.length;k.push(D);e:for(;0<L;){var re=L-1>>>1,fe=k[re];if(0<i(fe,D))k[re]=D,k[L]=fe,L=re;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var D=k[0],L=k.pop();if(L!==D){k[0]=L;e:for(var re=0,fe=k.length,Rn=fe>>>1;re<Rn;){var Et=2*(re+1)-1,Y=k[Et],ee=Et+1,qt=k[ee];if(0>i(Y,L))ee<fe&&0>i(qt,Y)?(k[re]=qt,k[ee]=L,re=ee):(k[re]=Y,k[Et]=L,re=Et);else if(ee<fe&&0>i(qt,L))k[re]=qt,k[ee]=L,re=ee;else break e}}return D}function i(k,D){var L=k.sortIndex-D.sortIndex;return L!==0?L:k.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,c=null,f=3,g=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(k){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=k)r(u),D.sortIndex=D.expirationTime,e(a,D);else break;D=n(u)}}function x(k){if(v=!1,_(k),!y)if(n(a)!==null)y=!0,$(N);else{var D=n(u);D!==null&&G(x,D.startTime-k)}}function N(k,D){y=!1,v&&(v=!1,m(b),b=-1),g=!0;var L=f;try{for(_(D),c=n(a);c!==null&&(!(c.expirationTime>D)||k&&!Me());){var re=c.callback;if(typeof re=="function"){c.callback=null,f=c.priorityLevel;var fe=re(c.expirationTime<=D);D=t.unstable_now(),typeof fe=="function"?c.callback=fe:c===n(a)&&r(a),_(D)}else r(a);c=n(a)}if(c!==null)var Rn=!0;else{var Et=n(u);Et!==null&&G(x,Et.startTime-D),Rn=!1}return Rn}finally{c=null,f=L,g=!1}}var R=!1,T=null,b=-1,H=5,A=-1;function Me(){return!(t.unstable_now()-A<H)}function Dt(){if(T!==null){var k=t.unstable_now();A=k;var D=!0;try{D=T(!0,k)}finally{D?Lt():(R=!1,T=null)}}else R=!1}var Lt;if(typeof p=="function")Lt=function(){p(Dt)};else if(typeof MessageChannel<"u"){var lr=new MessageChannel,O=lr.port2;lr.port1.onmessage=Dt,Lt=function(){O.postMessage(null)}}else Lt=function(){w(Dt,0)};function $(k){T=k,R||(R=!0,Lt())}function G(k,D){b=w(function(){k(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,$(N))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var L=f;f=D;try{return k()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,D){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var L=f;f=k;try{return D()}finally{f=L}},t.unstable_scheduleCallback=function(k,D,L){var re=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?re+L:re):L=re,k){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=L+fe,k={id:d++,callback:D,priorityLevel:k,startTime:L,expirationTime:fe,sortIndex:-1},L>re?(k.sortIndex=L,e(u,k),n(a)===null&&k===n(u)&&(v?(m(b),b=-1):v=!0,G(x,L-re))):(k.sortIndex=fe,e(a,k),y||g||(y=!0,$(N))),k},t.unstable_shouldYield=Me,t.unstable_wrapCallback=function(k){var D=f;return function(){var L=f;f=D;try{return k.apply(this,arguments)}finally{f=L}}}})(ip);rp.exports=ip;var Wy=rp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy=C,et=Wy;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sp=new Set,Ai={};function tr(t,e){Dr(t,e),Dr(t+"Capture",e)}function Dr(t,e){for(Ai[t]=e,t=0;t<e.length;t++)sp.add(e[t])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),va=Object.prototype.hasOwnProperty,Uy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Td={},Id={};function By(t){return va.call(Id,t)?!0:va.call(Td,t)?!1:Uy.test(t)?Id[t]=!0:(Td[t]=!0,!1)}function $y(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vy(t,e,n,r){if(e===null||typeof e>"u"||$y(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Be(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Re[t]=new Be(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Re[e]=new Be(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Re[t]=new Be(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Re[t]=new Be(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Re[t]=new Be(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Re[t]=new Be(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Re[t]=new Be(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Re[t]=new Be(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Re[t]=new Be(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wu=/[\-:]([a-z])/g;function zu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wu,zu);Re[e]=new Be(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wu,zu);Re[e]=new Be(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wu,zu);Re[e]=new Be(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Re[t]=new Be(t,1,!1,t.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Re[t]=new Be(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uu(t,e,n,r){var i=Re.hasOwnProperty(e)?Re[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vy(e,n,i,r)&&(n=null),r||i===null?By(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yt=zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ns=Symbol.for("react.element"),fr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),Bu=Symbol.for("react.strict_mode"),wa=Symbol.for("react.profiler"),op=Symbol.for("react.provider"),lp=Symbol.for("react.context"),$u=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),Sa=Symbol.for("react.suspense_list"),Vu=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),ap=Symbol.for("react.offscreen"),Rd=Symbol.iterator;function ti(t){return t===null||typeof t!="object"?null:(t=Rd&&t[Rd]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,Pl;function hi(t){if(Pl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pl=e&&e[1]||""}return`
`+Pl+t}var Al=!1;function Dl(t,e){if(!t||Al)return"";Al=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Al=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hi(t):""}function Hy(t){switch(t.tag){case 5:return hi(t.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 2:case 15:return t=Dl(t.type,!1),t;case 11:return t=Dl(t.type.render,!1),t;case 1:return t=Dl(t.type,!0),t;default:return""}}function Ca(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hr:return"Fragment";case fr:return"Portal";case wa:return"Profiler";case Bu:return"StrictMode";case xa:return"Suspense";case Sa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lp:return(t.displayName||"Context")+".Consumer";case op:return(t._context.displayName||"Context")+".Provider";case $u:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vu:return e=t.displayName||null,e!==null?e:Ca(t.type)||"Memo";case Jt:e=t._payload,t=t._init;try{return Ca(t(e))}catch{}}return null}function Gy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ca(e);case 8:return e===Bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function up(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ky(t){var e=up(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ks(t){t._valueTracker||(t._valueTracker=Ky(t))}function cp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=up(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function so(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ea(t,e){var n=e.checked;return ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dp(t,e){e=e.checked,e!=null&&Uu(t,"checked",e,!1)}function Na(t,e){dp(t,e);var n=vn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ka(t,e.type,n):e.hasOwnProperty("defaultValue")&&ka(t,e.type,vn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ka(t,e,n){(e!=="number"||so(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pi=Array.isArray;function Nr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ta(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ad(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(pi(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vn(n)}}function fp(t,e){var n=vn(e.value),r=vn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ia(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ts,pp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Di(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qy=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(t){Qy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_i[e]=_i[t]})});function mp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_i.hasOwnProperty(t)&&_i[t]?(""+e).trim():e+"px"}function gp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Yy=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ra(t,e){if(e){if(Yy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function ba(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Hu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,kr=null,Tr=null;function Ld(t){if(t=ds(t)){if(typeof Aa!="function")throw Error(S(280));var e=t.stateNode;e&&(e=Zo(e),Aa(t.stateNode,t.type,e))}}function _p(t){kr?Tr?Tr.push(t):Tr=[t]:kr=t}function yp(){if(kr){var t=kr,e=Tr;if(Tr=kr=null,Ld(t),e)for(t=0;t<e.length;t++)Ld(e[t])}}function vp(t,e){return t(e)}function wp(){}var Ll=!1;function xp(t,e,n){if(Ll)return t(e,n);Ll=!0;try{return vp(t,e,n)}finally{Ll=!1,(kr!==null||Tr!==null)&&(wp(),yp())}}function Li(t,e){var n=t.stateNode;if(n===null)return null;var r=Zo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var Da=!1;if(Bt)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){Da=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{Da=!1}function qy(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var yi=!1,oo=null,lo=!1,La=null,Xy={onError:function(t){yi=!0,oo=t}};function Jy(t,e,n,r,i,s,o,l,a){yi=!1,oo=null,qy.apply(Xy,arguments)}function Zy(t,e,n,r,i,s,o,l,a){if(Jy.apply(this,arguments),yi){if(yi){var u=oo;yi=!1,oo=null}else throw Error(S(198));lo||(lo=!0,La=u)}}function nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Od(t){if(nr(t)!==t)throw Error(S(188))}function ev(t){var e=t.alternate;if(!e){if(e=nr(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Od(i),t;if(s===r)return Od(i),e;s=s.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function Cp(t){return t=ev(t),t!==null?Ep(t):null}function Ep(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ep(t);if(e!==null)return e;t=t.sibling}return null}var Np=et.unstable_scheduleCallback,Md=et.unstable_cancelCallback,tv=et.unstable_shouldYield,nv=et.unstable_requestPaint,he=et.unstable_now,rv=et.unstable_getCurrentPriorityLevel,Gu=et.unstable_ImmediatePriority,kp=et.unstable_UserBlockingPriority,ao=et.unstable_NormalPriority,iv=et.unstable_LowPriority,Tp=et.unstable_IdlePriority,Yo=null,It=null;function sv(t){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Yo,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:av,ov=Math.log,lv=Math.LN2;function av(t){return t>>>=0,t===0?32:31-(ov(t)/lv|0)|0}var Is=64,Rs=4194304;function mi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=mi(l):(s&=o,s!==0&&(r=mi(s)))}else o=n&~i,o!==0?r=mi(o):s!==0&&(r=mi(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),i=1<<n,r|=t[n],e&=~i;return r}function uv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=uv(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Oa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ip(){var t=Is;return Is<<=1,!(Is&4194240)&&(Is=64),t}function Ol(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function us(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function dv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ku(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var K=0;function Rp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bp,Qu,Pp,Ap,Dp,Ma=!1,bs=[],ln=null,an=null,un=null,Oi=new Map,Mi=new Map,en=[],fv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jd(t,e){switch(t){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":Oi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mi.delete(e.pointerId)}}function ri(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ds(e),e!==null&&Qu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hv(t,e,n,r,i){switch(e){case"focusin":return ln=ri(ln,t,e,n,r,i),!0;case"dragenter":return an=ri(an,t,e,n,r,i),!0;case"mouseover":return un=ri(un,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Oi.set(s,ri(Oi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mi.set(s,ri(Mi.get(s)||null,t,e,n,r,i)),!0}return!1}function Lp(t){var e=Mn(t.target);if(e!==null){var n=nr(e);if(n!==null){if(e=n.tag,e===13){if(e=Sp(n),e!==null){t.blockedOn=e,Dp(t.priority,function(){Pp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ks(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ja(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pa=r,n.target.dispatchEvent(r),Pa=null}else return e=ds(n),e!==null&&Qu(e),t.blockedOn=n,!1;e.shift()}return!0}function Fd(t,e,n){Ks(t)&&n.delete(e)}function pv(){Ma=!1,ln!==null&&Ks(ln)&&(ln=null),an!==null&&Ks(an)&&(an=null),un!==null&&Ks(un)&&(un=null),Oi.forEach(Fd),Mi.forEach(Fd)}function ii(t,e){t.blockedOn===e&&(t.blockedOn=null,Ma||(Ma=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,pv)))}function ji(t){function e(i){return ii(i,t)}if(0<bs.length){ii(bs[0],t);for(var n=1;n<bs.length;n++){var r=bs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ln!==null&&ii(ln,t),an!==null&&ii(an,t),un!==null&&ii(un,t),Oi.forEach(e),Mi.forEach(e),n=0;n<en.length;n++)r=en[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)Lp(n),n.blockedOn===null&&en.shift()}var Ir=Yt.ReactCurrentBatchConfig,co=!0;function mv(t,e,n,r){var i=K,s=Ir.transition;Ir.transition=null;try{K=1,Yu(t,e,n,r)}finally{K=i,Ir.transition=s}}function gv(t,e,n,r){var i=K,s=Ir.transition;Ir.transition=null;try{K=4,Yu(t,e,n,r)}finally{K=i,Ir.transition=s}}function Yu(t,e,n,r){if(co){var i=ja(t,e,n,r);if(i===null)Hl(t,e,r,fo,n),jd(t,r);else if(hv(i,t,e,n,r))r.stopPropagation();else if(jd(t,r),e&4&&-1<fv.indexOf(t)){for(;i!==null;){var s=ds(i);if(s!==null&&bp(s),s=ja(t,e,n,r),s===null&&Hl(t,e,r,fo,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Hl(t,e,r,null,n)}}var fo=null;function ja(t,e,n,r){if(fo=null,t=Hu(r),t=Mn(t),t!==null)if(e=nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fo=t,null}function Op(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rv()){case Gu:return 1;case kp:return 4;case ao:case iv:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var nn=null,qu=null,Qs=null;function Mp(){if(Qs)return Qs;var t,e=qu,n=e.length,r,i="value"in nn?nn.value:nn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qs=i.slice(t,1<r?1-r:void 0)}function Ys(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ps(){return!0}function Wd(){return!1}function rt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ps:Wd,this.isPropagationStopped=Wd,this}return ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),e}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=rt(Kr),cs=ue({},Kr,{view:0,detail:0}),_v=rt(cs),Ml,jl,si,qo=ue({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ju,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(Ml=t.screenX-si.screenX,jl=t.screenY-si.screenY):jl=Ml=0,si=t),Ml)},movementY:function(t){return"movementY"in t?t.movementY:jl}}),zd=rt(qo),yv=ue({},qo,{dataTransfer:0}),vv=rt(yv),wv=ue({},cs,{relatedTarget:0}),Fl=rt(wv),xv=ue({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sv=rt(xv),Cv=ue({},Kr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ev=rt(Cv),Nv=ue({},Kr,{data:0}),Ud=rt(Nv),kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Iv[t])?!!e[t]:!1}function Ju(){return Rv}var bv=ue({},cs,{key:function(t){if(t.key){var e=kv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ju,charCode:function(t){return t.type==="keypress"?Ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pv=rt(bv),Av=ue({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=rt(Av),Dv=ue({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ju}),Lv=rt(Dv),Ov=ue({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mv=rt(Ov),jv=ue({},qo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fv=rt(jv),Wv=[9,13,27,32],Zu=Bt&&"CompositionEvent"in window,vi=null;Bt&&"documentMode"in document&&(vi=document.documentMode);var zv=Bt&&"TextEvent"in window&&!vi,jp=Bt&&(!Zu||vi&&8<vi&&11>=vi),$d=" ",Vd=!1;function Fp(t,e){switch(t){case"keyup":return Wv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function Uv(t,e){switch(t){case"compositionend":return Wp(e);case"keypress":return e.which!==32?null:(Vd=!0,$d);case"textInput":return t=e.data,t===$d&&Vd?null:t;default:return null}}function Bv(t,e){if(pr)return t==="compositionend"||!Zu&&Fp(t,e)?(t=Mp(),Qs=qu=nn=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jp&&e.locale!=="ko"?null:e.data;default:return null}}var $v={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$v[t.type]:e==="textarea"}function zp(t,e,n,r){_p(r),e=ho(e,"onChange"),0<e.length&&(n=new Xu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wi=null,Fi=null;function Vv(t){Xp(t,0)}function Xo(t){var e=_r(t);if(cp(e))return t}function Hv(t,e){if(t==="change")return e}var Up=!1;if(Bt){var Wl;if(Bt){var zl="oninput"in document;if(!zl){var Gd=document.createElement("div");Gd.setAttribute("oninput","return;"),zl=typeof Gd.oninput=="function"}Wl=zl}else Wl=!1;Up=Wl&&(!document.documentMode||9<document.documentMode)}function Kd(){wi&&(wi.detachEvent("onpropertychange",Bp),Fi=wi=null)}function Bp(t){if(t.propertyName==="value"&&Xo(Fi)){var e=[];zp(e,Fi,t,Hu(t)),xp(Vv,e)}}function Gv(t,e,n){t==="focusin"?(Kd(),wi=e,Fi=n,wi.attachEvent("onpropertychange",Bp)):t==="focusout"&&Kd()}function Kv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xo(Fi)}function Qv(t,e){if(t==="click")return Xo(e)}function Yv(t,e){if(t==="input"||t==="change")return Xo(e)}function qv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var St=typeof Object.is=="function"?Object.is:qv;function Wi(t,e){if(St(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!va.call(e,i)||!St(t[i],e[i]))return!1}return!0}function Qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yd(t,e){var n=Qd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qd(n)}}function $p(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$p(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vp(){for(var t=window,e=so();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=so(t.document)}return e}function ec(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xv(t){var e=Vp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$p(n.ownerDocument.documentElement,n)){if(r!==null&&ec(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yd(n,s);var o=Yd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jv=Bt&&"documentMode"in document&&11>=document.documentMode,mr=null,Fa=null,xi=null,Wa=!1;function qd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wa||mr==null||mr!==so(r)||(r=mr,"selectionStart"in r&&ec(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&Wi(xi,r)||(xi=r,r=ho(Fa,"onSelect"),0<r.length&&(e=new Xu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function As(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},Ul={},Hp={};Bt&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function Jo(t){if(Ul[t])return Ul[t];if(!gr[t])return t;var e=gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hp)return Ul[t]=e[n];return t}var Gp=Jo("animationend"),Kp=Jo("animationiteration"),Qp=Jo("animationstart"),Yp=Jo("transitionend"),qp=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(t,e){qp.set(t,e),tr(e,[t])}for(var Bl=0;Bl<Xd.length;Bl++){var $l=Xd[Bl],Zv=$l.toLowerCase(),ew=$l[0].toUpperCase()+$l.slice(1);Nn(Zv,"on"+ew)}Nn(Gp,"onAnimationEnd");Nn(Kp,"onAnimationIteration");Nn(Qp,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(Yp,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function Jd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zy(r,e,void 0,t),t.currentTarget=null}function Xp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Jd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Jd(i,l,u),s=a}}}if(lo)throw t=La,lo=!1,La=null,t}function te(t,e){var n=e[Va];n===void 0&&(n=e[Va]=new Set);var r=t+"__bubble";n.has(r)||(Jp(e,t,2,!1),n.add(r))}function Vl(t,e,n){var r=0;e&&(r|=4),Jp(n,t,r,e)}var Ds="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[Ds]){t[Ds]=!0,sp.forEach(function(n){n!=="selectionchange"&&(tw.has(n)||Vl(n,!1,t),Vl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ds]||(e[Ds]=!0,Vl("selectionchange",!1,e))}}function Jp(t,e,n,r){switch(Op(e)){case 1:var i=mv;break;case 4:i=gv;break;default:i=Yu}n=i.bind(null,e,n,t),i=void 0,!Da||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Mn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}xp(function(){var u=s,d=Hu(n),c=[];e:{var f=qp.get(t);if(f!==void 0){var g=Xu,y=t;switch(t){case"keypress":if(Ys(n)===0)break e;case"keydown":case"keyup":g=Pv;break;case"focusin":y="focus",g=Fl;break;case"focusout":y="blur",g=Fl;break;case"beforeblur":case"afterblur":g=Fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Lv;break;case Gp:case Kp:case Qp:g=Sv;break;case Yp:g=Mv;break;case"scroll":g=_v;break;case"wheel":g=Fv;break;case"copy":case"cut":case"paste":g=Ev;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Bd}var v=(e&4)!==0,w=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var p=u,_;p!==null;){_=p;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,m!==null&&(x=Li(p,m),x!=null&&v.push(Ui(p,x,_)))),w)break;p=p.return}0<v.length&&(f=new g(f,y,null,n,d),c.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Pa&&(y=n.relatedTarget||n.fromElement)&&(Mn(y)||y[$t]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Mn(y):null,y!==null&&(w=nr(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(v=zd,x="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=Bd,x="onPointerLeave",m="onPointerEnter",p="pointer"),w=g==null?f:_r(g),_=y==null?f:_r(y),f=new v(x,p+"leave",g,n,d),f.target=w,f.relatedTarget=_,x=null,Mn(d)===u&&(v=new v(m,p+"enter",y,n,d),v.target=_,v.relatedTarget=w,x=v),w=x,g&&y)t:{for(v=g,m=y,p=0,_=v;_;_=ur(_))p++;for(_=0,x=m;x;x=ur(x))_++;for(;0<p-_;)v=ur(v),p--;for(;0<_-p;)m=ur(m),_--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=ur(v),m=ur(m)}v=null}else v=null;g!==null&&Zd(c,f,g,v,!1),y!==null&&w!==null&&Zd(c,w,y,v,!0)}}e:{if(f=u?_r(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var N=Hv;else if(Hd(f))if(Up)N=Yv;else{N=Kv;var R=Gv}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Qv);if(N&&(N=N(t,u))){zp(c,N,n,d);break e}R&&R(t,f,u),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&ka(f,"number",f.value)}switch(R=u?_r(u):window,t){case"focusin":(Hd(R)||R.contentEditable==="true")&&(mr=R,Fa=u,xi=null);break;case"focusout":xi=Fa=mr=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,qd(c,n,d);break;case"selectionchange":if(Jv)break;case"keydown":case"keyup":qd(c,n,d)}var T;if(Zu)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else pr?Fp(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(jp&&n.locale!=="ko"&&(pr||b!=="onCompositionStart"?b==="onCompositionEnd"&&pr&&(T=Mp()):(nn=d,qu="value"in nn?nn.value:nn.textContent,pr=!0)),R=ho(u,b),0<R.length&&(b=new Ud(b,t,null,n,d),c.push({event:b,listeners:R}),T?b.data=T:(T=Wp(n),T!==null&&(b.data=T)))),(T=zv?Uv(t,n):Bv(t,n))&&(u=ho(u,"onBeforeInput"),0<u.length&&(d=new Ud("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=T))}Xp(c,e)})}function Ui(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ho(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Li(t,n),s!=null&&r.unshift(Ui(t,s,i)),s=Li(t,e),s!=null&&r.push(Ui(t,s,i))),t=t.return}return r}function ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Li(n,s),a!=null&&o.unshift(Ui(n,a,l))):i||(a=Li(n,s),a!=null&&o.push(Ui(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function ef(t){return(typeof t=="string"?t:""+t).replace(nw,`
`).replace(rw,"")}function Ls(t,e,n){if(e=ef(e),ef(t)!==e&&n)throw Error(S(425))}function po(){}var za=null,Ua=null;function Ba(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $a=typeof setTimeout=="function"?setTimeout:void 0,iw=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(t){return tf.resolve(null).then(t).catch(ow)}:$a;function ow(t){setTimeout(function(){throw t})}function Gl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ji(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ji(e)}function cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Qr,Bi="__reactProps$"+Qr,$t="__reactContainer$"+Qr,Va="__reactEvents$"+Qr,lw="__reactListeners$"+Qr,aw="__reactHandles$"+Qr;function Mn(t){var e=t[Tt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$t]||n[Tt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nf(t);t!==null;){if(n=t[Tt])return n;t=nf(t)}return e}t=n,n=t.parentNode}return null}function ds(t){return t=t[Tt]||t[$t],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _r(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function Zo(t){return t[Bi]||null}var Ha=[],yr=-1;function kn(t){return{current:t}}function ne(t){0>yr||(t.current=Ha[yr],Ha[yr]=null,yr--)}function Z(t,e){yr++,Ha[yr]=t.current,t.current=e}var wn={},Oe=kn(wn),Ge=kn(!1),Vn=wn;function Lr(t,e){var n=t.type.contextTypes;if(!n)return wn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(t){return t=t.childContextTypes,t!=null}function mo(){ne(Ge),ne(Oe)}function rf(t,e,n){if(Oe.current!==wn)throw Error(S(168));Z(Oe,e),Z(Ge,n)}function Zp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,Gy(t)||"Unknown",i));return ue({},n,r)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wn,Vn=Oe.current,Z(Oe,t),Z(Ge,Ge.current),!0}function sf(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=Zp(t,e,Vn),r.__reactInternalMemoizedMergedChildContext=t,ne(Ge),ne(Oe),Z(Oe,t)):ne(Ge),Z(Ge,n)}var Mt=null,el=!1,Kl=!1;function em(t){Mt===null?Mt=[t]:Mt.push(t)}function uw(t){el=!0,em(t)}function Tn(){if(!Kl&&Mt!==null){Kl=!0;var t=0,e=K;try{var n=Mt;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mt=null,el=!1}catch(i){throw Mt!==null&&(Mt=Mt.slice(t+1)),Np(Gu,Tn),i}finally{K=e,Kl=!1}}return null}var vr=[],wr=0,_o=null,yo=0,st=[],ot=0,Hn=null,jt=1,Ft="";function An(t,e){vr[wr++]=yo,vr[wr++]=_o,_o=t,yo=e}function tm(t,e,n){st[ot++]=jt,st[ot++]=Ft,st[ot++]=Hn,Hn=t;var r=jt;t=Ft;var i=32-vt(r)-1;r&=~(1<<i),n+=1;var s=32-vt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,jt=1<<32-vt(e)+i|n<<i|r,Ft=s+t}else jt=1<<s|n<<i|r,Ft=t}function tc(t){t.return!==null&&(An(t,1),tm(t,1,0))}function nc(t){for(;t===_o;)_o=vr[--wr],vr[wr]=null,yo=vr[--wr],vr[wr]=null;for(;t===Hn;)Hn=st[--ot],st[ot]=null,Ft=st[--ot],st[ot]=null,jt=st[--ot],st[ot]=null}var Je=null,Xe=null,ie=!1,gt=null;function nm(t,e){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function of(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Je=t,Xe=cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Je=t,Xe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hn!==null?{id:jt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Je=t,Xe=null,!0):!1;default:return!1}}function Ga(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ka(t){if(ie){var e=Xe;if(e){var n=e;if(!of(t,e)){if(Ga(t))throw Error(S(418));e=cn(n.nextSibling);var r=Je;e&&of(t,e)?nm(r,n):(t.flags=t.flags&-4097|2,ie=!1,Je=t)}}else{if(Ga(t))throw Error(S(418));t.flags=t.flags&-4097|2,ie=!1,Je=t}}}function lf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Je=t}function Os(t){if(t!==Je)return!1;if(!ie)return lf(t),ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ba(t.type,t.memoizedProps)),e&&(e=Xe)){if(Ga(t))throw rm(),Error(S(418));for(;e;)nm(t,e),e=cn(e.nextSibling)}if(lf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xe=cn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xe=null}}else Xe=Je?cn(t.stateNode.nextSibling):null;return!0}function rm(){for(var t=Xe;t;)t=cn(t.nextSibling)}function Or(){Xe=Je=null,ie=!1}function rc(t){gt===null?gt=[t]:gt.push(t)}var cw=Yt.ReactCurrentBatchConfig;function oi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function Ms(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function af(t){var e=t._init;return e(t._payload)}function im(t){function e(m,p){if(t){var _=m.deletions;_===null?(m.deletions=[p],m.flags|=16):_.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function i(m,p){return m=pn(m,p),m.index=0,m.sibling=null,m}function s(m,p,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<p?(m.flags|=2,p):_):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,_,x){return p===null||p.tag!==6?(p=ea(_,m.mode,x),p.return=m,p):(p=i(p,_),p.return=m,p)}function a(m,p,_,x){var N=_.type;return N===hr?d(m,p,_.props.children,x,_.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Jt&&af(N)===p.type)?(x=i(p,_.props),x.ref=oi(m,p,_),x.return=m,x):(x=no(_.type,_.key,_.props,null,m.mode,x),x.ref=oi(m,p,_),x.return=m,x)}function u(m,p,_,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=ta(_,m.mode,x),p.return=m,p):(p=i(p,_.children||[]),p.return=m,p)}function d(m,p,_,x,N){return p===null||p.tag!==7?(p=Bn(_,m.mode,x,N),p.return=m,p):(p=i(p,_),p.return=m,p)}function c(m,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ea(""+p,m.mode,_),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ns:return _=no(p.type,p.key,p.props,null,m.mode,_),_.ref=oi(m,null,p),_.return=m,_;case fr:return p=ta(p,m.mode,_),p.return=m,p;case Jt:var x=p._init;return c(m,x(p._payload),_)}if(pi(p)||ti(p))return p=Bn(p,m.mode,_,null),p.return=m,p;Ms(m,p)}return null}function f(m,p,_,x){var N=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return N!==null?null:l(m,p,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ns:return _.key===N?a(m,p,_,x):null;case fr:return _.key===N?u(m,p,_,x):null;case Jt:return N=_._init,f(m,p,N(_._payload),x)}if(pi(_)||ti(_))return N!==null?null:d(m,p,_,x,null);Ms(m,_)}return null}function g(m,p,_,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(_)||null,l(p,m,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ns:return m=m.get(x.key===null?_:x.key)||null,a(p,m,x,N);case fr:return m=m.get(x.key===null?_:x.key)||null,u(p,m,x,N);case Jt:var R=x._init;return g(m,p,_,R(x._payload),N)}if(pi(x)||ti(x))return m=m.get(_)||null,d(p,m,x,N,null);Ms(p,x)}return null}function y(m,p,_,x){for(var N=null,R=null,T=p,b=p=0,H=null;T!==null&&b<_.length;b++){T.index>b?(H=T,T=null):H=T.sibling;var A=f(m,T,_[b],x);if(A===null){T===null&&(T=H);break}t&&T&&A.alternate===null&&e(m,T),p=s(A,p,b),R===null?N=A:R.sibling=A,R=A,T=H}if(b===_.length)return n(m,T),ie&&An(m,b),N;if(T===null){for(;b<_.length;b++)T=c(m,_[b],x),T!==null&&(p=s(T,p,b),R===null?N=T:R.sibling=T,R=T);return ie&&An(m,b),N}for(T=r(m,T);b<_.length;b++)H=g(T,m,b,_[b],x),H!==null&&(t&&H.alternate!==null&&T.delete(H.key===null?b:H.key),p=s(H,p,b),R===null?N=H:R.sibling=H,R=H);return t&&T.forEach(function(Me){return e(m,Me)}),ie&&An(m,b),N}function v(m,p,_,x){var N=ti(_);if(typeof N!="function")throw Error(S(150));if(_=N.call(_),_==null)throw Error(S(151));for(var R=N=null,T=p,b=p=0,H=null,A=_.next();T!==null&&!A.done;b++,A=_.next()){T.index>b?(H=T,T=null):H=T.sibling;var Me=f(m,T,A.value,x);if(Me===null){T===null&&(T=H);break}t&&T&&Me.alternate===null&&e(m,T),p=s(Me,p,b),R===null?N=Me:R.sibling=Me,R=Me,T=H}if(A.done)return n(m,T),ie&&An(m,b),N;if(T===null){for(;!A.done;b++,A=_.next())A=c(m,A.value,x),A!==null&&(p=s(A,p,b),R===null?N=A:R.sibling=A,R=A);return ie&&An(m,b),N}for(T=r(m,T);!A.done;b++,A=_.next())A=g(T,m,b,A.value,x),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?b:A.key),p=s(A,p,b),R===null?N=A:R.sibling=A,R=A);return t&&T.forEach(function(Dt){return e(m,Dt)}),ie&&An(m,b),N}function w(m,p,_,x){if(typeof _=="object"&&_!==null&&_.type===hr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ns:e:{for(var N=_.key,R=p;R!==null;){if(R.key===N){if(N=_.type,N===hr){if(R.tag===7){n(m,R.sibling),p=i(R,_.props.children),p.return=m,m=p;break e}}else if(R.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Jt&&af(N)===R.type){n(m,R.sibling),p=i(R,_.props),p.ref=oi(m,R,_),p.return=m,m=p;break e}n(m,R);break}else e(m,R);R=R.sibling}_.type===hr?(p=Bn(_.props.children,m.mode,x,_.key),p.return=m,m=p):(x=no(_.type,_.key,_.props,null,m.mode,x),x.ref=oi(m,p,_),x.return=m,m=x)}return o(m);case fr:e:{for(R=_.key;p!==null;){if(p.key===R)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){n(m,p.sibling),p=i(p,_.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=ta(_,m.mode,x),p.return=m,m=p}return o(m);case Jt:return R=_._init,w(m,p,R(_._payload),x)}if(pi(_))return y(m,p,_,x);if(ti(_))return v(m,p,_,x);Ms(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(n(m,p.sibling),p=i(p,_),p.return=m,m=p):(n(m,p),p=ea(_,m.mode,x),p.return=m,m=p),o(m)):n(m,p)}return w}var Mr=im(!0),sm=im(!1),vo=kn(null),wo=null,xr=null,ic=null;function sc(){ic=xr=wo=null}function oc(t){var e=vo.current;ne(vo),t._currentValue=e}function Qa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rr(t,e){wo=t,ic=xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ve=!0),t.firstContext=null)}function ct(t){var e=t._currentValue;if(ic!==t)if(t={context:t,memoizedValue:e,next:null},xr===null){if(wo===null)throw Error(S(308));xr=t,wo.dependencies={lanes:0,firstContext:t}}else xr=xr.next=t;return e}var jn=null;function lc(t){jn===null?jn=[t]:jn.push(t)}function om(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,lc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zt=!1;function ac(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vt(t,n)}return i=r.interleaved,i===null?(e.next=e,lc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vt(t,n)}function qs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ku(t,n)}}function uf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xo(t,e,n,r){var i=t.updateQueue;Zt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(s!==null){var c=i.baseState;o=0,d=u=a=null,l=s;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,v=l;switch(f=e,g=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){c=y.call(g,c,f);break e}c=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(g,c,f):y,f==null)break e;c=ue({},c,f);break e;case 2:Zt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,a=c):d=d.next=g,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(a=c),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Kn|=o,t.lanes=o,t.memoizedState=c}}function cf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var fs={},Rt=kn(fs),$i=kn(fs),Vi=kn(fs);function Fn(t){if(t===fs)throw Error(S(174));return t}function uc(t,e){switch(Z(Vi,e),Z($i,t),Z(Rt,fs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ia(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ia(e,t)}ne(Rt),Z(Rt,e)}function jr(){ne(Rt),ne($i),ne(Vi)}function am(t){Fn(Vi.current);var e=Fn(Rt.current),n=Ia(e,t.type);e!==n&&(Z($i,t),Z(Rt,n))}function cc(t){$i.current===t&&(ne(Rt),ne($i))}var se=kn(0);function So(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ql=[];function dc(){for(var t=0;t<Ql.length;t++)Ql[t]._workInProgressVersionPrimary=null;Ql.length=0}var Xs=Yt.ReactCurrentDispatcher,Yl=Yt.ReactCurrentBatchConfig,Gn=0,ae=null,ve=null,Ce=null,Co=!1,Si=!1,Hi=0,dw=0;function Pe(){throw Error(S(321))}function fc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!St(t[n],e[n]))return!1;return!0}function hc(t,e,n,r,i,s){if(Gn=s,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xs.current=t===null||t.memoizedState===null?mw:gw,t=n(r,i),Si){s=0;do{if(Si=!1,Hi=0,25<=s)throw Error(S(301));s+=1,Ce=ve=null,e.updateQueue=null,Xs.current=_w,t=n(r,i)}while(Si)}if(Xs.current=Eo,e=ve!==null&&ve.next!==null,Gn=0,Ce=ve=ae=null,Co=!1,e)throw Error(S(300));return t}function pc(){var t=Hi!==0;return Hi=0,t}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?ae.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function dt(){if(ve===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=Ce===null?ae.memoizedState:Ce.next;if(e!==null)Ce=e,ve=t;else{if(t===null)throw Error(S(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Ce===null?ae.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function Gi(t,e){return typeof e=="function"?e(t):e}function ql(t){var e=dt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=ve,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var d=u.lane;if((Gn&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=c,o=r):a=a.next=c,ae.lanes|=d,Kn|=d}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,St(r,e.memoizedState)||(Ve=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ae.lanes|=s,Kn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xl(t){var e=dt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);St(s,e.memoizedState)||(Ve=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function um(){}function cm(t,e){var n=ae,r=dt(),i=e(),s=!St(r.memoizedState,i);if(s&&(r.memoizedState=i,Ve=!0),r=r.queue,mc(hm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,Ki(9,fm.bind(null,n,r,i,e),void 0,null),Ne===null)throw Error(S(349));Gn&30||dm(n,e,i)}return i}function dm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fm(t,e,n,r){e.value=n,e.getSnapshot=r,pm(e)&&mm(t)}function hm(t,e,n){return n(function(){pm(e)&&mm(t)})}function pm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!St(t,n)}catch{return!0}}function mm(t){var e=Vt(t,1);e!==null&&wt(e,t,1,-1)}function df(t){var e=kt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:t},e.queue=t,t=t.dispatch=pw.bind(null,ae,t),[e.memoizedState,t]}function Ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gm(){return dt().memoizedState}function Js(t,e,n,r){var i=kt();ae.flags|=t,i.memoizedState=Ki(1|e,n,void 0,r===void 0?null:r)}function tl(t,e,n,r){var i=dt();r=r===void 0?null:r;var s=void 0;if(ve!==null){var o=ve.memoizedState;if(s=o.destroy,r!==null&&fc(r,o.deps)){i.memoizedState=Ki(e,n,s,r);return}}ae.flags|=t,i.memoizedState=Ki(1|e,n,s,r)}function ff(t,e){return Js(8390656,8,t,e)}function mc(t,e){return tl(2048,8,t,e)}function _m(t,e){return tl(4,2,t,e)}function ym(t,e){return tl(4,4,t,e)}function vm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wm(t,e,n){return n=n!=null?n.concat([t]):null,tl(4,4,vm.bind(null,e,t),n)}function gc(){}function xm(t,e){var n=dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sm(t,e){var n=dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cm(t,e,n){return Gn&21?(St(n,e)||(n=Ip(),ae.lanes|=n,Kn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ve=!0),t.memoizedState=n)}function fw(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=Yl.transition;Yl.transition={};try{t(!1),e()}finally{K=n,Yl.transition=r}}function Em(){return dt().memoizedState}function hw(t,e,n){var r=hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Nm(t))km(e,n);else if(n=om(t,e,n,r),n!==null){var i=We();wt(n,t,r,i),Tm(n,e,r)}}function pw(t,e,n){var r=hn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nm(t))km(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,St(l,o)){var a=e.interleaved;a===null?(i.next=i,lc(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=om(t,e,i,r),n!==null&&(i=We(),wt(n,t,r,i),Tm(n,e,r))}}function Nm(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function km(t,e){Si=Co=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ku(t,n)}}var Eo={readContext:ct,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},mw={readContext:ct,useCallback:function(t,e){return kt().memoizedState=[t,e===void 0?null:e],t},useContext:ct,useEffect:ff,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Js(4194308,4,vm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Js(4194308,4,t,e)},useInsertionEffect:function(t,e){return Js(4,2,t,e)},useMemo:function(t,e){var n=kt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hw.bind(null,ae,t),[r.memoizedState,t]},useRef:function(t){var e=kt();return t={current:t},e.memoizedState=t},useState:df,useDebugValue:gc,useDeferredValue:function(t){return kt().memoizedState=t},useTransition:function(){var t=df(!1),e=t[0];return t=fw.bind(null,t[1]),kt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ae,i=kt();if(ie){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),Ne===null)throw Error(S(349));Gn&30||dm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ff(hm.bind(null,r,s,t),[t]),r.flags|=2048,Ki(9,fm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=kt(),e=Ne.identifierPrefix;if(ie){var n=Ft,r=jt;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gw={readContext:ct,useCallback:xm,useContext:ct,useEffect:mc,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:ym,useMemo:Sm,useReducer:ql,useRef:gm,useState:function(){return ql(Gi)},useDebugValue:gc,useDeferredValue:function(t){var e=dt();return Cm(e,ve.memoizedState,t)},useTransition:function(){var t=ql(Gi)[0],e=dt().memoizedState;return[t,e]},useMutableSource:um,useSyncExternalStore:cm,useId:Em,unstable_isNewReconciler:!1},_w={readContext:ct,useCallback:xm,useContext:ct,useEffect:mc,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:ym,useMemo:Sm,useReducer:Xl,useRef:gm,useState:function(){return Xl(Gi)},useDebugValue:gc,useDeferredValue:function(t){var e=dt();return ve===null?e.memoizedState=t:Cm(e,ve.memoizedState,t)},useTransition:function(){var t=Xl(Gi)[0],e=dt().memoizedState;return[t,e]},useMutableSource:um,useSyncExternalStore:cm,useId:Em,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ya(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nl={isMounted:function(t){return(t=t._reactInternals)?nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=We(),i=hn(t),s=zt(r,i);s.payload=e,n!=null&&(s.callback=n),e=dn(t,s,i),e!==null&&(wt(e,t,i,r),qs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=We(),i=hn(t),s=zt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dn(t,s,i),e!==null&&(wt(e,t,i,r),qs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),r=hn(t),i=zt(n,r);i.tag=2,e!=null&&(i.callback=e),e=dn(t,i,r),e!==null&&(wt(e,t,r,n),qs(e,t,r))}};function hf(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wi(n,r)||!Wi(i,s):!0}function Im(t,e,n){var r=!1,i=wn,s=e.contextType;return typeof s=="object"&&s!==null?s=ct(s):(i=Ke(e)?Vn:Oe.current,r=e.contextTypes,s=(r=r!=null)?Lr(t,i):wn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function qa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ac(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ct(s):(s=Ke(e)?Vn:Oe.current,i.context=Lr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ya(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nl.enqueueReplaceState(i,i.state,null),xo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fr(t,e){try{var n="",r=e;do n+=Hy(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Jl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yw=typeof WeakMap=="function"?WeakMap:Map;function Rm(t,e,n){n=zt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ko||(ko=!0,lu=r),Xa(t,e)},n}function bm(t,e,n){n=zt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xa(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xa(t,e),typeof r!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Aw.bind(null,t,e,n),e.then(t,t))}function gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _f(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zt(-1,1),e.tag=2,dn(n,e,1))),n.lanes|=1),t)}var vw=Yt.ReactCurrentOwner,Ve=!1;function je(t,e,n,r){e.child=t===null?sm(e,null,n,r):Mr(e,t.child,n,r)}function yf(t,e,n,r,i){n=n.render;var s=e.ref;return Rr(e,i),r=hc(t,e,n,r,s,i),n=pc(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ht(t,e,i)):(ie&&n&&tc(e),e.flags|=1,je(t,e,r,i),e.child)}function vf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ec(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Pm(t,e,s,r,i)):(t=no(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wi,n(o,r)&&t.ref===e.ref)return Ht(t,e,i)}return e.flags|=1,t=pn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Pm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Wi(s,r)&&t.ref===e.ref)if(Ve=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ve=!0);else return e.lanes=t.lanes,Ht(t,e,i)}return Ja(t,e,n,r,i)}function Am(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(Cr,qe),qe|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(Cr,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Z(Cr,qe),qe|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Z(Cr,qe),qe|=r;return je(t,e,i,n),e.child}function Dm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ja(t,e,n,r,i){var s=Ke(n)?Vn:Oe.current;return s=Lr(e,s),Rr(e,i),n=hc(t,e,n,r,s,i),r=pc(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ht(t,e,i)):(ie&&r&&tc(e),e.flags|=1,je(t,e,n,i),e.child)}function wf(t,e,n,r,i){if(Ke(n)){var s=!0;go(e)}else s=!1;if(Rr(e,i),e.stateNode===null)Zs(t,e),Im(e,n,r),qa(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=Ke(n)?Vn:Oe.current,u=Lr(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&pf(e,o,r,u),Zt=!1;var f=e.memoizedState;o.state=f,xo(e,r,o,i),a=e.memoizedState,l!==r||f!==a||Ge.current||Zt?(typeof d=="function"&&(Ya(e,n,d,r),a=e.memoizedState),(l=Zt||hf(e,n,l,r,f,a,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lm(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:pt(e.type,l),o.props=u,c=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ct(a):(a=Ke(n)?Vn:Oe.current,a=Lr(e,a));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||f!==a)&&pf(e,o,r,a),Zt=!1,f=e.memoizedState,o.state=f,xo(e,r,o,i);var y=e.memoizedState;l!==c||f!==y||Ge.current||Zt?(typeof g=="function"&&(Ya(e,n,g,r),y=e.memoizedState),(u=Zt||hf(e,n,u,r,f,y,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Za(t,e,n,r,s,i)}function Za(t,e,n,r,i,s){Dm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sf(e,n,!1),Ht(t,e,s);r=e.stateNode,vw.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mr(e,t.child,null,s),e.child=Mr(e,null,l,s)):je(t,e,l,s),e.memoizedState=r.state,i&&sf(e,n,!0),e.child}function Lm(t){var e=t.stateNode;e.pendingContext?rf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rf(t,e.context,!1),uc(t,e.containerInfo)}function xf(t,e,n,r,i){return Or(),rc(i),e.flags|=256,je(t,e,n,r),e.child}var eu={dehydrated:null,treeContext:null,retryLane:0};function tu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Om(t,e,n){var r=e.pendingProps,i=se.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Z(se,i&1),t===null)return Ka(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sl(o,r,0,null),t=Bn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=tu(n),e.memoizedState=eu,t):_c(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return ww(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=pn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=pn(l,s):(s=Bn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?tu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=eu,r}return s=t.child,t=s.sibling,r=pn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _c(t,e){return e=sl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function js(t,e,n,r){return r!==null&&rc(r),Mr(e,t.child,null,n),t=_c(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ww(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Jl(Error(S(422))),js(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sl({mode:"visible",children:r.children},i,0,null),s=Bn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Mr(e,t.child,null,o),e.child.memoizedState=tu(o),e.memoizedState=eu,s);if(!(e.mode&1))return js(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(S(419)),r=Jl(s,r,void 0),js(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ve||l){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vt(t,i),wt(r,t,i,-1))}return Cc(),r=Jl(Error(S(421))),js(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Dw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xe=cn(i.nextSibling),Je=e,ie=!0,gt=null,t!==null&&(st[ot++]=jt,st[ot++]=Ft,st[ot++]=Hn,jt=t.id,Ft=t.overflow,Hn=e),e=_c(e,r.children),e.flags|=4096,e)}function Sf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qa(t.return,e,n)}function Zl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(je(t,e,r.children,n),r=se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sf(t,n,e);else if(t.tag===19)Sf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Z(se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&So(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&So(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zl(e,!0,n,null,s);break;case"together":Zl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=pn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xw(t,e,n){switch(e.tag){case 3:Lm(e),Or();break;case 5:am(e);break;case 1:Ke(e.type)&&go(e);break;case 4:uc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Z(vo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Z(se,se.current&1),e.flags|=128,null):n&e.child.childLanes?Om(t,e,n):(Z(se,se.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);Z(se,se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(se,se.current),r)break;return null;case 22:case 23:return e.lanes=0,Am(t,e,n)}return Ht(t,e,n)}var jm,nu,Fm,Wm;jm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nu=function(){};Fm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fn(Rt.current);var s=null;switch(n){case"input":i=Ea(t,i),r=Ea(t,r),s=[];break;case"select":i=ue({},i,{value:void 0}),r=ue({},r,{value:void 0}),s=[];break;case"textarea":i=Ta(t,i),r=Ta(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=po)}Ra(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ai.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&te("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Wm=function(t,e,n,r){n!==r&&(e.flags|=4)};function li(t,e){if(!ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ae(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Sw(t,e,n){var r=e.pendingProps;switch(nc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(e),null;case 1:return Ke(e.type)&&mo(),Ae(e),null;case 3:return r=e.stateNode,jr(),ne(Ge),ne(Oe),dc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Os(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(cu(gt),gt=null))),nu(t,e),Ae(e),null;case 5:cc(e);var i=Fn(Vi.current);if(n=e.type,t!==null&&e.stateNode!=null)Fm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return Ae(e),null}if(t=Fn(Rt.current),Os(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Tt]=e,r[Bi]=s,t=(e.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(i=0;i<gi.length;i++)te(gi[i],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":bd(r,s),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},te("invalid",r);break;case"textarea":Ad(r,s),te("invalid",r)}Ra(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ls(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ls(r.textContent,l,t),i=["children",""+l]):Ai.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&te("scroll",r)}switch(n){case"input":ks(r),Pd(r,s,!0);break;case"textarea":ks(r),Dd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=po)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tt]=e,t[Bi]=r,jm(t,e,!1,!1),e.stateNode=t;e:{switch(o=ba(n,r),n){case"dialog":te("cancel",t),te("close",t),i=r;break;case"iframe":case"object":case"embed":te("load",t),i=r;break;case"video":case"audio":for(i=0;i<gi.length;i++)te(gi[i],t);i=r;break;case"source":te("error",t),i=r;break;case"img":case"image":case"link":te("error",t),te("load",t),i=r;break;case"details":te("toggle",t),i=r;break;case"input":bd(t,r),i=Ea(t,r),te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ue({},r,{value:void 0}),te("invalid",t);break;case"textarea":Ad(t,r),i=Ta(t,r),te("invalid",t);break;default:i=r}Ra(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?gp(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&pp(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Di(t,a):typeof a=="number"&&Di(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ai.hasOwnProperty(s)?a!=null&&s==="onScroll"&&te("scroll",t):a!=null&&Uu(t,s,a,o))}switch(n){case"input":ks(t),Pd(t,r,!1);break;case"textarea":ks(t),Dd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Nr(t,!!r.multiple,s,!1):r.defaultValue!=null&&Nr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=po)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ae(e),null;case 6:if(t&&e.stateNode!=null)Wm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=Fn(Vi.current),Fn(Rt.current),Os(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tt]=e,(s=r.nodeValue!==n)&&(t=Je,t!==null))switch(t.tag){case 3:Ls(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ls(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tt]=e,e.stateNode=r}return Ae(e),null;case 13:if(ne(se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ie&&Xe!==null&&e.mode&1&&!(e.flags&128))rm(),Or(),e.flags|=98560,s=!1;else if(s=Os(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(S(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(S(317));s[Tt]=e}else Or(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ae(e),s=!1}else gt!==null&&(cu(gt),gt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||se.current&1?xe===0&&(xe=3):Cc())),e.updateQueue!==null&&(e.flags|=4),Ae(e),null);case 4:return jr(),nu(t,e),t===null&&zi(e.stateNode.containerInfo),Ae(e),null;case 10:return oc(e.type._context),Ae(e),null;case 17:return Ke(e.type)&&mo(),Ae(e),null;case 19:if(ne(se),s=e.memoizedState,s===null)return Ae(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)li(s,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=So(t),o!==null){for(e.flags|=128,li(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Z(se,se.current&1|2),e.child}t=t.sibling}s.tail!==null&&he()>Wr&&(e.flags|=128,r=!0,li(s,!1),e.lanes=4194304)}else{if(!r)if(t=So(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),li(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ie)return Ae(e),null}else 2*he()-s.renderingStartTime>Wr&&n!==1073741824&&(e.flags|=128,r=!0,li(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,n=se.current,Z(se,r?n&1|2:n&1),e):(Ae(e),null);case 22:case 23:return Sc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qe&1073741824&&(Ae(e),e.subtreeFlags&6&&(e.flags|=8192)):Ae(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function Cw(t,e){switch(nc(e),e.tag){case 1:return Ke(e.type)&&mo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jr(),ne(Ge),ne(Oe),dc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cc(e),null;case 13:if(ne(se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));Or()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ne(se),null;case 4:return jr(),null;case 10:return oc(e.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var Fs=!1,Le=!1,Ew=typeof WeakSet=="function"?WeakSet:Set,I=null;function Sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(t,e,r)}else n.current=null}function ru(t,e,n){try{n()}catch(r){ce(t,e,r)}}var Cf=!1;function Nw(t,e){if(za=co,t=Vp(),ec(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,c=t,f=null;t:for(;;){for(var g;c!==n||i!==0&&c.nodeType!==3||(l=o+i),c!==s||r!==0&&c.nodeType!==3||(a=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(g=c.firstChild)!==null;)f=c,c=g;for(;;){if(c===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(a=o),(g=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ua={focusedElem:t,selectionRange:n},co=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,w=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:pt(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(x){ce(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return y=Cf,Cf=!1,y}function Ci(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ru(e,n,s)}i=i.next}while(i!==r)}}function rl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zm(t){var e=t.alternate;e!==null&&(t.alternate=null,zm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tt],delete e[Bi],delete e[Va],delete e[lw],delete e[aw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Um(t){return t.tag===5||t.tag===3||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Um(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function su(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=po));else if(r!==4&&(t=t.child,t!==null))for(su(t,e,n),t=t.sibling;t!==null;)su(t,e,n),t=t.sibling}function ou(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ou(t,e,n),t=t.sibling;t!==null;)ou(t,e,n),t=t.sibling}var ke=null,mt=!1;function Xt(t,e,n){for(n=n.child;n!==null;)Bm(t,e,n),n=n.sibling}function Bm(t,e,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Yo,n)}catch{}switch(n.tag){case 5:Le||Sr(n,e);case 6:var r=ke,i=mt;ke=null,Xt(t,e,n),ke=r,mt=i,ke!==null&&(mt?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(mt?(t=ke,n=n.stateNode,t.nodeType===8?Gl(t.parentNode,n):t.nodeType===1&&Gl(t,n),ji(t)):Gl(ke,n.stateNode));break;case 4:r=ke,i=mt,ke=n.stateNode.containerInfo,mt=!0,Xt(t,e,n),ke=r,mt=i;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ru(n,e,o),i=i.next}while(i!==r)}Xt(t,e,n);break;case 1:if(!Le&&(Sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ce(n,e,l)}Xt(t,e,n);break;case 21:Xt(t,e,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,Xt(t,e,n),Le=r):Xt(t,e,n);break;default:Xt(t,e,n)}}function Nf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ew),e.forEach(function(r){var i=Lw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,mt=!1;break e;case 3:ke=l.stateNode.containerInfo,mt=!0;break e;case 4:ke=l.stateNode.containerInfo,mt=!0;break e}l=l.return}if(ke===null)throw Error(S(160));Bm(s,o,i),ke=null,mt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$m(e,t),e=e.sibling}function $m(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ft(e,t),Nt(t),r&4){try{Ci(3,t,t.return),rl(3,t)}catch(v){ce(t,t.return,v)}try{Ci(5,t,t.return)}catch(v){ce(t,t.return,v)}}break;case 1:ft(e,t),Nt(t),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(ft(e,t),Nt(t),r&512&&n!==null&&Sr(n,n.return),t.flags&32){var i=t.stateNode;try{Di(i,"")}catch(v){ce(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&dp(i,s),ba(l,o);var u=ba(l,s);for(o=0;o<a.length;o+=2){var d=a[o],c=a[o+1];d==="style"?gp(i,c):d==="dangerouslySetInnerHTML"?pp(i,c):d==="children"?Di(i,c):Uu(i,d,c,u)}switch(l){case"input":Na(i,s);break;case"textarea":fp(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Nr(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Nr(i,!!s.multiple,s.defaultValue,!0):Nr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bi]=s}catch(v){ce(t,t.return,v)}}break;case 6:if(ft(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ce(t,t.return,v)}}break;case 3:if(ft(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ji(e.containerInfo)}catch(v){ce(t,t.return,v)}break;case 4:ft(e,t),Nt(t);break;case 13:ft(e,t),Nt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wc=he())),r&4&&Nf(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Le=(u=Le)||d,ft(e,t),Le=u):ft(e,t),Nt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(I=t,d=t.child;d!==null;){for(c=I=d;I!==null;){switch(f=I,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ci(4,f,f.return);break;case 1:Sr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){ce(r,n,v)}}break;case 5:Sr(f,f.return);break;case 22:if(f.memoizedState!==null){Tf(c);continue}}g!==null?(g.return=f,I=g):Tf(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=c.stateNode,a=c.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=mp("display",o))}catch(v){ce(t,t.return,v)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){ce(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:ft(e,t),Nt(t),r&4&&Nf(t);break;case 21:break;default:ft(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Um(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Di(i,""),r.flags&=-33);var s=Ef(t);ou(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ef(t);su(t,l,o);break;default:throw Error(S(161))}}catch(a){ce(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kw(t,e,n){I=t,Vm(t)}function Vm(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fs;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Le;l=Fs;var u=Le;if(Fs=o,(Le=a)&&!u)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?If(i):a!==null?(a.return=o,I=a):If(i);for(;s!==null;)I=s,Vm(s),s=s.sibling;I=i,Fs=l,Le=u}kf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):kf(t)}}function kf(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||rl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Le)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cf(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&ji(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}Le||e.flags&512&&iu(e)}catch(f){ce(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function Tf(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function If(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(a){ce(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ce(e,i,a)}}var s=e.return;try{iu(e)}catch(a){ce(e,s,a)}break;case 5:var o=e.return;try{iu(e)}catch(a){ce(e,o,a)}}}catch(a){ce(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var Tw=Math.ceil,No=Yt.ReactCurrentDispatcher,yc=Yt.ReactCurrentOwner,ut=Yt.ReactCurrentBatchConfig,B=0,Ne=null,ge=null,Ie=0,qe=0,Cr=kn(0),xe=0,Qi=null,Kn=0,il=0,vc=0,Ei=null,$e=null,wc=0,Wr=1/0,Ot=null,ko=!1,lu=null,fn=null,Ws=!1,rn=null,To=0,Ni=0,au=null,eo=-1,to=0;function We(){return B&6?he():eo!==-1?eo:eo=he()}function hn(t){return t.mode&1?B&2&&Ie!==0?Ie&-Ie:cw.transition!==null?(to===0&&(to=Ip()),to):(t=K,t!==0||(t=window.event,t=t===void 0?16:Op(t.type)),t):1}function wt(t,e,n,r){if(50<Ni)throw Ni=0,au=null,Error(S(185));us(t,n,r),(!(B&2)||t!==Ne)&&(t===Ne&&(!(B&2)&&(il|=n),xe===4&&tn(t,Ie)),Qe(t,r),n===1&&B===0&&!(e.mode&1)&&(Wr=he()+500,el&&Tn()))}function Qe(t,e){var n=t.callbackNode;cv(t,e);var r=uo(t,t===Ne?Ie:0);if(r===0)n!==null&&Md(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Md(n),e===1)t.tag===0?uw(Rf.bind(null,t)):em(Rf.bind(null,t)),sw(function(){!(B&6)&&Tn()}),n=null;else{switch(Rp(r)){case 1:n=Gu;break;case 4:n=kp;break;case 16:n=ao;break;case 536870912:n=Tp;break;default:n=ao}n=Jm(n,Hm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hm(t,e){if(eo=-1,to=0,B&6)throw Error(S(327));var n=t.callbackNode;if(br()&&t.callbackNode!==n)return null;var r=uo(t,t===Ne?Ie:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Io(t,r);else{e=r;var i=B;B|=2;var s=Km();(Ne!==t||Ie!==e)&&(Ot=null,Wr=he()+500,Un(t,e));do try{bw();break}catch(l){Gm(t,l)}while(!0);sc(),No.current=s,B=i,ge!==null?e=0:(Ne=null,Ie=0,e=xe)}if(e!==0){if(e===2&&(i=Oa(t),i!==0&&(r=i,e=uu(t,i))),e===1)throw n=Qi,Un(t,0),tn(t,r),Qe(t,he()),n;if(e===6)tn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Iw(i)&&(e=Io(t,r),e===2&&(s=Oa(t),s!==0&&(r=s,e=uu(t,s))),e===1))throw n=Qi,Un(t,0),tn(t,r),Qe(t,he()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:Dn(t,$e,Ot);break;case 3:if(tn(t,r),(r&130023424)===r&&(e=wc+500-he(),10<e)){if(uo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){We(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$a(Dn.bind(null,t,$e,Ot),e);break}Dn(t,$e,Ot);break;case 4:if(tn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tw(r/1960))-r,10<r){t.timeoutHandle=$a(Dn.bind(null,t,$e,Ot),r);break}Dn(t,$e,Ot);break;case 5:Dn(t,$e,Ot);break;default:throw Error(S(329))}}}return Qe(t,he()),t.callbackNode===n?Hm.bind(null,t):null}function uu(t,e){var n=Ei;return t.current.memoizedState.isDehydrated&&(Un(t,e).flags|=256),t=Io(t,e),t!==2&&(e=$e,$e=n,e!==null&&cu(e)),t}function cu(t){$e===null?$e=t:$e.push.apply($e,t)}function Iw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!St(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tn(t,e){for(e&=~vc,e&=~il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function Rf(t){if(B&6)throw Error(S(327));br();var e=uo(t,0);if(!(e&1))return Qe(t,he()),null;var n=Io(t,e);if(t.tag!==0&&n===2){var r=Oa(t);r!==0&&(e=r,n=uu(t,r))}if(n===1)throw n=Qi,Un(t,0),tn(t,e),Qe(t,he()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dn(t,$e,Ot),Qe(t,he()),null}function xc(t,e){var n=B;B|=1;try{return t(e)}finally{B=n,B===0&&(Wr=he()+500,el&&Tn())}}function Qn(t){rn!==null&&rn.tag===0&&!(B&6)&&br();var e=B;B|=1;var n=ut.transition,r=K;try{if(ut.transition=null,K=1,t)return t()}finally{K=r,ut.transition=n,B=e,!(B&6)&&Tn()}}function Sc(){qe=Cr.current,ne(Cr)}function Un(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iw(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(nc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mo();break;case 3:jr(),ne(Ge),ne(Oe),dc();break;case 5:cc(r);break;case 4:jr();break;case 13:ne(se);break;case 19:ne(se);break;case 10:oc(r.type._context);break;case 22:case 23:Sc()}n=n.return}if(Ne=t,ge=t=pn(t.current,null),Ie=qe=e,xe=0,Qi=null,vc=il=Kn=0,$e=Ei=null,jn!==null){for(e=0;e<jn.length;e++)if(n=jn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}jn=null}return t}function Gm(t,e){do{var n=ge;try{if(sc(),Xs.current=Eo,Co){for(var r=ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Co=!1}if(Gn=0,Ce=ve=ae=null,Si=!1,Hi=0,yc.current=null,n===null||n.return===null){xe=1,Qi=e,ge=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ie,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=gf(o);if(g!==null){g.flags&=-257,_f(g,o,l,s,e),g.mode&1&&mf(s,u,e),e=g,a=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(a),e.updateQueue=v}else y.add(a);break e}else{if(!(e&1)){mf(s,u,e),Cc();break e}a=Error(S(426))}}else if(ie&&l.mode&1){var w=gf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),_f(w,o,l,s,e),rc(Fr(a,l));break e}}s=a=Fr(a,l),xe!==4&&(xe=2),Ei===null?Ei=[s]:Ei.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Rm(s,a,e);uf(s,m);break e;case 1:l=a;var p=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fn===null||!fn.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=bm(s,l,e);uf(s,x);break e}}s=s.return}while(s!==null)}Ym(n)}catch(N){e=N,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function Km(){var t=No.current;return No.current=Eo,t===null?Eo:t}function Cc(){(xe===0||xe===3||xe===2)&&(xe=4),Ne===null||!(Kn&268435455)&&!(il&268435455)||tn(Ne,Ie)}function Io(t,e){var n=B;B|=2;var r=Km();(Ne!==t||Ie!==e)&&(Ot=null,Un(t,e));do try{Rw();break}catch(i){Gm(t,i)}while(!0);if(sc(),B=n,No.current=r,ge!==null)throw Error(S(261));return Ne=null,Ie=0,xe}function Rw(){for(;ge!==null;)Qm(ge)}function bw(){for(;ge!==null&&!tv();)Qm(ge)}function Qm(t){var e=Xm(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?Ym(t):ge=e,yc.current=null}function Ym(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cw(n,e),n!==null){n.flags&=32767,ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ge=null;return}}else if(n=Sw(n,e,qe),n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);xe===0&&(xe=5)}function Dn(t,e,n){var r=K,i=ut.transition;try{ut.transition=null,K=1,Pw(t,e,n,r)}finally{ut.transition=i,K=r}return null}function Pw(t,e,n,r){do br();while(rn!==null);if(B&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(dv(t,s),t===Ne&&(ge=Ne=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ws||(Ws=!0,Jm(ao,function(){return br(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ut.transition,ut.transition=null;var o=K;K=1;var l=B;B|=4,yc.current=null,Nw(t,n),$m(n,t),Xv(Ua),co=!!za,Ua=za=null,t.current=n,kw(n),nv(),B=l,K=o,ut.transition=s}else t.current=n;if(Ws&&(Ws=!1,rn=t,To=i),s=t.pendingLanes,s===0&&(fn=null),sv(n.stateNode),Qe(t,he()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ko)throw ko=!1,t=lu,lu=null,t;return To&1&&t.tag!==0&&br(),s=t.pendingLanes,s&1?t===au?Ni++:(Ni=0,au=t):Ni=0,Tn(),null}function br(){if(rn!==null){var t=Rp(To),e=ut.transition,n=K;try{if(ut.transition=null,K=16>t?16:t,rn===null)var r=!1;else{if(t=rn,rn=null,To=0,B&6)throw Error(S(331));var i=B;for(B|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:Ci(8,d,s)}var c=d.child;if(c!==null)c.return=d,I=c;else for(;I!==null;){d=I;var f=d.sibling,g=d.return;if(zm(d),d===u){I=null;break}if(f!==null){f.return=g,I=f;break}I=g}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ci(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,I=m;break e}I=s.return}}var p=t.current;for(I=p;I!==null;){o=I;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,I=_;else e:for(o=p;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){ce(l,l.return,N)}if(l===o){I=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,I=x;break e}I=l.return}}if(B=i,Tn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Yo,t)}catch{}r=!0}return r}finally{K=n,ut.transition=e}}return!1}function bf(t,e,n){e=Fr(n,e),e=Rm(t,e,1),t=dn(t,e,1),e=We(),t!==null&&(us(t,1,e),Qe(t,e))}function ce(t,e,n){if(t.tag===3)bf(t,t,n);else for(;e!==null;){if(e.tag===3){bf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fn===null||!fn.has(r))){t=Fr(n,t),t=bm(e,t,1),e=dn(e,t,1),t=We(),e!==null&&(us(e,1,t),Qe(e,t));break}}e=e.return}}function Aw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Ne===t&&(Ie&n)===n&&(xe===4||xe===3&&(Ie&130023424)===Ie&&500>he()-wc?Un(t,0):vc|=n),Qe(t,e)}function qm(t,e){e===0&&(t.mode&1?(e=Rs,Rs<<=1,!(Rs&130023424)&&(Rs=4194304)):e=1);var n=We();t=Vt(t,e),t!==null&&(us(t,e,n),Qe(t,n))}function Dw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qm(t,n)}function Lw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),qm(t,n)}var Xm;Xm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ge.current)Ve=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ve=!1,xw(t,e,n);Ve=!!(t.flags&131072)}else Ve=!1,ie&&e.flags&1048576&&tm(e,yo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zs(t,e),t=e.pendingProps;var i=Lr(e,Oe.current);Rr(e,n),i=hc(null,e,r,t,i,n);var s=pc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(r)?(s=!0,go(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ac(e),i.updater=nl,e.stateNode=i,i._reactInternals=e,qa(e,r,t,n),e=Za(null,e,r,!0,s,n)):(e.tag=0,ie&&s&&tc(e),je(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Mw(r),t=pt(r,t),i){case 0:e=Ja(null,e,r,t,n);break e;case 1:e=wf(null,e,r,t,n);break e;case 11:e=yf(null,e,r,t,n);break e;case 14:e=vf(null,e,r,pt(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),Ja(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),wf(t,e,r,i,n);case 3:e:{if(Lm(e),t===null)throw Error(S(387));r=e.pendingProps,s=e.memoizedState,i=s.element,lm(t,e),xo(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fr(Error(S(423)),e),e=xf(t,e,r,n,i);break e}else if(r!==i){i=Fr(Error(S(424)),e),e=xf(t,e,r,n,i);break e}else for(Xe=cn(e.stateNode.containerInfo.firstChild),Je=e,ie=!0,gt=null,n=sm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===i){e=Ht(t,e,n);break e}je(t,e,r,n)}e=e.child}return e;case 5:return am(e),t===null&&Ka(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ba(r,i)?o=null:s!==null&&Ba(r,s)&&(e.flags|=32),Dm(t,e),je(t,e,o,n),e.child;case 6:return t===null&&Ka(e),null;case 13:return Om(t,e,n);case 4:return uc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mr(e,null,r,n):je(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),yf(t,e,r,i,n);case 7:return je(t,e,e.pendingProps,n),e.child;case 8:return je(t,e,e.pendingProps.children,n),e.child;case 12:return je(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Z(vo,r._currentValue),r._currentValue=o,s!==null)if(St(s.value,o)){if(s.children===i.children&&!Ge.current){e=Ht(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=zt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Qa(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(S(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Qa(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}je(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rr(e,n),i=ct(i),r=r(i),e.flags|=1,je(t,e,r,n),e.child;case 14:return r=e.type,i=pt(r,e.pendingProps),i=pt(r.type,i),vf(t,e,r,i,n);case 15:return Pm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pt(r,i),Zs(t,e),e.tag=1,Ke(r)?(t=!0,go(e)):t=!1,Rr(e,n),Im(e,r,i),qa(e,r,i,n),Za(null,e,r,!0,t,n);case 19:return Mm(t,e,n);case 22:return Am(t,e,n)}throw Error(S(156,e.tag))};function Jm(t,e){return Np(t,e)}function Ow(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,e,n,r){return new Ow(t,e,n,r)}function Ec(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mw(t){if(typeof t=="function")return Ec(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$u)return 11;if(t===Vu)return 14}return 2}function pn(t,e){var n=t.alternate;return n===null?(n=lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function no(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Ec(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hr:return Bn(n.children,i,s,e);case Bu:o=8,i|=8;break;case wa:return t=lt(12,n,e,i|2),t.elementType=wa,t.lanes=s,t;case xa:return t=lt(13,n,e,i),t.elementType=xa,t.lanes=s,t;case Sa:return t=lt(19,n,e,i),t.elementType=Sa,t.lanes=s,t;case ap:return sl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case op:o=10;break e;case lp:o=9;break e;case $u:o=11;break e;case Vu:o=14;break e;case Jt:o=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=lt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Bn(t,e,n,r){return t=lt(7,t,r,e),t.lanes=n,t}function sl(t,e,n,r){return t=lt(22,t,r,e),t.elementType=ap,t.lanes=n,t.stateNode={isHidden:!1},t}function ea(t,e,n){return t=lt(6,t,null,e),t.lanes=n,t}function ta(t,e,n){return e=lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(t,e,n,r,i,s,o,l,a){return t=new jw(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(s),t}function Fw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Zm(t){if(!t)return wn;t=t._reactInternals;e:{if(nr(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Ke(n))return Zp(t,n,e)}return e}function eg(t,e,n,r,i,s,o,l,a){return t=Nc(n,r,!0,t,i,s,o,l,a),t.context=Zm(null),n=t.current,r=We(),i=hn(n),s=zt(r,i),s.callback=e??null,dn(n,s,i),t.current.lanes=i,us(t,i,r),Qe(t,r),t}function ol(t,e,n,r){var i=e.current,s=We(),o=hn(i);return n=Zm(n),e.context===null?e.context=n:e.pendingContext=n,e=zt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dn(i,e,o),t!==null&&(wt(t,i,o,s),qs(t,i,o)),o}function Ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kc(t,e){Pf(t,e),(t=t.alternate)&&Pf(t,e)}function Ww(){return null}var tg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tc(t){this._internalRoot=t}ll.prototype.render=Tc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));ol(t,e,null,null)};ll.prototype.unmount=Tc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qn(function(){ol(null,t,null,null)}),e[$t]=null}};function ll(t){this._internalRoot=t}ll.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ap();t={blockedOn:null,target:t,priority:e};for(var n=0;n<en.length&&e!==0&&e<en[n].priority;n++);en.splice(n,0,t),n===0&&Lp(t)}};function Ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Af(){}function zw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ro(o);s.call(u)}}var o=eg(e,r,t,0,null,!1,!1,"",Af);return t._reactRootContainer=o,t[$t]=o.current,zi(t.nodeType===8?t.parentNode:t),Qn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ro(a);l.call(u)}}var a=Nc(t,0,!1,null,null,!1,!1,"",Af);return t._reactRootContainer=a,t[$t]=a.current,zi(t.nodeType===8?t.parentNode:t),Qn(function(){ol(e,a,n,r)}),a}function ul(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Ro(o);l.call(a)}}ol(e,o,t,i)}else o=zw(n,e,t,i,r);return Ro(o)}bp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mi(e.pendingLanes);n!==0&&(Ku(e,n|1),Qe(e,he()),!(B&6)&&(Wr=he()+500,Tn()))}break;case 13:Qn(function(){var r=Vt(t,1);if(r!==null){var i=We();wt(r,t,1,i)}}),kc(t,1)}};Qu=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=We();wt(e,t,134217728,n)}kc(t,134217728)}};Pp=function(t){if(t.tag===13){var e=hn(t),n=Vt(t,e);if(n!==null){var r=We();wt(n,t,e,r)}kc(t,e)}};Ap=function(){return K};Dp=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Aa=function(t,e,n){switch(e){case"input":if(Na(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Zo(r);if(!i)throw Error(S(90));cp(r),Na(r,i)}}}break;case"textarea":fp(t,n);break;case"select":e=n.value,e!=null&&Nr(t,!!n.multiple,e,!1)}};vp=xc;wp=Qn;var Uw={usingClientEntryPoint:!1,Events:[ds,_r,Zo,_p,yp,xc]},ai={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bw={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cp(t),t===null?null:t.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||Ww,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{Yo=zs.inject(Bw),It=zs}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uw;nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ic(e))throw Error(S(200));return Fw(t,e,null,n)};nt.createRoot=function(t,e){if(!Ic(t))throw Error(S(299));var n=!1,r="",i=tg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nc(t,1,!1,null,null,n,!1,r,i),t[$t]=e.current,zi(t.nodeType===8?t.parentNode:t),new Tc(e)};nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=Cp(e),t=t===null?null:t.stateNode,t};nt.flushSync=function(t){return Qn(t)};nt.hydrate=function(t,e,n){if(!al(e))throw Error(S(200));return ul(null,t,e,!0,n)};nt.hydrateRoot=function(t,e,n){if(!Ic(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=tg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eg(e,null,t,1,n??null,i,!1,s,o),t[$t]=e.current,zi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ll(e)};nt.render=function(t,e,n){if(!al(e))throw Error(S(200));return ul(null,t,e,!1,n)};nt.unmountComponentAtNode=function(t){if(!al(t))throw Error(S(40));return t._reactRootContainer?(Qn(function(){ul(null,null,t,!1,function(){t._reactRootContainer=null,t[$t]=null})}),!0):!1};nt.unstable_batchedUpdates=xc;nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!al(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return ul(t,e,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function ng(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ng)}catch(t){console.error(t)}}ng(),np.exports=nt;var $w=np.exports,Df=$w;ya.createRoot=Df.createRoot,ya.hydrateRoot=Df.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yi(){return Yi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yi.apply(this,arguments)}var sn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(sn||(sn={}));const Lf="popstate";function Vw(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return du("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rg(i)}return Gw(e,n,null,t)}function _e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hw(){return Math.random().toString(36).substr(2,8)}function Of(t,e){return{usr:t.state,key:t.key,idx:e}}function du(t,e,n,r){return n===void 0&&(n=null),Yi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yr(e):e,{state:n,key:e&&e.key||r||Hw()})}function rg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gw(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=sn.Pop,a=null,u=d();u==null&&(u=0,o.replaceState(Yi({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function c(){l=sn.Pop;let w=d(),m=w==null?null:w-u;u=w,a&&a({action:l,location:v.location,delta:m})}function f(w,m){l=sn.Push;let p=du(v.location,w,m);u=d()+1;let _=Of(p,u),x=v.createHref(p);try{o.pushState(_,"",x)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(x)}s&&a&&a({action:l,location:v.location,delta:1})}function g(w,m){l=sn.Replace;let p=du(v.location,w,m);u=d();let _=Of(p,u),x=v.createHref(p);o.replaceState(_,"",x),s&&a&&a({action:l,location:v.location,delta:0})}function y(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof w=="string"?w:rg(w);return p=p.replace(/ $/,"%20"),_e(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let v={get action(){return l},get location(){return t(i,o)},listen(w){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Lf,c),a=w,()=>{i.removeEventListener(Lf,c),a=null}},createHref(w){return e(i,w)},createURL:y,encodeLocation(w){let m=y(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:g,go(w){return o.go(w)}};return v}var Mf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mf||(Mf={}));function Kw(t,e,n){return n===void 0&&(n="/"),Qw(t,e,n)}function Qw(t,e,n,r){let i=typeof e=="string"?Yr(e):e,s=og(i.pathname||"/",n);if(s==null)return null;let o=ig(t);Yw(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=l0(s);l=i0(o[a],u)}return l}function ig(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(_e(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=$n([r,a.relativePath]),d=n.concat(a);s.children&&s.children.length>0&&(_e(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ig(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:n0(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of sg(s.path))i(s,o,a)}),e}function sg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sg(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function Yw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:r0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qw=/^:[\w-]+$/,Xw=3,Jw=2,Zw=1,e0=10,t0=-2,jf=t=>t==="*";function n0(t,e){let n=t.split("/"),r=n.length;return n.some(jf)&&(r+=t0),e&&(r+=Jw),n.filter(i=>!jf(i)).reduce((i,s)=>i+(qw.test(s)?Xw:s===""?Zw:e0),r)}function r0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function i0(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",c=s0({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},d),f=a.route;if(!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:$n([s,c.pathname]),pathnameBase:f0($n([s,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(s=$n([s,c.pathnameBase]))}return o}function s0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=o0(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,c)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let v=l[c]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[c];return g&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function o0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function l0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function og(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const a0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u0=t=>a0.test(t);function c0(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Yr(t):t,s;if(n)if(u0(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Rc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Ff(n.substring(1),"/"):s=Ff(n,e)}else s=e;return{pathname:s,search:h0(r),hash:p0(i)}}function Ff(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function na(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lg(t,e){let n=d0(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ag(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Yr(t):(i=Yi({},t),_e(!i.pathname||!i.pathname.includes("?"),na("?","pathname","search",i)),_e(!i.pathname||!i.pathname.includes("#"),na("#","pathname","hash",i)),_e(!i.search||!i.search.includes("#"),na("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let c=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),c-=1;i.pathname=f.join("/")}l=c>=0?e[c]:"/"}let a=c0(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||d)&&(a.pathname+="/"),a}const $n=t=>t.join("/").replace(/\/\/+/g,"/"),f0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ug=["post","put","patch","delete"];new Set(ug);const g0=["get",...ug];new Set(g0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qi(){return qi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qi.apply(this,arguments)}const bc=C.createContext(null),_0=C.createContext(null),hs=C.createContext(null),cl=C.createContext(null),In=C.createContext({outlet:null,matches:[],isDataRoute:!1}),cg=C.createContext(null);function ps(){return C.useContext(cl)!=null}function Pc(){return ps()||_e(!1),C.useContext(cl).location}function dg(t){C.useContext(hs).static||C.useLayoutEffect(t)}function Ac(){let{isDataRoute:t}=C.useContext(In);return t?P0():y0()}function y0(){ps()||_e(!1);let t=C.useContext(bc),{basename:e,future:n,navigator:r}=C.useContext(hs),{matches:i}=C.useContext(In),{pathname:s}=Pc(),o=JSON.stringify(lg(i,n.v7_relativeSplatPath)),l=C.useRef(!1);return dg(()=>{l.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let c=ag(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:$n([e,c.pathname])),(d.replace?r.replace:r.push)(c,d.state,d)},[e,r,o,s,t])}function v0(){let{matches:t}=C.useContext(In),e=t[t.length-1];return e?e.params:{}}function w0(t,e){return x0(t,e)}function x0(t,e,n,r){ps()||_e(!1);let{navigator:i}=C.useContext(hs),{matches:s}=C.useContext(In),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=Pc(),d;if(e){var c;let w=typeof e=="string"?Yr(e):e;a==="/"||(c=w.pathname)!=null&&c.startsWith(a)||_e(!1),d=w}else d=u;let f=d.pathname||"/",g=f;if(a!=="/"){let w=a.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=Kw(t,{pathname:g}),v=k0(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:$n([a,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:$n([a,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return e&&v?C.createElement(cl.Provider,{value:{location:qi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:sn.Pop}},v):v}function S0(){let t=b0(),e=m0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,null)}const C0=C.createElement(S0,null);class E0 extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(In.Provider,{value:this.props.routeContext},C.createElement(cg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N0(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(bc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(In.Provider,{value:e},r)}function k0(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(c=>c.route.id&&(l==null?void 0:l[c.route.id])!==void 0);d>=0||_e(!1),o=o.slice(0,Math.min(o.length,d+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let c=o[d];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=d),c.route.id){let{loaderData:f,errors:g}=n,y=c.route.loader&&f[c.route.id]===void 0&&(!g||g[c.route.id]===void 0);if(c.route.lazy||y){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,c,f)=>{let g,y=!1,v=null,w=null;n&&(g=l&&c.route.id?l[c.route.id]:void 0,v=c.route.errorElement||C0,a&&(u<0&&f===0?(A0("route-fallback"),y=!0,w=null):u===f&&(y=!0,w=c.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),p=()=>{let _;return g?_=v:y?_=w:c.route.Component?_=C.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=d,C.createElement(N0,{match:c,routeContext:{outlet:d,matches:m,isDataRoute:n!=null},children:_})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?C.createElement(E0,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var fg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fg||{}),hg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hg||{});function T0(t){let e=C.useContext(bc);return e||_e(!1),e}function I0(t){let e=C.useContext(_0);return e||_e(!1),e}function R0(t){let e=C.useContext(In);return e||_e(!1),e}function pg(t){let e=R0(),n=e.matches[e.matches.length-1];return n.route.id||_e(!1),n.route.id}function b0(){var t;let e=C.useContext(cg),n=I0(),r=pg();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function P0(){let{router:t}=T0(fg.UseNavigateStable),e=pg(hg.UseNavigateStable),n=C.useRef(!1);return dg(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,qi({fromRouteId:e},s)))},[t,e])}const Wf={};function A0(t,e,n){Wf[t]||(Wf[t]=!0)}function D0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function L0(t){let{to:e,replace:n,state:r,relative:i}=t;ps()||_e(!1);let{future:s,static:o}=C.useContext(hs),{matches:l}=C.useContext(In),{pathname:a}=Pc(),u=Ac(),d=ag(e,lg(l,s.v7_relativeSplatPath),a,i==="path"),c=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(c),{replace:n,state:r,relative:i}),[u,c,i,n,r]),null}function ro(t){_e(!1)}function O0(t){let{basename:e="/",children:n=null,location:r,navigationType:i=sn.Pop,navigator:s,static:o=!1,future:l}=t;ps()&&_e(!1);let a=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:a,navigator:s,static:o,future:qi({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof r=="string"&&(r=Yr(r));let{pathname:d="/",search:c="",hash:f="",state:g=null,key:y="default"}=r,v=C.useMemo(()=>{let w=og(d,a);return w==null?null:{location:{pathname:w,search:c,hash:f,state:g,key:y},navigationType:i}},[a,d,c,f,g,y,i]);return v==null?null:C.createElement(hs.Provider,{value:u},C.createElement(cl.Provider,{children:n,value:v}))}function M0(t){let{children:e,location:n}=t;return w0(fu(e),n)}new Promise(()=>{});function fu(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){n.push.apply(n,fu(r.props.children,s));return}r.type!==ro&&_e(!1),!r.props.index||!r.props.children||_e(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fu(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const j0="6";try{window.__reactRouterVersion=j0}catch{}const F0="startTransition",zf=Ay[F0];function W0(t){let{basename:e,children:n,future:r,window:i}=t,s=C.useRef();s.current==null&&(s.current=Vw({window:i,v5Compat:!0}));let o=s.current,[l,a]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=C.useCallback(c=>{u&&zf?zf(()=>a(c)):a(c)},[a,u]);return C.useLayoutEffect(()=>o.listen(d),[o,d]),C.useEffect(()=>D0(r),[r]),C.createElement(O0,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var Uf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uf||(Uf={}));var Bf;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bf||(Bf={}));function mg(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=mg(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function oe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=mg(t))&&(r&&(r+=" "),r+=e);return r}const cr=({rank:t,suit:e,isFaceDown:n=!1,isSelected:r=!1,isDisabled:i=!1,size:s="md",onClick:o,className:l})=>{const a={sm:"w-10 h-14 md:w-12 md:h-16",md:"w-20 h-28 md:w-28 md:h-40",lg:"w-24 h-36 md:w-32 md:h-44"},u=e===""||e==="",d=oe("relative rounded-xl shadow-lg cursor-pointer transition-all",a[s],{"hover:-translate-y-2":!i,"opacity-50 cursor-not-allowed":i},l);if(n)return h.jsxs("div",{onClick:i?void 0:o,className:oe(d,"bg-gradient-to-br from-[#1e2732] to-[#0f141a] border-2",r?"border-primary ring-2 ring-primary/30":"border-[#3d4650] hover:border-primary/50","group overflow-hidden"),children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-10 group-hover:opacity-20 transition-opacity",children:h.jsx("span",{className:"material-symbols-outlined text-white text-5xl",children:"diamond"})}),h.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"})]});const c=u?"text-red-600":"text-gray-900",f=t==="Joker"?"":t,g=e||"";return h.jsxs("div",{onClick:i?void 0:o,className:oe(d,"bg-white flex flex-col",s==="sm"?"p-1.5":"p-2 md:p-3",r?"border-2 border-primary ring-2 ring-primary/30":"border border-gray-200 hover:border-primary/50"),children:[h.jsxs("div",{className:"flex justify-between items-start leading-none",children:[h.jsx("span",{className:oe("font-bold font-body",c,s==="sm"?"text-sm":"text-lg md:text-2xl"),children:f}),h.jsx("span",{className:oe(c,s==="sm"?"text-[10px]":"text-xs md:text-sm"),children:g})]}),h.jsx("div",{className:"flex-grow flex items-center justify-center",children:t==="Joker"?h.jsx("span",{className:"text-purple-500 text-3xl md:text-5xl",children:""}):h.jsx("span",{className:oe(c,s==="sm"?"text-xl":"text-3xl md:text-5xl"),children:g})}),h.jsxs("div",{className:"flex justify-between items-end rotate-180 leading-none",children:[h.jsx("span",{className:oe("font-bold font-body",c,s==="sm"?"text-sm":"text-lg md:text-2xl"),children:f}),h.jsx("span",{className:oe(c,s==="sm"?"text-[10px]":"text-xs md:text-sm"),children:g})]})]})},z0=({onClick:t,isSelected:e,size:n="sm"})=>{const r={sm:"w-10 h-14 md:w-12 md:h-16",md:"w-12 h-16"};return h.jsx("div",{onClick:t,className:oe(r[n],"bg-gradient-to-br from-blue-900 to-slate-800 rounded border shadow-sm","relative overflow-hidden flex items-center justify-center cursor-pointer","transition-all hover:-translate-y-1",e?"border-primary ring-2 ring-primary/30":"border-blue-500/20 hover:border-primary/50"),children:h.jsx("span",{className:"material-symbols-outlined text-white/10 text-xl",children:"diamond"})})},U0=({gameState:t={},myPlayerId:e,players:n={},myHand:r=[],myPrivate:i={},onDrawDeck:s,onDrawDiscard:o,onSwapCard:l,onDiscardDrawn:a,onSlap:u,onCallKabul:d,onSelectOwnCard:c,onSelectEnemyCard:f,onConfirmSwap:g,onSkipAbility:y})=>{var G,k,D,L,re,fe,Rn,Et;const[v,w]=C.useState(null),m=C.useRef(null),p=500,{currentTurn:_,turnPhase:x,abilityState:N,kabulCaller:R}=t,T=_===e,b=i==null?void 0:i.drawnCard,H=i==null?void 0:i.revealedCard,A=i==null?void 0:i.swapPreview,Me=Object.entries(n).filter(([Y])=>Y!==e);n[e];const Dt=()=>{var Y;return T?b?"DISCARD OR SWAP":x==="DRAWING"?"DRAW A CARD TO START":x==="SELECTING_TARGET"?"SELECT A CARD":x==="CONFIRMING_SWAP"?"CONFIRM SWAP?":"YOUR TURN":`${(((Y=n[_])==null?void 0:Y.name)||"Opponent").toUpperCase()}'S TURN`},Lt=Y=>{if(T){if(b){l==null||l(Y);return}if(x==="SELECTING_TARGET"&&N){const ee=N.type;ee==="PEEK_SELF"?c==null||c(Y):["BLIND_SWAP","SEE_AND_SWAP"].includes(ee)&&(w(Y),c==null||c(Y));return}w(v===Y?null:Y)}},lr=(Y,ee)=>{T&&x==="SELECTING_TARGET"&&N&&(f==null||f(Y,ee))},O=Y=>{m.current=setTimeout(()=>{u==null||u(Y)},p)},$=()=>{m.current&&(clearTimeout(m.current),m.current=null)};return h.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 bg-[#0f141a] min-h-screen",children:[h.jsx("div",{className:"w-full max-w-2xl mb-4",children:h.jsxs("div",{className:"flex justify-between items-center bg-[#1e2732] rounded-xl p-3",children:[h.jsxs("span",{className:"text-white text-sm",children:["Deck: ",h.jsx("span",{className:"font-bold text-primary",children:t.deckCount||0})]}),h.jsx("span",{className:oe("font-bold text-sm px-4 py-1 rounded-full",T?"bg-primary text-white":"bg-gray-700 text-gray-300"),children:Dt()}),R&&h.jsxs("span",{className:"text-yellow-400 font-bold text-sm",children:["KABUL by ",(G=n[R])==null?void 0:G.name]})]})}),h.jsx("div",{className:"w-full max-w-2xl flex justify-center gap-8 mb-6 flex-wrap",children:Me.map(([Y,ee])=>{var qt,Cs;return h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx("div",{className:oe("w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",_===Y?"bg-primary ring-2 ring-primary/50":"bg-[#283039]"),children:((Cs=(qt=ee.name)==null?void 0:qt[0])==null?void 0:Cs.toUpperCase())||"?"}),h.jsx("span",{className:"text-white/60 text-xs",children:ee.name}),h.jsx("div",{className:"grid grid-cols-2 gap-1 p-2 bg-[#1e2732] rounded-lg",children:(ee.hand||[0,1,2,3]).map((Rl,bn)=>h.jsx(z0,{onClick:()=>lr(Y,bn),isSelected:(N==null?void 0:N.targetPlayer)===Y&&(N==null?void 0:N.targetCardIndex)===bn,size:"sm"},bn))})]},Y)})}),h.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[h.jsxs("div",{onClick:T&&x==="DRAWING"?s:void 0,className:oe("relative w-20 h-28 bg-gradient-to-br from-primary to-blue-700 rounded-lg flex items-center justify-center cursor-pointer",T&&x==="DRAWING"?"hover:scale-105 ring-2 ring-primary/50":"opacity-60"),children:[h.jsx("span",{className:"text-white/30 text-3xl",children:""}),h.jsx("div",{className:"absolute bottom-1 right-1 bg-black/50 text-white text-xs px-1 rounded",children:t.deckCount||0})]}),h.jsx("div",{onClick:T&&x==="DRAWING"?o:void 0,className:"relative",children:t.topDiscard?h.jsx(cr,{rank:t.topDiscard.rank,suit:t.topDiscard.suit,size:"md",className:oe(T&&x==="DRAWING"&&"cursor-pointer hover:scale-105")}):h.jsx("div",{className:"w-20 h-28 border-2 border-dashed border-gray-600 rounded-lg flex items-center justify-center",children:h.jsx("span",{className:"text-gray-500 text-xs",children:"Empty"})})})]}),b&&h.jsxs("div",{className:"mb-4 flex flex-col items-center gap-2 p-4 bg-[#1e2732] rounded-xl border border-primary/30",children:[h.jsx("span",{className:"text-primary text-xs font-bold uppercase",children:"Drawn Card"}),h.jsx(cr,{rank:b.rank,suit:b.suit,size:"md",isSelected:!0}),h.jsxs("div",{className:"flex gap-2 mt-2",children:[h.jsx("button",{onClick:a,className:"bg-red-600 hover:bg-red-700 text-white text-sm font-bold py-2 px-4 rounded-lg",children:"Discard"}),h.jsx("span",{className:"text-white/60 text-xs self-center",children:"or click your card to swap"})]})]}),H&&!A&&h.jsxs("div",{className:"mb-4 flex flex-col items-center gap-2 p-4 bg-yellow-500/10 rounded-xl border border-yellow-500/30 animate-pulse",children:[h.jsx("span",{className:"text-yellow-400 text-xs font-bold uppercase",children:"Revealed!"}),h.jsx(cr,{rank:H.rank,suit:H.suit,size:"md"})]}),A&&x==="CONFIRMING_SWAP"&&h.jsxs("div",{className:"mb-4 flex flex-col items-center gap-3 p-4 bg-[#1e2732] rounded-xl border border-yellow-500/30",children:[h.jsx("span",{className:"text-yellow-400 text-xs font-bold uppercase",children:"Confirm Swap?"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("span",{className:"text-white/60 text-[10px] block mb-1",children:"YOUR CARD"}),h.jsx(cr,{rank:(k=A.ownCard)==null?void 0:k.rank,suit:(D=A.ownCard)==null?void 0:D.suit,size:"sm"}),h.jsxs("span",{className:"text-white text-xs",children:[(L=A.ownCard)==null?void 0:L.value," pts"]})]}),h.jsx("span",{className:"text-primary text-2xl",children:""}),h.jsxs("div",{className:"text-center",children:[h.jsx("span",{className:"text-white/60 text-[10px] block mb-1",children:"THEIR CARD"}),h.jsx(cr,{rank:(re=A.targetCard)==null?void 0:re.rank,suit:(fe=A.targetCard)==null?void 0:fe.suit,size:"sm"}),h.jsxs("span",{className:"text-white text-xs",children:[(Rn=A.targetCard)==null?void 0:Rn.value," pts"]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:g,className:"bg-green-600 hover:bg-green-700 text-white text-sm font-bold py-2 px-6 rounded-lg",children:" Swap"}),h.jsx("button",{onClick:y,className:"bg-red-600 hover:bg-red-700 text-white text-sm font-bold py-2 px-6 rounded-lg",children:" Cancel"})]})]}),h.jsx("div",{className:oe("grid grid-cols-2 gap-3 p-4 rounded-xl border w-fit",T?"bg-[#1e2732] border-primary/30":"bg-[#151b24] border-gray-700"),children:r.map((Y,ee)=>{const Cs=t.phase==="MEMORIZE"&&ee<2,Rl=(H==null?void 0:H.position)===ee,bn=Cs||Rl,ar=Rl?H:Y;return h.jsx("div",{onMouseDown:()=>O(ee),onMouseUp:$,onMouseLeave:$,onTouchStart:()=>O(ee),onTouchEnd:$,children:h.jsx(cr,{rank:bn?ar==null?void 0:ar.rank:null,suit:bn?ar==null?void 0:ar.suit:null,isFaceDown:!bn,isSelected:v===ee,onClick:()=>Lt(ee),size:"md",isDisabled:!T&&x!=="DRAWING"})},ee)})}),h.jsx("p",{className:"text-white/40 text-xs mt-2",children:"Long-press a card to SLAP if it matches discard"}),h.jsxs("div",{className:"mt-4 flex gap-3",children:[h.jsx("button",{onClick:d,disabled:!T||x!=="DRAWING",className:oe("flex items-center gap-2 font-bold py-3 px-6 rounded-xl transition-all",T&&x==="DRAWING"?"bg-primary hover:bg-blue-600 text-white":"bg-[#283039] text-gray-500 cursor-not-allowed"),children:" Kabul"}),(N==null?void 0:N.activePlayer)===e&&h.jsx("button",{onClick:y,className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-6 rounded-xl",children:"Skip Ability"})]}),h.jsxs("div",{className:"mt-4 text-[10px] text-gray-600",children:["Phase: ",x," | Turn: ",((Et=n[_])==null?void 0:Et.name)||_," | My Cards: ",r.length]})]})},B0=({rooms:t=[],currentUser:e={},selectedRoomId:n,onSelectRoom:r,onJoinRoom:i,onCreateRoom:s,onOpenRules:o,onLogout:l})=>{const[a,u]=C.useState(""),[d,c]=C.useState("all"),f=t.find(w=>w.id===n),g=t.filter(w=>{var _;const m=(_=w.name)==null?void 0:_.toLowerCase().includes(a.toLowerCase()),p=d==="all"||d==="waiting"&&w.playerCount<w.maxPlayers||d==="private"&&w.isPrivate;return m&&p}),y=w=>w.playerCount>=w.maxPlayers?h.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-red-500/10 text-red-500 border border-red-500/20",children:"Full"}):h.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500 border border-green-500/20",children:[h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"Waiting"]}),v=(w,m)=>`${w/m*100}%`;return h.jsxs("div",{className:"flex-1 w-full max-w-[1440px] mx-auto p-4 md:p-8 flex flex-col lg:flex-row gap-6",children:[h.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-black leading-tight tracking-[-0.033em] text-[#111418] dark:text-white",children:"Game Lobby"}),h.jsx("p",{className:"text-[#637588] dark:text-[#9dabb9] text-base mt-1",children:"Find a table and test your skills."})]}),h.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white font-bold py-2.5 px-6 rounded-lg transition-all shadow-lg shadow-blue-500/20 w-full md:w-auto group",children:[h.jsx("span",{className:"material-symbols-outlined text-[20px] group-hover:rotate-90 transition-transform",children:"add"}),h.jsx("span",{children:"Create Game"})]})]}),h.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-sm border border-[#e5e7eb] dark:border-[#283039] flex flex-col md:flex-row gap-4 items-center",children:[h.jsxs("div",{className:"relative w-full md:w-64",children:[h.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:h.jsx("span",{className:"material-symbols-outlined text-[#637588] dark:text-[#9dabb9]",style:{fontSize:"20px"},children:"search"})}),h.jsx("input",{type:"text",placeholder:"Search tables...",value:a,onChange:w=>u(w.target.value),className:"block w-full pl-10 pr-3 py-2 border-none rounded-lg leading-5 bg-[#f0f2f5] dark:bg-[#111418] text-[#111418] dark:text-white placeholder-[#637588] dark:placeholder-[#637588] focus:outline-none focus:ring-2 focus:ring-primary sm:text-sm"})]}),h.jsx("div",{className:"flex gap-2 overflow-x-auto w-full md:w-auto scrollbar-hide pb-1 md:pb-0",children:[{key:"all",label:"All Games"},{key:"waiting",label:"Waiting"},{key:"private",label:"Private"}].map(({key:w,label:m})=>h.jsx("button",{onClick:()=>c(w),className:oe("whitespace-nowrap px-4 py-1.5 rounded-full text-sm font-medium transition-colors",d===w?"bg-primary/20 text-primary border border-primary/30":"bg-[#f0f2f5] dark:bg-[#283039] text-[#637588] dark:text-[#9dabb9] hover:bg-gray-200 dark:hover:bg-[#3b4754]"),children:m},w))})]}),h.jsx("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl shadow-sm border border-[#e5e7eb] dark:border-[#283039] overflow-hidden flex-1",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-[#f9fafb] dark:bg-[#111418] border-b border-[#e5e7eb] dark:border-[#283039]",children:[h.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-[#637588] dark:text-[#9dabb9] uppercase tracking-wider",children:"Room Name"}),h.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-[#637588] dark:text-[#9dabb9] uppercase tracking-wider hidden sm:table-cell",children:"Host"}),h.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-[#637588] dark:text-[#9dabb9] uppercase tracking-wider",children:"Players"}),h.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-[#637588] dark:text-[#9dabb9] uppercase tracking-wider hidden md:table-cell",children:"Status"}),h.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-[#637588] dark:text-[#9dabb9] uppercase tracking-wider text-right",children:"Action"})]})}),h.jsxs("tbody",{className:"divide-y divide-[#e5e7eb] dark:divide-[#283039]",children:[g.map(w=>{const m=w.playerCount>=w.maxPlayers,p=w.id===n;return h.jsxs("tr",{onClick:()=>r==null?void 0:r(w.id),className:oe("group hover:bg-[#f0f2f5] dark:hover:bg-[#283039] transition-colors cursor-pointer",p&&"bg-primary/5 dark:bg-primary/10",m&&"opacity-70"),children:[h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:oe("p-2 rounded",p?"bg-primary/20 text-primary":"bg-[#f0f2f5] dark:bg-[#283039] text-[#637588] dark:text-[#9dabb9]"),children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:w.isPrivate?"lock":"playing_cards"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium text-[#111418] dark:text-white",children:w.name}),h.jsxs("div",{className:"text-xs text-[#637588] dark:text-[#9dabb9] sm:hidden",children:["@",w.hostName]})]})]})}),h.jsxs("td",{className:"px-6 py-4 text-sm text-[#637588] dark:text-[#9dabb9] hidden sm:table-cell",children:["@",w.hostName]}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-16 h-2 bg-[#e5e7eb] dark:bg-[#3b4754] rounded-full overflow-hidden",children:h.jsx("div",{className:oe("h-full",m?"bg-red-500":"bg-primary"),style:{width:v(w.playerCount,w.maxPlayers)}})}),h.jsxs("span",{className:"text-xs font-medium text-[#111418] dark:text-white",children:[w.playerCount,"/",w.maxPlayers]})]})}),h.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:y(w)}),h.jsx("td",{className:"px-6 py-4 text-right",children:m?h.jsx("button",{disabled:!0,className:"bg-transparent text-[#637588] dark:text-[#9dabb9] text-xs font-bold py-2 px-4 rounded-lg cursor-not-allowed",children:"Spectate"}):h.jsx("button",{onClick:_=>{_.stopPropagation(),i==null||i(w.id)},className:"bg-primary hover:bg-blue-600 text-white text-xs font-bold py-2 px-4 rounded-lg transition-colors",children:"Join"})})]},w.id)}),g.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-[#637588] dark:text-[#9dabb9]",children:"No rooms found. Create one!"})})]})]})})})]}),h.jsx("aside",{className:"w-full lg:w-[360px] flex-shrink-0 flex flex-col gap-6",children:f?h.jsx($0,{room:f,onJoin:()=>i==null?void 0:i(f.id)}):h.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl p-6 shadow-sm border border-[#e5e7eb] dark:border-[#283039] text-center",children:[h.jsx("span",{className:"material-symbols-outlined text-[#637588] dark:text-[#9dabb9] text-5xl mb-4",children:"touch_app"}),h.jsx("p",{className:"text-[#637588] dark:text-[#9dabb9]",children:"Select a room to see details"})]})})]})},$0=({room:t,onJoin:e})=>{const n=t.playerCount>=t.maxPlayers;return h.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl p-6 shadow-sm border border-[#e5e7eb] dark:border-[#283039] sticky top-24",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h3",{className:"text-lg font-bold text-[#111418] dark:text-white",children:"Selected Lobby"}),h.jsx("div",{className:oe("size-2 rounded-full shadow-[0_0_8px]",n?"bg-red-500 shadow-red-500/60":"bg-green-500 shadow-green-500/60")})]}),h.jsx("div",{className:"flex flex-col gap-2 mb-6",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"size-12 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white shadow-lg",children:h.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"playing_cards"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xl font-bold text-[#111418] dark:text-white leading-tight",children:t.name}),h.jsxs("p",{className:"text-sm text-[#637588] dark:text-[#9dabb9]",children:["Host: ",h.jsxs("span",{className:"text-primary font-medium",children:["@",t.hostName]})]})]})]})}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex justify-between items-end mb-3",children:[h.jsxs("h5",{className:"text-sm font-bold text-[#111418] dark:text-white",children:["Players (",t.playerCount,"/",t.maxPlayers,")"]}),!n&&h.jsxs("span",{className:"text-xs text-[#637588] dark:text-[#9dabb9]",children:["Waiting for ",t.maxPlayers-t.playerCount," more..."]})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[(t.players||[]).map((r,i)=>{var s,o;return h.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[#f0f2f5] dark:bg-[#111418] border border-[#e5e7eb] dark:border-[#283039]",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"size-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold",children:((o=(s=r.name)==null?void 0:s[0])==null?void 0:o.toUpperCase())||"?"}),r.isHost&&h.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white rounded-full p-0.5",title:"Host",children:h.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"star"})})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-[#111418] dark:text-white",children:r.name}),h.jsxs("p",{className:"text-[10px] text-[#637588] dark:text-[#9dabb9]",children:["Lvl ",r.level||1]})]})]}),h.jsx("span",{className:"material-symbols-outlined text-green-500 text-[18px]",children:"check_circle"})]},r.id)}),Array.from({length:t.maxPlayers-t.playerCount}).map((r,i)=>h.jsx("div",{className:"flex items-center justify-center p-3 h-[66px] rounded-lg border border-dashed border-[#637588] dark:border-[#3b4754] bg-transparent opacity-50",children:h.jsx("span",{className:"text-xs font-medium text-[#637588] dark:text-[#9dabb9]",children:"Empty Slot"})},`empty-${i}`))]})]}),h.jsxs("button",{onClick:e,disabled:n,className:oe("w-full font-bold py-3 px-4 rounded-lg shadow-lg transition-all transform active:scale-[0.98] flex items-center justify-center gap-2",n?"bg-[#283039] text-white/50 cursor-not-allowed":"bg-primary hover:bg-blue-600 text-white shadow-blue-500/25"),children:[h.jsx("span",{children:n?"Room Full":"Join Game Now"}),!n&&h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]})]})},gg=({isOpen:t,onClose:e})=>t?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),h.jsxs("div",{className:"relative bg-background-light dark:bg-background-dark text-[#111418] dark:text-white font-display max-w-[960px] w-full max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl border border-[#283039]",children:[h.jsxs("header",{className:"sticky top-0 flex items-center justify-between whitespace-nowrap border-b border-slate-200 dark:border-[#283039] px-6 py-4 bg-white dark:bg-[#111418] z-10 rounded-t-2xl",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"menu_book"}),h.jsx("h2",{className:"text-[#111418] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]",children:"Rules & Card Effects"})]}),h.jsx("button",{onClick:e,className:"flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-blue-600 transition-colors",children:h.jsx("span",{className:"truncate",children:"Close"})})]}),h.jsxs("div",{className:"px-4 md:px-10 py-6",children:[h.jsx("div",{className:"flex flex-wrap justify-between gap-3 mb-6",children:h.jsxs("div",{className:"flex min-w-72 flex-col gap-3",children:[h.jsx("h1",{className:"text-[#111418] dark:text-white text-3xl font-black leading-tight tracking-[-0.033em]",children:"Rules & Card Effects"}),h.jsx("p",{className:"text-[#637588] dark:text-[#9dabb9] text-base font-normal leading-normal",children:"Quick reference guide for card scoring and special abilities."})]})}),h.jsx("h2",{className:"text-[#111418] dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3 pt-5 border-b border-slate-200 dark:border-[#283039] mb-4",children:"Card Point Values"}),h.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 py-3 mb-8",children:[h.jsx(Pn,{title:"Joker",value:0,icon:"sentiment_very_satisfied",iconColor:"text-purple-500",description:"Best card to minimize score"}),h.jsx(Pn,{title:"Red Kings ",value:-1,icon:"favorite",iconColor:"text-red-500",description:"Extremely valuable"}),h.jsx(Pn,{title:"Ace",value:1,icon:"filter_1",iconColor:"text-blue-400",description:"Low value, safe to keep"}),h.jsx(Pn,{title:"2-10",value:"2-10",icon:"123",iconColor:"text-gray-400",description:"Face value (2=2, 5=5, etc.)"}),h.jsx(Pn,{title:"Jack",value:11,icon:"person",iconColor:"text-orange-400",description:"High value, has swap ability"}),h.jsx(Pn,{title:"Queen",value:12,icon:"face",iconColor:"text-pink-400",description:"High value, has see & swap"}),h.jsx(Pn,{title:"Black Kings ",value:13,icon:"skull",iconColor:"text-gray-400",description:"Worst card! Get rid of it"})]}),h.jsx("h2",{className:"text-[#111418] dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3 pt-5 border-b border-slate-200 dark:border-[#283039] mb-4",children:"Special Card Effects"}),h.jsxs("div",{className:"flex flex-col gap-4 pb-8",children:[h.jsx(Us,{cards:["Q","K"],title:"See & Swap",description:"Switch any two cards on the table, and look at both cards involved in the swap.",icon:"visibility",highlight:"see both cards"}),h.jsx(Us,{cards:["J"],title:"Blind Swap",description:"Switch any two cards on the table. You cannot look at the cards.",icon:"swap_horiz",highlight:"cannot look",highlightColor:"text-red-400"}),h.jsx(Us,{cards:["9","10"],title:"Peek Enemy",description:"Look at one of another player's cards.",icon:"group_search",highlight:"another player's cards"}),h.jsx(Us,{cards:["7","8"],title:"Peek Self",description:"Look at one of your own cards.",icon:"person_search",highlight:"your own cards"})]}),h.jsx("h2",{className:"text-[#111418] dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3 pt-5 border-b border-slate-200 dark:border-[#283039] mb-4",children:"Slap Match"}),h.jsx("div",{className:"p-5 rounded-xl bg-white dark:bg-[#1c2127] border border-slate-200 dark:border-[#3b4754] mb-8",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("span",{className:"material-symbols-outlined text-yellow-500 text-3xl",children:"touch_app"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-[#111418] dark:text-white text-lg font-bold mb-2",children:"Match the Discard"}),h.jsxs("p",{className:"text-[#637588] dark:text-[#9dabb9] text-sm leading-relaxed",children:["If you have a card with the ",h.jsx("span",{className:"text-primary font-bold",children:"same rank"})," as the top discard, you can slap it at any time to remove it from your hand! But be careful - if you're wrong, you get ",h.jsx("span",{className:"text-red-400 font-bold",children:"+1 penalty card"}),"."]})]})]})}),h.jsx("h2",{className:"text-[#111418] dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3 pt-5 border-b border-slate-200 dark:border-[#283039] mb-4",children:"Calling KABUL!"}),h.jsx("div",{className:"p-5 rounded-xl bg-gradient-to-br from-primary/20 to-blue-600/20 border border-primary/30 mb-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"campaign"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-[#111418] dark:text-white text-lg font-bold mb-2",children:"End the Round"}),h.jsxs("p",{className:"text-[#637588] dark:text-[#9dabb9] text-sm leading-relaxed mb-3",children:["When you think you have the ",h.jsx("span",{className:"text-primary font-bold",children:"lowest score"}),', call "KABUL!" at the start of your turn. All other players get one final turn, then scores are revealed.']}),h.jsx("p",{className:"text-yellow-400 text-sm font-bold",children:" Lowest score wins! Red Kings = -1, Joker = 0"})]})]})})]})]})]}):null,Pn=({title:t,value:e,icon:n,iconColor:r,description:i})=>h.jsxs("div",{className:"flex flex-1 flex-col gap-4 rounded-lg border border-solid border-slate-200 dark:border-[#3b4754] bg-white dark:bg-[#1c2127] p-5 shadow-sm",children:[h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-[#111418] dark:text-white text-base font-bold leading-tight",children:t}),h.jsx("span",{className:oe("material-symbols-outlined",r),children:n})]}),h.jsxs("p",{className:"flex items-baseline gap-1 text-[#111418] dark:text-white mt-2",children:[h.jsx("span",{className:"text-primary text-3xl font-black leading-tight tracking-[-0.033em]",children:e}),h.jsxs("span",{className:"text-sm font-bold leading-tight opacity-70",children:["Point",e!==1&&"s"]})]})]}),h.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 dark:border-[#2a343e]",children:h.jsxs("div",{className:"text-[13px] font-normal leading-normal flex gap-2 text-[#637588] dark:text-[#9dabb9] items-center",children:[h.jsx("span",{className:"material-symbols-outlined text-green-500 text-[18px]",children:"check_circle"}),i]})})]}),Us=({cards:t,title:e,description:n,icon:r,highlight:i,highlightColor:s="text-primary"})=>h.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-5 rounded-xl bg-white dark:bg-[#1c2127] border border-slate-200 dark:border-[#3b4754] hover:border-primary dark:hover:border-primary transition-colors group",children:[h.jsx("div",{className:"flex items-center justify-center min-w-[80px] h-[80px] bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("div",{className:"flex gap-2 text-[#111418] dark:text-white font-bold text-xl",children:t.map((o,l)=>h.jsx("span",{children:o},l))}),h.jsx("div",{className:"flex gap-1 text-[#111418] dark:text-gray-400 text-xs uppercase font-medium",children:"Any Suit"})]})}),h.jsxs("div",{className:"flex flex-col justify-center flex-1 gap-1",children:[h.jsx("h3",{className:"text-[#111418] dark:text-white text-lg font-bold",children:e}),h.jsx("p",{className:"text-[#637588] dark:text-[#9dabb9] text-sm leading-relaxed",children:n.split(i).map((o,l,a)=>h.jsxs(Fu.Fragment,{children:[o,l<a.length-1&&h.jsx("span",{className:oe(s,"font-bold"),children:i})]},l))})]}),h.jsx("div",{className:"flex items-center justify-center md:justify-end",children:h.jsx("span",{className:"material-symbols-outlined text-[#637588] dark:text-[#505c6a] text-3xl",children:r})})]}),V0=({user:t={},onOpenRules:e,onLogout:n,showBackButton:r=!1,onBack:i})=>{var s,o;return h.jsxs("header",{className:"sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-solid border-[#e5e7eb] dark:border-[#283039] bg-surface-light dark:bg-[#111418] px-4 md:px-6 py-3 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-4 text-white",children:[r?h.jsx("button",{onClick:i,className:"flex items-center gap-2 text-white hover:text-primary transition-colors",children:h.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}):h.jsx("div",{className:"size-8 flex items-center justify-center bg-primary rounded-lg",children:h.jsx("span",{className:"material-symbols-outlined text-white text-[20px]",children:"playing_cards"})}),h.jsx("h2",{className:"text-[#111418] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]",children:"Kabul"})]}),h.jsxs("div",{className:"flex flex-1 justify-end gap-4 md:gap-8",children:[h.jsxs("div",{className:"hidden md:flex items-center gap-9",children:[h.jsx("button",{onClick:e,className:"text-[#111418] dark:text-white text-sm font-medium leading-normal hover:text-primary transition-colors",children:"Rules"}),h.jsx("a",{className:"text-[#637588] dark:text-[#9dabb9] text-sm font-medium leading-normal hover:text-primary transition-colors",href:"#",children:"Leaderboard"})]}),h.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-[#e5e7eb] dark:border-[#3b4754]",children:[h.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[h.jsx("span",{className:"text-xs font-bold text-[#111418] dark:text-white",children:t.name||"Guest"}),h.jsxs("span",{className:"text-[10px] text-primary",children:["Level ",t.level||1]})]}),h.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-primary flex items-center justify-center bg-gradient-to-br from-blue-500 to-indigo-600",children:t.avatar?h.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):h.jsx("span",{className:"text-white font-bold text-lg",children:((o=(s=t.name)==null?void 0:s[0])==null?void 0:o.toUpperCase())||"?"})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:e,className:"md:hidden flex items-center justify-center overflow-hidden rounded-lg size-10 bg-[#f0f2f5] dark:bg-[#283039] hover:bg-gray-200 dark:hover:bg-[#323b46] text-[#111418] dark:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"menu_book"})}),h.jsx("button",{onClick:n,className:"flex items-center justify-center overflow-hidden rounded-lg size-10 bg-[#f0f2f5] dark:bg-[#283039] hover:bg-gray-200 dark:hover:bg-[#323b46] text-[#111418] dark:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"logout"})})]})]})]})]})};var $f={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E=function(t,e){if(!t)throw qr(e)},qr=function(t){return new Error("Firebase Database ("+_g.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},H0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Dc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,d=s>>2,c=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,g=u&63;a||(g=64,o||(f=64)),r.push(n[d],n[c],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):H0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||c==null)throw new G0;const f=s<<2|l>>4;if(r.push(f),u!==64){const g=l<<4&240|u>>2;if(r.push(g),c!==64){const y=u<<6&192|c;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class G0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vg=function(t){const e=yg(t);return Dc.encodeByteArray(e,!0)},bo=function(t){return vg(t).replace(/\./g,"")},hu=function(t){try{return Dc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){return wg(void 0,t)}function wg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Q0(n)||(t[n]=wg(t[n],e[n]));return t}function Q0(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=()=>Y0().__FIREBASE_DEFAULTS__,X0=()=>{if(typeof process>"u"||typeof $f>"u")return;const t=$f.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},J0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hu(t[1]);return e&&JSON.parse(e)},xg=()=>{try{return q0()||X0()||J0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Z0=t=>{var e,n;return(n=(e=xg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ex=t=>{const e=Z0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sg=()=>{var t;return(t=xg())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bo(JSON.stringify(n)),bo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nx())}function rx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sx(){return _g.NODE_ADMIN===!0}function Eg(){try{return typeof indexedDB=="object"}catch{return!1}}function Ng(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ox(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="FirebaseError";class rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lx,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ax(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new rr(i,l,r)}}function ax(t,e){return t.replace(ux,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ux=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t){return JSON.parse(t)}function we(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Xi(hu(s[0])||""),n=Xi(hu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},cx=function(t){const e=kg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},dx=function(t){const e=kg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Vf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Po(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Hf(s)&&Hf(o)){if(!Ao(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Hf(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const f=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,d;for(let c=0;c<80;c++){c<40?c<20?(u=l^s&(o^l),d=1518500249):(u=s^o^l,d=1859775393):c<60?(u=s&o|l&(s|o),d=2400959708):(u=s^o^l,d=3395469782);const f=(i<<5|i>>>27)+u+a+d+r[c]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function fl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,E(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=1e3,gx=2,_x=4*60*60*1e3,yx=.5;function Gf(t,e=mx,n=gx){const r=e*Math.pow(n,t),i=Math.round(yx*r*(Math.random()-.5)*2);return Math.min(_x,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Xr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xx(e))try{this.getOrInitializeService({instanceIdentifier:Ln})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ln){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ln){return this.instances.has(e)}getOptions(e=Ln){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ln){return this.component?this.component.multipleInstances?e:Ln:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wx(t){return t===Ln?void 0:t}function xx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const Cx={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},Ex=X.INFO,Nx={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},kx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Nx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lc{constructor(e){this.name=e,this._logLevel=Ex,this._logHandler=kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}const Tx=(t,e)=>e.some(n=>t instanceof n);let Kf,Qf;function Ix(){return Kf||(Kf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rx(){return Qf||(Qf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tg=new WeakMap,pu=new WeakMap,Ig=new WeakMap,ra=new WeakMap,Oc=new WeakMap;function bx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(mn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Tg.set(n,t)}).catch(()=>{}),Oc.set(e,t),e}function Px(t){if(pu.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});pu.set(t,e)}let mu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ig.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ax(t){mu=t(mu)}function Dx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ia(this),e,...n);return Ig.set(r,e.sort?e.sort():[e]),mn(r)}:Rx().includes(t)?function(...e){return t.apply(ia(this),e),mn(Tg.get(this))}:function(...e){return mn(t.apply(ia(this),e))}}function Lx(t){return typeof t=="function"?Dx(t):(t instanceof IDBTransaction&&Px(t),Tx(t,Ix())?new Proxy(t,mu):t)}function mn(t){if(t instanceof IDBRequest)return bx(t);if(ra.has(t))return ra.get(t);const e=Lx(t);return e!==t&&(ra.set(t,e),Oc.set(e,t)),e}const ia=t=>Oc.get(t);function Rg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=mn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(mn(o.result),a.oldVersion,a.newVersion,mn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ox=["get","getKey","getAll","getAllKeys","count"],Mx=["put","add","delete","clear"],sa=new Map;function Yf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sa.get(e))return sa.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Mx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ox.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return sa.set(e,s),s}Ax(t=>({...t,get:(e,n,r)=>Yf(e,n)||t.get(e,n,r),has:(e,n)=>!!Yf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Fx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gu="@firebase/app",qf="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt=new Lc("@firebase/app"),Wx="@firebase/app-compat",zx="@firebase/analytics-compat",Ux="@firebase/analytics",Bx="@firebase/app-check-compat",$x="@firebase/app-check",Vx="@firebase/auth",Hx="@firebase/auth-compat",Gx="@firebase/database",Kx="@firebase/data-connect",Qx="@firebase/database-compat",Yx="@firebase/functions",qx="@firebase/functions-compat",Xx="@firebase/installations",Jx="@firebase/installations-compat",Zx="@firebase/messaging",eS="@firebase/messaging-compat",tS="@firebase/performance",nS="@firebase/performance-compat",rS="@firebase/remote-config",iS="@firebase/remote-config-compat",sS="@firebase/storage",oS="@firebase/storage-compat",lS="@firebase/firestore",aS="@firebase/vertexai-preview",uS="@firebase/firestore-compat",cS="firebase",dS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="[DEFAULT]",fS={[gu]:"fire-core",[Wx]:"fire-core-compat",[Ux]:"fire-analytics",[zx]:"fire-analytics-compat",[$x]:"fire-app-check",[Bx]:"fire-app-check-compat",[Vx]:"fire-auth",[Hx]:"fire-auth-compat",[Gx]:"fire-rtdb",[Kx]:"fire-data-connect",[Qx]:"fire-rtdb-compat",[Yx]:"fire-fn",[qx]:"fire-fn-compat",[Xx]:"fire-iid",[Jx]:"fire-iid-compat",[Zx]:"fire-fcm",[eS]:"fire-fcm-compat",[tS]:"fire-perf",[nS]:"fire-perf-compat",[rS]:"fire-rc",[iS]:"fire-rc-compat",[sS]:"fire-gcs",[oS]:"fire-gcs-compat",[lS]:"fire-fst",[uS]:"fire-fst-compat",[aS]:"fire-vertex","fire-js":"fire-js",[cS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Map,hS=new Map,yu=new Map;function Xf(t,e){try{t.container.addComponent(e)}catch(n){Kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){const e=t.name;if(yu.has(e))return Kt.debug(`There were multiple attempts to register component ${e}.`),!1;yu.set(e,t);for(const n of Ji.values())Xf(n,t);for(const n of hS.values())Xf(n,t);return!0}function ms(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gn=new dl("app","Firebase",pS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=dS;function Mc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_u,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gn.create("bad-app-name",{appName:String(i)});if(n||(n=Sg()),!n)throw gn.create("no-options");const s=Ji.get(i);if(s){if(Ao(n,s.options)&&Ao(r,s.config))return s;throw gn.create("duplicate-app",{appName:i})}const o=new Sx(i);for(const a of yu.values())o.addComponent(a);const l=new mS(n,r,o);return Ji.set(i,l),l}function jc(t=_u){const e=Ji.get(t);if(!e&&t===_u&&Sg())return Mc();if(!e)throw gn.create("no-app",{appName:t});return e}function _S(){return Array.from(Ji.values())}function bt(t,e,n){var r;let i=(r=fS[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kt.warn(l.join(" "));return}xn(new Gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="firebase-heartbeat-database",vS=1,Zi="firebase-heartbeat-store";let oa=null;function bg(){return oa||(oa=Rg(yS,vS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zi)}catch(n){console.warn(n)}}}}).catch(t=>{throw gn.create("idb-open",{originalErrorMessage:t.message})})),oa}async function wS(t){try{const n=(await bg()).transaction(Zi),r=await n.objectStore(Zi).get(Pg(t));return await n.done,r}catch(e){if(e instanceof rr)Kt.warn(e.message);else{const n=gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kt.warn(n.message)}}}async function Jf(t,e){try{const r=(await bg()).transaction(Zi,"readwrite");await r.objectStore(Zi).put(e,Pg(t)),await r.done}catch(n){if(n instanceof rr)Kt.warn(n.message);else{const r=gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kt.warn(r.message)}}}function Pg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=1024,SS=30*24*60*60*1e3;class CS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=SS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zf(),{heartbeatsToSend:r,unsentEntries:i}=ES(this._heartbeatsCache.heartbeats),s=bo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Kt.warn(n),""}}}function Zf(){return new Date().toISOString().substring(0,10)}function ES(t,e=xS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eg()?Ng().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eh(t){return bo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){xn(new Gt("platform-logger",e=>new jx(e),"PRIVATE")),xn(new Gt("heartbeat",e=>new CS(e),"PRIVATE")),bt(gu,qf,t),bt(gu,qf,"esm2017"),bt("fire-js","")}kS("");var TS="firebase",IS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bt(TS,IS,"app");var th={};const nh="@firebase/database",rh="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag="";function RS(t){Ag=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),we(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Xi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ct(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bS(e)}}catch{}return new PS},Wn=Dg("localStorage"),AS=Dg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Lc("@firebase/database"),Lg=function(){let t=1;return function(){return t++}}(),Og=function(t){const e=px(t),n=new hx;n.update(e);const r=n.digest();return Dc.encodeByteArray(r)},gs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=gs.apply(null,r):typeof r=="object"?e+=we(r):e+=r,e+=" "}return e};let ki=null,ih=!0;const DS=function(t,e){E(!0,"Can't turn on custom loggers persistently."),Pr.logLevel=X.VERBOSE,ki=Pr.log.bind(Pr)},Te=function(...t){if(ih===!0&&(ih=!1,ki===null&&AS.get("logging_enabled")===!0&&DS()),ki){const e=gs.apply(null,t);ki(e)}},_s=function(t){return function(...e){Te(t,...e)}},vu=function(...t){const e="FIREBASE INTERNAL ERROR: "+gs(...t);Pr.error(e)},Qt=function(...t){const e=`FIREBASE FATAL ERROR: ${gs(...t)}`;throw Pr.error(e),new Error(e)},ze=function(...t){const e="FIREBASE WARNING: "+gs(...t);Pr.warn(e)},LS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ze("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},OS=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},zr="[MIN_NAME]",qn="[MAX_NAME]",ir=function(t,e){if(t===e)return 0;if(t===zr||e===qn)return-1;if(e===zr||t===qn)return 1;{const n=sh(t),r=sh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},MS=function(t,e){return t===e?0:t<e?-1:1},ui=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+we(e))},Wc=function(t){if(typeof t!="object"||t===null)return we(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=we(e[r]),n+=":",n+=Wc(t[e[r]]);return n+="}",n},Mg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function be(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const jg=function(t){E(!Fc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const d=u.join("");let c="";for(a=0;a<64;a+=8){let f=parseInt(d.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),c=c+f}return c.toLowerCase()},jS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},FS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function WS(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const zS=new RegExp("^-?(0*)\\d{1,10}$"),US=-2147483648,BS=2147483647,sh=function(t){if(zS.test(t)){const e=Number(t);if(e>=US&&e<=BS)return e}return null},Jr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ze("Exception was thrown by user callback.",n),e},Math.floor(0))}},$S=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ti=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ze(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Te("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ze(e)}}class io{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}io.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="5",Fg="v",Wg="s",zg="r",Ug="f",Bg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$g="ls",Vg="p",wu="ac",Hg="websocket",Gg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function GS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Qg(t,e,n){E(typeof e=="string","typeof type must == string"),E(typeof n=="object","typeof params must == object");let r;if(e===Hg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Gg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);GS(t)&&(n.ns=t.namespace);const i=[];return be(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.counters_={}}incrementCounter(e,n=1){Ct(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return K0(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la={},aa={};function Uc(t){const e=t.toString();return la[e]||(la[e]=new KS),la[e]}function QS(t,e){const n=t.toString();return aa[n]||(aa[n]=e()),aa[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Jr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="start",qS="close",XS="pLPCommand",JS="pRTLPCB",Yg="id",qg="pw",Xg="ser",ZS="cb",eC="seg",tC="ts",nC="d",rC="dframe",Jg=1870,Zg=30,iC=Jg-Zg,sC=25e3,oC=3e4;class Er{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_s(e),this.stats_=Uc(n),this.urlFn=a=>(this.appCheckToken&&(a[wu]=this.appCheckToken),Qg(n,Gg,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new YS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(oC)),OS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bc((...s)=>{const[o,l,a,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===oh)this.id=l,this.password=a;else if(o===qS)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[oh]="t",r[Xg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[ZS]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Fg]=zc,this.transportSessionId&&(r[Wg]=this.transportSessionId),this.lastSessionId&&(r[$g]=this.lastSessionId),this.applicationId&&(r[Vg]=this.applicationId),this.appCheckToken&&(r[wu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Bg.test(location.hostname)&&(r[zg]=Ug);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Er.forceAllow_=!0}static forceDisallow(){Er.forceDisallow_=!0}static isAvailable(){return Er.forceAllow_?!0:!Er.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jS()&&!FS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=we(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=vg(n),i=Mg(r,iC);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[rC]="t",r[Yg]=e,r[qg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=we(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Bc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Lg(),window[XS+this.uniqueCallbackIdentifier]=e,window[JS+this.uniqueCallbackIdentifier]=n,this.myIFrame=Bc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Te("frame writing exception"),l.stack&&Te(l.stack),Te(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Te("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Yg]=this.myID,e[qg]=this.myPW,e[Xg]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Zg+r.length<=Jg;){const o=this.pendingSegs.shift();r=r+"&"+eC+i+"="+o.seg+"&"+tC+i+"="+o.ts+"&"+nC+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(sC)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Te("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=16384,aC=45e3;let Do=null;typeof MozWebSocket<"u"?Do=MozWebSocket:typeof WebSocket<"u"&&(Do=WebSocket);class _t{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_s(this.connId),this.stats_=Uc(n),this.connURL=_t.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Fg]=zc,typeof location<"u"&&location.hostname&&Bg.test(location.hostname)&&(o[zg]=Ug),n&&(o[Wg]=n),r&&(o[$g]=r),i&&(o[wu]=i),s&&(o[Vg]=s),Qg(e,Hg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wn.set("previous_websocket_failure",!0);try{let r;sx(),this.mySock=new Do(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){_t.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Do!==null&&!_t.forceDisallow_}static previouslyFailed(){return Wn.isInMemoryStorage||Wn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Xi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=we(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Mg(n,lC);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_t.responsesRequiredToBeHealthy=2;_t.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Er,_t]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=_t&&_t.isAvailable();let r=n&&!_t.previouslyFailed();if(e.webSocketOnly&&(n||ze("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[_t];else{const i=this.transports_=[];for(const s of es.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);es.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}es.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=6e4,cC=5e3,dC=10*1024,fC=100*1024,ua="t",lh="d",hC="s",ah="r",pC="e",uh="o",ch="a",dh="n",fh="p",mC="h";class gC{constructor(e,n,r,i,s,o,l,a,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_s("c:"+this.id+":"),this.transportManager_=new es(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ti(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ua in e){const n=e[ua];n===ch?this.upgradeIfSecondaryHealthy_():n===ah?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===uh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ui("t",e),r=ui("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ch,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ui("t",e),r=ui("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ui(ua,e);if(lh in e){const r=e[lh];if(n===mC){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===dh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===hC?this.onConnectionShutdown_(r):n===ah?this.onReset_(r):n===pC?vu("Server Error: "+r):n===uh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),zc!==r&&ze("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ti(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ti(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){E(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends t_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Cg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Lo}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=32,ph=768;class Q{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function V(){return new Q("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Sn(t){return t.pieces_.length-t.pieceNum_}function J(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Q(t.pieces_,e)}function $c(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _C(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ts(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function n_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Q(e,0)}function de(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function Fe(t,e){const n=M(t),r=M(e);if(n===null)return e;if(n===r)return Fe(J(t),J(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yC(t,e){const n=ts(t,0),r=ts(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=ir(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Vc(t,e){if(Sn(t)!==Sn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function at(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Sn(t)>Sn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class vC{constructor(e,n){this.errorPrefix_=n,this.parts_=ts(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=hl(this.parts_[r]);r_(this)}}function wC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=hl(e),r_(t)}function xC(t){const e=t.parts_.pop();t.byteLength_-=hl(e),t.parts_.length>0&&(t.byteLength_-=1)}function r_(t){if(t.byteLength_>ph)throw new Error(t.errorPrefix_+"has a key path longer than "+ph+" bytes ("+t.byteLength_+").");if(t.parts_.length>hh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hh+") or object contains a cycle "+On(t))}function On(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends t_{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Hc}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=1e3,SC=60*5*1e3,mh=30*1e3,CC=1.3,EC=3e4,NC="server_kill",gh=3;class Ut extends e_{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Ut.nextPersistentConnectionId_++,this.log_=_s("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ci,this.maxReconnectDelay_=SC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Lo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(we(s)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Xr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Ut.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ct(e,"w")){const r=Yn(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ze(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=cx(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+we(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):vu("Unrecognized action received from server: "+we(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>EC&&(this.reconnectDelay_=ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ut.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(c){E(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(c)};this.realtime_={close:a,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Te("getToken() completed but was canceled"):(Te("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=f&&f.token,l=new gC(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{ze(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(NC)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&ze(c),a())}}}interrupt(e){Te("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Te("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Vf(this.interruptReasons_)&&(this.reconnectDelay_=ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Wc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Q(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Te("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gh&&(this.reconnectDelay_=mh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Te("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ag.replace(/\./g,"-")]=1,Cg()?e["framework.cordova"]=1:ix()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Lo.getInstance().currentlyOnline();return Vf(this.interruptReasons_)&&e}}Ut.nextPersistentConnectionId_=0;Ut.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new j(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new j(zr,e),i=new j(zr,n);return this.compare(r,i)!==0}minPost(){return j.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs;class i_ extends pl{static get __EMPTY_NODE(){return Bs}static set __EMPTY_NODE(e){Bs=e}compare(e,n){return ir(e.name,n.name)}isDefinedOn(e){throw qr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return j.MIN}maxPost(){return new j(qn,Bs)}makePost(e,n){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new j(e,Bs)}toString(){return".key"}}const Ar=new i_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ee{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ee.RED,this.left=i??He.EMPTY_NODE,this.right=s??He.EMPTY_NODE}copy(e,n,r,i,s){return new Ee(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return He.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return He.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ee.RED=!0;Ee.BLACK=!1;class kC{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ee(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class He{constructor(e,n=He.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new He(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ee.BLACK,null,null))}remove(e){return new He(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ee.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $s(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $s(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $s(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $s(this.root_,null,this.comparator_,!0,e)}}He.EMPTY_NODE=new kC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){return ir(t.name,e.name)}function Gc(t,e){return ir(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;function IC(t){xu=t}const s_=function(t){return typeof t=="number"?"number:"+jg(t):"string:"+t},o_=function(t){if(t.isLeafNode()){const e=t.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ct(e,".sv"),"Priority must be a string or number.")}else E(t===xu||t.isEmpty(),"priority of unexpected type.");E(t===xu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h;class Se{constructor(e,n=Se.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),o_(this.priorityNode_)}static set __childrenNodeConstructor(e){_h=e}static get __childrenNodeConstructor(){return _h}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Se(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Se.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return F(e)?this:M(e)===".priority"?this.priorityNode_:Se.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Se.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=M(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(E(r!==".priority"||Sn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Se.__childrenNodeConstructor.EMPTY_NODE.updateChild(J(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+s_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=jg(this.value_):e+=this.value_,this.lazyHash_=Og(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Se.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Se.__childrenNodeConstructor?-1:(E(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Se.VALUE_TYPE_ORDER.indexOf(n),s=Se.VALUE_TYPE_ORDER.indexOf(r);return E(i>=0,"Unknown leaf type: "+n),E(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Se.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_,a_;function RC(t){l_=t}function bC(t){a_=t}class PC extends pl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ir(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return j.MIN}maxPost(){return new j(qn,new Se("[PRIORITY-POST]",a_))}makePost(e,n){const r=l_(e);return new j(n,new Se("[PRIORITY-POST]",r))}toString(){return".priority"}}const le=new PC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=Math.log(2);class DC{constructor(e){const n=s=>parseInt(Math.log(s)/AC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Oo=function(t,e,n,r){t.sort(e);const i=function(a,u){const d=u-a;let c,f;if(d===0)return null;if(d===1)return c=t[a],f=n?n(c):c,new Ee(f,c.node,Ee.BLACK,null,null);{const g=parseInt(d/2,10)+a,y=i(a,g),v=i(g+1,u);return c=t[g],f=n?n(c):c,new Ee(f,c.node,Ee.BLACK,y,v)}},s=function(a){let u=null,d=null,c=t.length;const f=function(y,v){const w=c-y,m=c;c-=y;const p=i(w+1,m),_=t[w],x=n?n(_):_;g(new Ee(x,_.node,v,null,p))},g=function(y){u?(u.left=y,u=y):(d=y,u=y)};for(let y=0;y<a.count;++y){const v=a.nextBitIsOne(),w=Math.pow(2,a.count-(y+1));v?f(w,Ee.BLACK):(f(w,Ee.BLACK),f(w,Ee.RED))}return d},o=new DC(t.length),l=s(o);return new He(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca;const dr={};class Wt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return E(dr&&le,"ChildrenNode.ts has not been loaded"),ca=ca||new Wt({".priority":dr},{".priority":le}),ca}get(e){const n=Yn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof He?n:null}hasIndex(e){return Ct(this.indexSet_,e.toString())}addIndex(e,n){E(e!==Ar,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(j.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Oo(r,e.getCompare()):l=dr;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const d=Object.assign({},this.indexes_);return d[a]=l,new Wt(d,u)}addToIndexes(e,n){const r=Po(this.indexes_,(i,s)=>{const o=Yn(this.indexSet_,s);if(E(o,"Missing index implementation for "+s),i===dr)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(j.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Oo(l,o.getCompare())}else return dr;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new j(e.name,l))),a.insert(e,e.node)}});return new Wt(r,this.indexSet_)}removeFromIndexes(e,n){const r=Po(this.indexes_,i=>{if(i===dr)return i;{const s=n.get(e.name);return s?i.remove(new j(e.name,s)):i}});return new Wt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di;class P{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&o_(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return di||(di=new P(new He(Gc),null,Wt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||di}updatePriority(e){return this.children_.isEmpty()?this:new P(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?di:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(J(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(E(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new j(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?di:this.priorityNode_;return new P(i,o,s)}}updateChild(e,n){const r=M(e);if(r===null)return n;{E(M(e)!==".priority"||Sn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(J(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(le,(o,l)=>{n[o]=l.val(e),r++,s&&P.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+s_(this.getPriority().val())+":"),this.forEachChild(le,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Og(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new j(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new j(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new j(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,j.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,j.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ys?-1:0}withIndex(e){if(e===Ar||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new P(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ar||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(le),i=n.getIterator(le);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ar?null:this.indexMap_.get(e.toString())}}P.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class LC extends P{constructor(){super(new He(Gc),P.EMPTY_NODE,Wt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return P.EMPTY_NODE}isEmpty(){return!1}}const ys=new LC;Object.defineProperties(j,{MIN:{value:new j(zr,P.EMPTY_NODE)},MAX:{value:new j(qn,ys)}});i_.__EMPTY_NODE=P.EMPTY_NODE;Se.__childrenNodeConstructor=P;IC(ys);bC(ys);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=!0;function me(t,e=null){if(t===null)return P.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Se(n,me(e))}if(!(t instanceof Array)&&OC){const n=[];let r=!1;if(be(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=me(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new j(o,a)))}}),n.length===0)return P.EMPTY_NODE;const s=Oo(n,TC,o=>o.name,Gc);if(r){const o=Oo(n,le.getCompare());return new P(s,me(e),new Wt({".priority":o},{".priority":le}))}else return new P(s,me(e),Wt.Default)}else{let n=P.EMPTY_NODE;return be(t,(r,i)=>{if(Ct(t,r)&&r.substring(0,1)!=="."){const s=me(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(me(e))}}RC(me);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC extends pl{constructor(e){super(),this.indexPath_=e,E(!F(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ir(e.name,n.name):s}makePost(e,n){const r=me(e),i=P.EMPTY_NODE.updateChild(this.indexPath_,r);return new j(n,i)}maxPost(){const e=P.EMPTY_NODE.updateChild(this.indexPath_,ys);return new j(qn,e)}toString(){return ts(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC extends pl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ir(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return j.MIN}maxPost(){return j.MAX}makePost(e,n){const r=me(e);return new j(n,r)}toString(){return".value"}}const FC=new jC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){return{type:"value",snapshotNode:t}}function Ur(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ns(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function rs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function WC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ns(n,l)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Ur(n,r)):o.trackChildChange(rs(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(le,(i,s)=>{n.hasChild(i)||r.trackChildChange(ns(i,s))}),n.isLeafNode()||n.forEachChild(le,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(rs(i,s,o))}else r.trackChildChange(Ur(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?P.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.indexedFilter_=new Kc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=is.getStartPost_(e),this.endPost_=is.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new j(n,r))||(r=P.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=P.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(P.EMPTY_NODE);const s=this;return n.forEachChild(le,(o,l)=>{s.matches(new j(o,l))||(i=i.updateImmediateChild(o,P.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new is(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new j(n,r))||(r=P.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=P.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=P.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(P.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,P.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(f,g)=>c(g,f)}else o=this.index_.getCompare();const l=e;E(l.numChildren()===this.limit_,"");const a=new j(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(a);if(l.hasChild(n)){const c=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const g=f==null?1:o(f,a);if(d&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(rs(n,r,c)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ns(n,c));const v=l.updateImmediateChild(n,P.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Ur(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:d&&o(u,a)>=0?(s!=null&&(s.trackChildChange(ns(u.name,u.node)),s.trackChildChange(Ur(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,P.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zr}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===le}copy(){const e=new Qc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function UC(t){return t.loadsAllData()?new Kc(t.getIndex()):t.hasLimit()?new zC(t):new is(t)}function yh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===le?n="$priority":t.index_===FC?n="$value":t.index_===Ar?n="$key":(E(t.index_ instanceof MC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=we(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=we(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+we(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=we(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+we(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==le&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends e_{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=_s("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Mo.getListenId_(e,r),l={};this.listens_[o]=l;const a=yh(e._queryParams);this.restRequest_(s+".json",a,(u,d)=>{let c=d;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),Yn(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=Mo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=yh(e._queryParams),r=e._path.toString(),i=new Xr;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fx(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Xi(l.responseText)}catch{ze("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&ze("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.rootNode_=P.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return{value:null,children:new Map}}function c_(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=M(e);t.children.has(r)||t.children.set(r,jo());const i=t.children.get(r);e=J(e),c_(i,e,n)}}function Su(t,e,n){t.value!==null?n(e,t.value):$C(t,(r,i)=>{const s=new Q(e.toString()+"/"+r);Su(i,s,n)})}function $C(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&be(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=10*1e3,HC=30*1e3,GC=5*60*1e3;class KC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new VC(e);const r=wh+(HC-wh)*Math.random();Ti(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;be(e,(i,s)=>{s>0&&Ct(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ti(this.reportStats_.bind(this),Math.floor(Math.random()*2*GC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(yt||(yt={}));function Yc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Xc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=yt.ACK_USER_WRITE,this.source=Yc()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Q(e));return new Fo(V(),n,this.revert)}}else return E(M(this.path)===e,"operationForChild called for unrelated child."),new Fo(J(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this.source=e,this.path=n,this.type=yt.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new ss(this.source,V()):new ss(this.source,J(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=yt.OVERWRITE}operationForChild(e){return F(this.path)?new Xn(this.source,V(),this.snap.getImmediateChild(e)):new Xn(this.source,J(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=yt.MERGE}operationForChild(e){if(F(this.path)){const n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new Xn(this.source,V(),n.value):new Br(this.source,V(),n)}else return E(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Br(this.source,J(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function YC(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(WC(o.childName,o.snapshotNode))}),fi(t,i,"child_removed",e,r,n),fi(t,i,"child_added",e,r,n),fi(t,i,"child_moved",s,r,n),fi(t,i,"child_changed",e,r,n),fi(t,i,"value",e,r,n),i}function fi(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>XC(t,l,a)),o.forEach(l=>{const a=qC(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function qC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function XC(t,e,n){if(e.childName==null||n.childName==null)throw qr("Should only compare child_ events.");const r=new j(e.childName,e.snapshotNode),i=new j(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e){return{eventCache:t,serverCache:e}}function Ii(t,e,n,r){return ml(new Cn(e,n,r),t.serverCache)}function d_(t,e,n,r){return ml(t.eventCache,new Cn(e,n,r))}function Wo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Jn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da;const JC=()=>(da||(da=new He(MS)),da);class q{constructor(e,n=JC()){this.value=e,this.children=n}static fromObject(e){let n=new q(null);return be(e,(r,i)=>{n=n.set(new Q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:V(),value:this.value};if(F(e))return null;{const r=M(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(J(e),n);return s!=null?{path:de(new Q(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const n=M(e),r=this.children.get(n);return r!==null?r.subtree(J(e)):new q(null)}}set(e,n){if(F(e))return new q(n,this.children);{const r=M(e),s=(this.children.get(r)||new q(null)).set(J(e),n),o=this.children.insert(r,s);return new q(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new q(null):new q(null,this.children);{const n=M(e),r=this.children.get(n);if(r){const i=r.remove(J(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new q(null):new q(this.value,s)}else return this}}get(e){if(F(e))return this.value;{const n=M(e),r=this.children.get(n);return r?r.get(J(e)):null}}setTree(e,n){if(F(e))return n;{const r=M(e),s=(this.children.get(r)||new q(null)).setTree(J(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new q(this.value,o)}}fold(e){return this.fold_(V(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(de(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,V(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(F(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(J(e),de(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,V(),n)}foreachOnPath_(e,n,r){if(F(e))return this;{this.value&&r(n,this.value);const i=M(e),s=this.children.get(i);return s?s.foreachOnPath_(J(e),de(n,i),r):new q(null)}}foreach(e){this.foreach_(V(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(de(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.writeTree_=e}static empty(){return new xt(new q(null))}}function Ri(t,e,n){if(F(e))return new xt(new q(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Fe(i,e);return s=s.updateChild(o,n),new xt(t.writeTree_.set(i,s))}else{const i=new q(n),s=t.writeTree_.setTree(e,i);return new xt(s)}}}function Cu(t,e,n){let r=t;return be(n,(i,s)=>{r=Ri(r,de(e,i),s)}),r}function xh(t,e){if(F(e))return xt.empty();{const n=t.writeTree_.setTree(e,new q(null));return new xt(n)}}function Eu(t,e){return sr(t,e)!=null}function sr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Fe(n.path,e)):null}function Sh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(le,(r,i)=>{e.push(new j(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new j(r,i.value))}),e}function _n(t,e){if(F(e))return t;{const n=sr(t,e);return n!=null?new xt(new q(n)):new xt(t.writeTree_.subtree(e))}}function Nu(t){return t.writeTree_.isEmpty()}function $r(t,e){return f_(V(),t.writeTree_,e)}function f_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(E(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=f_(de(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(de(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t,e){return g_(e,t)}function ZC(t,e,n,r,i){E(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ri(t.visibleWrites,e,n)),t.lastWriteId=r}function eE(t,e,n,r){E(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Cu(t.visibleWrites,e,n),t.lastWriteId=r}function tE(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function nE(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);E(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&rE(l,r.path)?i=!1:at(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return iE(t),!0;if(r.snap)t.visibleWrites=xh(t.visibleWrites,r.path);else{const l=r.children;be(l,a=>{t.visibleWrites=xh(t.visibleWrites,de(r.path,a))})}return!0}else return!1}function rE(t,e){if(t.snap)return at(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&at(de(t.path,n),e))return!0;return!1}function iE(t){t.visibleWrites=h_(t.allWrites,sE,V()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function sE(t){return t.visible}function h_(t,e,n){let r=xt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)at(n,o)?(l=Fe(n,o),r=Ri(r,l,s.snap)):at(o,n)&&(l=Fe(o,n),r=Ri(r,V(),s.snap.getChild(l)));else if(s.children){if(at(n,o))l=Fe(n,o),r=Cu(r,l,s.children);else if(at(o,n))if(l=Fe(o,n),F(l))r=Cu(r,V(),s.children);else{const a=Yn(s.children,M(l));if(a){const u=a.getChild(J(l));r=Ri(r,V(),u)}}}else throw qr("WriteRecord should have .snap or .children")}}return r}function p_(t,e,n,r,i){if(!r&&!i){const s=sr(t.visibleWrites,e);if(s!=null)return s;{const o=_n(t.visibleWrites,e);if(Nu(o))return n;if(n==null&&!Eu(o,V()))return null;{const l=n||P.EMPTY_NODE;return $r(o,l)}}}else{const s=_n(t.visibleWrites,e);if(!i&&Nu(s))return n;if(!i&&n==null&&!Eu(s,V()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(at(u.path,e)||at(e,u.path))},l=h_(t.allWrites,o,e),a=n||P.EMPTY_NODE;return $r(l,a)}}}function oE(t,e,n){let r=P.EMPTY_NODE;const i=sr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(le,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=_n(t.visibleWrites,e);return n.forEachChild(le,(o,l)=>{const a=$r(_n(s,new Q(o)),l);r=r.updateImmediateChild(o,a)}),Sh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=_n(t.visibleWrites,e);return Sh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function lE(t,e,n,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=de(e,n);if(Eu(t.visibleWrites,s))return null;{const o=_n(t.visibleWrites,s);return Nu(o)?i.getChild(n):$r(o,i.getChild(n))}}function aE(t,e,n,r){const i=de(e,n),s=sr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=_n(t.visibleWrites,i);return $r(o,r.getNode().getImmediateChild(n))}else return null}function uE(t,e){return sr(t.visibleWrites,e)}function cE(t,e,n,r,i,s,o){let l;const a=_n(t.visibleWrites,e),u=sr(a,V());if(u!=null)l=u;else if(n!=null)l=$r(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],c=o.getCompare(),f=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let g=f.getNext();for(;g&&d.length<i;)c(g,r)!==0&&d.push(g),g=f.getNext();return d}else return[]}function dE(){return{visibleWrites:xt.empty(),allWrites:[],lastWriteId:-1}}function zo(t,e,n,r){return p_(t.writeTree,t.treePath,e,n,r)}function Jc(t,e){return oE(t.writeTree,t.treePath,e)}function Ch(t,e,n,r){return lE(t.writeTree,t.treePath,e,n,r)}function Uo(t,e){return uE(t.writeTree,de(t.treePath,e))}function fE(t,e,n,r,i,s){return cE(t.writeTree,t.treePath,e,n,r,i,s)}function Zc(t,e,n){return aE(t.writeTree,t.treePath,e,n)}function m_(t,e){return g_(de(t.treePath,e),t.writeTree)}function g_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;E(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,rs(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ns(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ur(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,rs(r,e.snapshotNode,i.oldSnap));else throw qr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const __=new pE;class ed{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Cn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jn(this.viewCache_),s=fE(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(t){return{filter:t}}function gE(t,e){E(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function _E(t,e,n,r,i){const s=new hE;let o,l;if(n.type===yt.OVERWRITE){const u=n;u.source.fromUser?o=ku(t,e,u.path,u.snap,r,i,s):(E(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!F(u.path),o=Bo(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===yt.MERGE){const u=n;u.source.fromUser?o=vE(t,e,u.path,u.children,r,i,s):(E(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=Tu(t,e,u.path,u.children,r,i,l,s))}else if(n.type===yt.ACK_USER_WRITE){const u=n;u.revert?o=SE(t,e,u.path,r,i,s):o=wE(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===yt.LISTEN_COMPLETE)o=xE(t,e,n.path,r,s);else throw qr("Unknown operation type: "+n.type);const a=s.getChanges();return yE(e,o,a),{viewCache:o,changes:a}}function yE(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Wo(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(u_(Wo(e)))}}function y_(t,e,n,r,i,s){const o=e.eventCache;if(Uo(r,n)!=null)return e;{let l,a;if(F(n))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Jn(e),d=u instanceof P?u:P.EMPTY_NODE,c=Jc(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=zo(r,Jn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=M(n);if(u===".priority"){E(Sn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();a=e.serverCache.getNode();const c=Ch(r,n,d,a);c!=null?l=t.filter.updatePriority(d,c):l=o.getNode()}else{const d=J(n);let c;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=Ch(r,n,o.getNode(),a);f!=null?c=o.getNode().getImmediateChild(u).updateChild(d,f):c=o.getNode().getImmediateChild(u)}else c=Zc(r,u,e.serverCache);c!=null?l=t.filter.updateChild(o.getNode(),u,c,d,i,s):l=o.getNode()}}return Ii(e,l,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function Bo(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(F(n))u=d.updateFullNode(a.getNode(),r,null);else if(d.filtersNodes()&&!a.isFiltered()){const g=a.getNode().updateChild(n,r);u=d.updateFullNode(a.getNode(),g,null)}else{const g=M(n);if(!a.isCompleteForPath(n)&&Sn(n)>1)return e;const y=J(n),w=a.getNode().getImmediateChild(g).updateChild(y,r);g===".priority"?u=d.updatePriority(a.getNode(),w):u=d.updateChild(a.getNode(),g,w,y,__,null)}const c=d_(e,u,a.isFullyInitialized()||F(n),d.filtersNodes()),f=new ed(i,c,s);return y_(t,c,n,i,f,l)}function ku(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const d=new ed(i,e,s);if(F(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Ii(e,u,!0,t.filter.filtersNodes());else{const c=M(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ii(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=J(n),g=l.getNode().getImmediateChild(c);let y;if(F(f))y=r;else{const v=d.getCompleteChild(c);v!=null?$c(f)===".priority"&&v.getChild(n_(f)).isEmpty()?y=v:y=v.updateChild(f,r):y=P.EMPTY_NODE}if(g.equals(y))a=e;else{const v=t.filter.updateChild(l.getNode(),c,y,f,d,o);a=Ii(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Eh(t,e){return t.eventCache.isCompleteForChild(e)}function vE(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const d=de(n,a);Eh(e,M(d))&&(l=ku(t,l,d,u,i,s,o))}),r.foreach((a,u)=>{const d=de(n,a);Eh(e,M(d))||(l=ku(t,l,d,u,i,s,o))}),l}function Nh(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Tu(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;F(n)?u=r:u=new q(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((c,f)=>{if(d.hasChild(c)){const g=e.serverCache.getNode().getImmediateChild(c),y=Nh(t,g,f);a=Bo(t,a,new Q(c),y,i,s,o,l)}}),u.children.inorderTraversal((c,f)=>{const g=!e.serverCache.isCompleteForChild(c)&&f.value===null;if(!d.hasChild(c)&&!g){const y=e.serverCache.getNode().getImmediateChild(c),v=Nh(t,y,f);a=Bo(t,a,new Q(c),v,i,s,o,l)}}),a}function wE(t,e,n,r,i,s,o){if(Uo(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(F(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Bo(t,e,n,a.getNode().getChild(n),i,s,l,o);if(F(n)){let u=new q(null);return a.getNode().forEachChild(Ar,(d,c)=>{u=u.set(new Q(d),c)}),Tu(t,e,n,u,i,s,l,o)}else return e}else{let u=new q(null);return r.foreach((d,c)=>{const f=de(n,d);a.isCompleteForPath(f)&&(u=u.set(d,a.getNode().getChild(f)))}),Tu(t,e,n,u,i,s,l,o)}}function xE(t,e,n,r,i){const s=e.serverCache,o=d_(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return y_(t,o,n,r,__,i)}function SE(t,e,n,r,i,s){let o;if(Uo(r,n)!=null)return e;{const l=new ed(r,e,i),a=e.eventCache.getNode();let u;if(F(n)||M(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=zo(r,Jn(e));else{const c=e.serverCache.getNode();E(c instanceof P,"serverChildren would be complete if leaf node"),d=Jc(r,c)}d=d,u=t.filter.updateFullNode(a,d,s)}else{const d=M(n);let c=Zc(r,d,e.serverCache);c==null&&e.serverCache.isCompleteForChild(d)&&(c=a.getImmediateChild(d)),c!=null?u=t.filter.updateChild(a,d,c,J(n),l,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(a,d,P.EMPTY_NODE,J(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zo(r,Jn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Uo(r,V())!=null,Ii(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Kc(r.getIndex()),s=UC(r);this.processor_=mE(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(P.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(P.EMPTY_NODE,l.getNode(),null),d=new Cn(a,o.isFullyInitialized(),i.filtersNodes()),c=new Cn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=ml(c,d),this.eventGenerator_=new QC(this.query_)}get query(){return this.query_}}function EE(t){return t.viewCache_.serverCache.getNode()}function NE(t){return Wo(t.viewCache_)}function kE(t,e){const n=Jn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function kh(t){return t.eventRegistrations_.length===0}function TE(t,e){t.eventRegistrations_.push(e)}function Th(t,e,n){const r=[];if(n){E(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Ih(t,e,n,r){e.type===yt.MERGE&&e.source.queryId!==null&&(E(Jn(t.viewCache_),"We should always have a full cache before handling merges"),E(Wo(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=_E(t.processor_,i,e,n,r);return gE(t.processor_,s.viewCache),E(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,v_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function IE(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(le,(s,o)=>{r.push(Ur(s,o))}),n.isFullyInitialized()&&r.push(u_(n.getNode())),v_(t,r,n.getNode(),e)}function v_(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return YC(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o;class w_{constructor(){this.views=new Map}}function RE(t){E(!$o,"__referenceConstructor has already been defined"),$o=t}function bE(){return E($o,"Reference.ts has not been loaded"),$o}function PE(t){return t.views.size===0}function td(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return E(s!=null,"SyncTree gave us an op for an invalid query."),Ih(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Ih(o,e,n,r));return s}}function x_(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=zo(n,i?r:null),a=!1;l?a=!0:r instanceof P?(l=Jc(n,r),a=!1):(l=P.EMPTY_NODE,a=!1);const u=ml(new Cn(l,a,!1),new Cn(r,i,!1));return new CE(e,u)}return o}function AE(t,e,n,r,i,s){const o=x_(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),TE(o,n),IE(o,n)}function DE(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=En(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(Th(u,n,r)),kh(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(Th(a,n,r)),kh(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!En(t)&&s.push(new(bE())(e._repo,e._path)),{removed:s,events:o}}function S_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function yn(t,e){let n=null;for(const r of t.views.values())n=n||kE(r,e);return n}function C_(t,e){if(e._queryParams.loadsAllData())return _l(t);{const r=e._queryIdentifier;return t.views.get(r)}}function E_(t,e){return C_(t,e)!=null}function En(t){return _l(t)!=null}function _l(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo;function LE(t){E(!Vo,"__referenceConstructor has already been defined"),Vo=t}function OE(){return E(Vo,"Reference.ts has not been loaded"),Vo}let ME=1;class Rh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new q(null),this.pendingWriteTree_=dE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nd(t,e,n,r,i){return ZC(t.pendingWriteTree_,e,n,r,i),i?Zr(t,new Xn(Yc(),e,n)):[]}function jE(t,e,n,r){eE(t.pendingWriteTree_,e,n,r);const i=q.fromObject(n);return Zr(t,new Br(Yc(),e,i))}function on(t,e,n=!1){const r=tE(t.pendingWriteTree_,e);if(nE(t.pendingWriteTree_,e)){let s=new q(null);return r.snap!=null?s=s.set(V(),!0):be(r.children,o=>{s=s.set(new Q(o),!0)}),Zr(t,new Fo(r.path,s,n))}else return[]}function vs(t,e,n){return Zr(t,new Xn(qc(),e,n))}function FE(t,e,n){const r=q.fromObject(n);return Zr(t,new Br(qc(),e,r))}function WE(t,e){return Zr(t,new ss(qc(),e))}function zE(t,e,n){const r=rd(t,n);if(r){const i=id(r),s=i.path,o=i.queryId,l=Fe(s,e),a=new ss(Xc(o),l);return sd(t,s,a)}else return[]}function Ho(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||E_(o,e))){const a=DE(o,e,n,r);PE(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(s,(f,g)=>En(g));if(d&&!c){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const g=$E(f);for(let y=0;y<g.length;++y){const v=g[y],w=v.query,m=I_(t,v);t.listenProvider_.startListening(bi(w),os(t,w),m.hashFn,m.onComplete)}}}!c&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(bi(e),null):u.forEach(f=>{const g=t.queryToTagMap.get(vl(f));t.listenProvider_.stopListening(bi(f),g)}))}VE(t,u)}return l}function N_(t,e,n,r){const i=rd(t,r);if(i!=null){const s=id(i),o=s.path,l=s.queryId,a=Fe(o,e),u=new Xn(Xc(l),a,n);return sd(t,o,u)}else return[]}function UE(t,e,n,r){const i=rd(t,r);if(i){const s=id(i),o=s.path,l=s.queryId,a=Fe(o,e),u=q.fromObject(n),d=new Br(Xc(l),a,u);return sd(t,o,d)}else return[]}function Iu(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,g)=>{const y=Fe(f,i);s=s||yn(g,y),o=o||En(g)});let l=t.syncPointTree_.get(i);l?(o=o||En(l),s=s||yn(l,V())):(l=new w_,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=P.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,y)=>{const v=yn(y,V());v&&(s=s.updateImmediateChild(g,v))}));const u=E_(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=vl(e);E(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const g=HE();t.queryToTagMap.set(f,g),t.tagToQueryMap.set(g,f)}const d=gl(t.pendingWriteTree_,i);let c=AE(l,e,n,d,s,a);if(!u&&!o&&!r){const f=C_(l,e);c=c.concat(GE(t,e,f))}return c}function yl(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Fe(o,e),u=yn(l,a);if(u)return u});return p_(i,e,s,n,!0)}function BE(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const c=Fe(u,n);r=r||yn(d,c)});let i=t.syncPointTree_.get(n);i?r=r||yn(i,V()):(i=new w_,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Cn(r,!0,!1):null,l=gl(t.pendingWriteTree_,e._path),a=x_(i,e,l,s?o.getNode():P.EMPTY_NODE,s);return NE(a)}function Zr(t,e){return k_(e,t.syncPointTree_,null,gl(t.pendingWriteTree_,V()))}function k_(t,e,n,r){if(F(t.path))return T_(t,e,n,r);{const i=e.get(V());n==null&&i!=null&&(n=yn(i,V()));let s=[];const o=M(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,d=m_(r,o);s=s.concat(k_(l,a,u,d))}return i&&(s=s.concat(td(i,t,r,n))),s}}function T_(t,e,n,r){const i=e.get(V());n==null&&i!=null&&(n=yn(i,V()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=m_(r,o),d=t.operationForChild(o);d&&(s=s.concat(T_(d,l,a,u)))}),i&&(s=s.concat(td(i,t,r,n))),s}function I_(t,e){const n=e.query,r=os(t,n);return{hashFn:()=>(EE(e)||P.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?zE(t,n._path,r):WE(t,n._path);{const s=WS(i,n);return Ho(t,n,null,s)}}}}function os(t,e){const n=vl(e);return t.queryToTagMap.get(n)}function vl(t){return t._path.toString()+"$"+t._queryIdentifier}function rd(t,e){return t.tagToQueryMap.get(e)}function id(t){const e=t.indexOf("$");return E(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}}function sd(t,e,n){const r=t.syncPointTree_.get(e);E(r,"Missing sync point for query tag that we're tracking");const i=gl(t.pendingWriteTree_,e);return td(r,n,i,null)}function $E(t){return t.fold((e,n,r)=>{if(n&&En(n))return[_l(n)];{let i=[];return n&&(i=S_(n)),be(r,(s,o)=>{i=i.concat(o)}),i}})}function bi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(OE())(t._repo,t._path):t}function VE(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=vl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function HE(){return ME++}function GE(t,e,n){const r=e._path,i=os(t,e),s=I_(t,n),o=t.listenProvider_.startListening(bi(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)E(!En(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,d,c)=>{if(!F(u)&&d&&En(d))return[_l(d).query];{let f=[];return d&&(f=f.concat(S_(d).map(g=>g.query))),be(c,(g,y)=>{f=f.concat(y)}),f}});for(let u=0;u<a.length;++u){const d=a[u];t.listenProvider_.stopListening(bi(d),os(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new od(n)}node(){return this.node_}}class ld{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=de(this.path_,e);return new ld(this.syncTree_,n)}node(){return yl(this.syncTree_,this.path_)}}const KE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},bh=function(t,e,n){if(!t||typeof t!="object")return t;if(E(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return QE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return YE(t[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},QE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:E(!1,"Unexpected server value: "+t)}},YE=function(t,e,n){t.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);const i=e.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},R_=function(t,e,n,r){return ud(e,new ld(n,t),r)},ad=function(t,e,n){return ud(t,new od(e),n)};function ud(t,e,n){const r=t.getPriority().val(),i=bh(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=bh(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new Se(l,me(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Se(i))),o.forEachChild(le,(l,a)=>{const u=ud(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function wl(t,e){let n=e instanceof Q?e:new Q(e),r=t,i=M(n);for(;i!==null;){const s=Yn(r.node.children,i)||{children:{},childCount:0};r=new cd(i,r,s),n=J(n),i=M(n)}return r}function or(t){return t.node.value}function dd(t,e){t.node.value=e,Ru(t)}function b_(t){return t.node.childCount>0}function qE(t){return or(t)===void 0&&!b_(t)}function xl(t,e){be(t.node.children,(n,r)=>{e(new cd(n,t,r))})}function P_(t,e,n,r){n&&e(t),xl(t,i=>{P_(i,e,!0)})}function XE(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ws(t){return new Q(t.parent===null?t.name:ws(t.parent)+"/"+t.name)}function Ru(t){t.parent!==null&&JE(t.parent,t.name,t)}function JE(t,e,n){const r=qE(n),i=Ct(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ru(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ru(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=/[\[\].#$\/\u0000-\u001F\u007F]/,e1=/[\[\].#$\u0000-\u001F\u007F]/,fa=10*1024*1024,fd=function(t){return typeof t=="string"&&t.length!==0&&!ZE.test(t)},A_=function(t){return typeof t=="string"&&t.length!==0&&!e1.test(t)},t1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),A_(t)},D_=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Fc(t)||t&&typeof t=="object"&&Ct(t,".sv")},L_=function(t,e,n,r){r&&e===void 0||xs(fl(t,"value"),e,n)},xs=function(t,e,n){const r=n instanceof Q?new vC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+On(r));if(typeof e=="function")throw new Error(t+"contains a function "+On(r)+" with contents = "+e.toString());if(Fc(e))throw new Error(t+"contains "+e.toString()+" "+On(r));if(typeof e=="string"&&e.length>fa/3&&hl(e)>fa)throw new Error(t+"contains a string greater than "+fa+" utf8 bytes "+On(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(be(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!fd(o)))throw new Error(t+" contains an invalid key ("+o+") "+On(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wC(r,o),xs(t,l,r),xC(r)}),i&&s)throw new Error(t+' contains ".value" child '+On(r)+" in addition to actual children.")}},n1=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=ts(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!fd(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(yC);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&at(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},r1=function(t,e,n,r){const i=fl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];be(e,(o,l)=>{const a=new Q(o);if(xs(i,l,de(n,a)),$c(a)===".priority"&&!D_(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),n1(i,s)},O_=function(t,e,n,r){if(!A_(n))throw new Error(fl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},i1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),O_(t,e,n)},hd=function(t,e){if(M(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},s1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!fd(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!t1(n))throw new Error(fl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sl(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Vc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function M_(t,e,n){Sl(t,n),j_(t,r=>Vc(r,e))}function tt(t,e,n){Sl(t,n),j_(t,r=>at(r,e)||at(e,r))}function j_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(l1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function l1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ki&&Te("event: "+n.toString()),Jr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="repo_interrupt",u1=25;class c1{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new o1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jo(),this.transactionQueueTree_=new cd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function d1(t,e,n){if(t.stats_=Uc(t.repoInfo_),t.forceRestClient_||$S())t.server_=new Mo(t.repoInfo_,(r,i,s,o)=>{Ph(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ah(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{we(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ut(t.repoInfo_,e,(r,i,s,o)=>{Ph(t,r,i,s,o)},r=>{Ah(t,r)},r=>{f1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=QS(t.repoInfo_,()=>new KC(t.stats_,t.server_)),t.infoData_=new BC,t.infoSyncTree_=new Rh({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=vs(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),pd(t,"connected",!1),t.serverSyncTree_=new Rh({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);tt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function F_(t){const n=t.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ss(t){return KE({timestamp:F_(t)})}function Ph(t,e,n,r,i){t.dataUpdateCount++;const s=new Q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=Po(n,u=>me(u));o=UE(t.serverSyncTree_,s,a,i)}else{const a=me(n);o=N_(t.serverSyncTree_,s,a,i)}else if(r){const a=Po(n,u=>me(u));o=FE(t.serverSyncTree_,s,a)}else{const a=me(n);o=vs(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Vr(t,s)),tt(t.eventQueue_,l,o)}function Ah(t,e){pd(t,"connected",e),e===!1&&g1(t)}function f1(t,e){be(e,(n,r)=>{pd(t,n,r)})}function pd(t,e,n){const r=new Q("/.info/"+e),i=me(n);t.infoData_.updateSnapshot(r,i);const s=vs(t.infoSyncTree_,r,i);tt(t.eventQueue_,r,s)}function Cl(t){return t.nextWriteId_++}function h1(t,e,n){const r=BE(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=me(i).withIndex(e._queryParams.getIndex());Iu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=vs(t.serverSyncTree_,e._path,s);else{const l=os(t.serverSyncTree_,e);o=N_(t.serverSyncTree_,e._path,s,l)}return tt(t.eventQueue_,e._path,o),Ho(t.serverSyncTree_,e,n,null,!0),s},i=>(ei(t,"get for query "+we(e)+" failed: "+i),Promise.reject(new Error(i))))}function p1(t,e,n,r,i){ei(t,"set",{path:e.toString(),value:n,priority:r});const s=Ss(t),o=me(n,r),l=yl(t.serverSyncTree_,e),a=ad(o,l,s),u=Cl(t),d=nd(t.serverSyncTree_,e,a,u,!0);Sl(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,g)=>{const y=f==="ok";y||ze("set at "+e+" failed: "+f);const v=on(t.serverSyncTree_,u,!y);tt(t.eventQueue_,e,v),bu(t,i,f,g)});const c=gd(t,e);Vr(t,c),tt(t.eventQueue_,c,[])}function m1(t,e,n,r){ei(t,"update",{path:e.toString(),value:n});let i=!0;const s=Ss(t),o={};if(be(n,(l,a)=>{i=!1,o[l]=R_(de(e,l),me(a),t.serverSyncTree_,s)}),i)Te("update() called with empty data.  Don't do anything."),bu(t,r,"ok",void 0);else{const l=Cl(t),a=jE(t.serverSyncTree_,e,o,l);Sl(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,d)=>{const c=u==="ok";c||ze("update at "+e+" failed: "+u);const f=on(t.serverSyncTree_,l,!c),g=f.length>0?Vr(t,e):e;tt(t.eventQueue_,g,f),bu(t,r,u,d)}),be(n,u=>{const d=gd(t,de(e,u));Vr(t,d)}),tt(t.eventQueue_,e,[])}}function g1(t){ei(t,"onDisconnectEvents");const e=Ss(t),n=jo();Su(t.onDisconnect_,V(),(i,s)=>{const o=R_(i,s,t.serverSyncTree_,e);c_(n,i,o)});let r=[];Su(n,V(),(i,s)=>{r=r.concat(vs(t.serverSyncTree_,i,s));const o=gd(t,i);Vr(t,o)}),t.onDisconnect_=jo(),tt(t.eventQueue_,V(),r)}function _1(t,e,n){let r;M(e._path)===".info"?r=Iu(t.infoSyncTree_,e,n):r=Iu(t.serverSyncTree_,e,n),M_(t.eventQueue_,e._path,r)}function W_(t,e,n){let r;M(e._path)===".info"?r=Ho(t.infoSyncTree_,e,n):r=Ho(t.serverSyncTree_,e,n),M_(t.eventQueue_,e._path,r)}function y1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(a1)}function ei(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Te(n,...e)}function bu(t,e,n,r){e&&Jr(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function v1(t,e,n,r,i,s){ei(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:Lg(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=md(t,e,void 0);o.currentInputSnapshot=l;const a=o.update(l.val());if(a===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{xs("transaction failed: Data returned ",a,o.path),o.status=0;const u=wl(t.transactionQueueTree_,e),d=or(u)||[];d.push(o),dd(u,d);let c;typeof a=="object"&&a!==null&&Ct(a,".priority")?(c=Yn(a,".priority"),E(D_(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(yl(t.serverSyncTree_,e)||P.EMPTY_NODE).getPriority().val();const f=Ss(t),g=me(a,c),y=ad(g,l,f);o.currentOutputSnapshotRaw=g,o.currentOutputSnapshotResolved=y,o.currentWriteId=Cl(t);const v=nd(t.serverSyncTree_,e,y,o.currentWriteId,o.applyLocally);tt(t.eventQueue_,e,v),El(t,t.transactionQueueTree_)}}function md(t,e,n){return yl(t.serverSyncTree_,e,n)||P.EMPTY_NODE}function El(t,e=t.transactionQueueTree_){if(e||Nl(t,e),or(e)){const n=U_(t,e);E(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&w1(t,ws(e),n)}else b_(e)&&xl(e,n=>{El(t,n)})}function w1(t,e,n){const r=n.map(u=>u.currentWriteId),i=md(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const d=n[u];E(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const c=Fe(e,d.path);s=s.updateChild(c,d.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{ei(t,"transaction put response",{path:a.toString(),status:u});let d=[];if(u==="ok"){const c=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(on(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&c.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Nl(t,wl(t.transactionQueueTree_,e)),El(t,t.transactionQueueTree_),tt(t.eventQueue_,e,d);for(let f=0;f<c.length;f++)Jr(c[f])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{ze("transaction at "+a.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}Vr(t,e)}},o)}function Vr(t,e){const n=z_(t,e),r=ws(n),i=U_(t,n);return x1(t,i,r),r}function x1(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Fe(n,a.path);let d=!1,c;if(E(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)d=!0,c=a.abortReason,i=i.concat(on(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=u1)d=!0,c="maxretry",i=i.concat(on(t.serverSyncTree_,a.currentWriteId,!0));else{const f=md(t,a.path,o);a.currentInputSnapshot=f;const g=e[l].update(f.val());if(g!==void 0){xs("transaction failed: Data returned ",g,a.path);let y=me(g);typeof g=="object"&&g!=null&&Ct(g,".priority")||(y=y.updatePriority(f.getPriority()));const w=a.currentWriteId,m=Ss(t),p=ad(y,f,m);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=p,a.currentWriteId=Cl(t),o.splice(o.indexOf(w),1),i=i.concat(nd(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),i=i.concat(on(t.serverSyncTree_,w,!0))}else d=!0,c="nodata",i=i.concat(on(t.serverSyncTree_,a.currentWriteId,!0))}tt(t.eventQueue_,n,i),i=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(c==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(c),!1,null))))}Nl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Jr(r[l]);El(t,t.transactionQueueTree_)}function z_(t,e){let n,r=t.transactionQueueTree_;for(n=M(e);n!==null&&or(r)===void 0;)r=wl(r,n),e=J(e),n=M(e);return r}function U_(t,e){const n=[];return B_(t,e,n),n.sort((r,i)=>r.order-i.order),n}function B_(t,e,n){const r=or(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xl(e,i=>{B_(t,i,n)})}function Nl(t,e){const n=or(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,dd(e,n.length>0?n:void 0)}xl(e,r=>{Nl(t,r)})}function gd(t,e){const n=ws(z_(t,e)),r=wl(t.transactionQueueTree_,e);return XE(r,i=>{ha(t,i)}),ha(t,r),P_(r,i=>{ha(t,i)}),n}function ha(t,e){const n=or(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(E(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(E(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(on(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?dd(e,void 0):n.length=s+1,tt(t.eventQueue_,ws(e),i);for(let o=0;o<r.length;o++)Jr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function C1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ze(`Invalid query segment '${n}' in query '${t}'`)}return e}const Dh=function(t,e){const n=E1(t),r=n.namespace;n.domain==="firebase.com"&&Qt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||LS();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Kg(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Q(n.pathString)}},E1=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(d,c)),d<c&&(i=S1(t.substring(d,c)));const f=C1(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",N1=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Lh.charAt(n%64),n=Math.floor(n/64);E(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Lh.charAt(e[i]);return E(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+we(this.snapshot.exportVal())}}class T1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return F(this._path)?null:$c(this._path)}get ref(){return new At(this._repo,this._path)}get _queryIdentifier(){const e=vh(this._queryParams),n=Wc(e);return n==="{}"?"default":n}get _queryObject(){return vh(this._queryParams)}isEqual(e){if(e=Pt(e),!(e instanceof _d))return!1;const n=this._repo===e._repo,r=Vc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+_C(this._path)}}class At extends _d{constructor(e,n){super(e,n,new Qc,!1)}get parent(){const e=n_(this._path);return e===null?null:new At(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hr{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Q(e),r=ls(this.ref,e);return new Hr(this._node.getChild(n),r,le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Hr(i,ls(this.ref,r),le)))}hasChild(e){const n=new Q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ye(t,e){return t=Pt(t),t._checkNotDeleted("ref"),e!==void 0?ls(t._root,e):t._root}function ls(t,e){return t=Pt(t),M(t._path)===null?i1("child","path",e):O_("child","path",e),new At(t._repo,de(t._path,e))}function I1(t,e){t=Pt(t),hd("push",t._path),L_("push",e,t._path,!0);const n=F_(t._repo),r=N1(n),i=ls(t,r),s=ls(t,r);let o;return o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function De(t,e){t=Pt(t),hd("set",t._path),L_("set",e,t._path,!1);const n=new Xr;return p1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function U(t,e){r1("update",e,t._path);const n=new Xr;return m1(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function z(t){t=Pt(t);const e=new $_(()=>{}),n=new kl(e);return h1(t._repo,t,n).then(r=>new Hr(r,new At(t._repo,t._path),t._queryParams.getIndex()))}class kl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new k1("value",this,new Hr(e.snapshotNode,new At(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new T1(this,e,n):null}matches(e){return e instanceof kl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function R1(t,e,n,r,i){const s=new $_(n,void 0),o=new kl(s);return _1(t._repo,t,o),()=>W_(t._repo,t,o)}function Pu(t,e,n,r){return R1(t,"value",e)}function Oh(t,e,n){W_(t._repo,t,null)}RE(At);LE(At);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="FIREBASE_DATABASE_EMULATOR_HOST",Au={};let P1=!1;function A1(t,e,n,r){t.repoInfo_=new Kg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function D1(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Qt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Te("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Dh(s,i),l=o.repoInfo,a;typeof process<"u"&&th&&(a=th[b1]),a?(s=`http://${a}?ns=${l.namespace}`,o=Dh(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new HS(t.name,t.options,e);s1("Invalid Firebase Database URL",o),F(o.path)||Qt("Database URL must point to the root of a Firebase Database (not including a child path).");const d=O1(l,t,u,new VS(t.name,n));return new M1(d,t)}function L1(t,e){const n=Au[e];(!n||n[t.key]!==t)&&Qt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),y1(t),delete n[t.key]}function O1(t,e,n,r){let i=Au[e.name];i||(i={},Au[e.name]=i);let s=i[t.toURLString()];return s&&Qt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new c1(t,P1,n,r),i[t.toURLString()]=s,s}class M1{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(d1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new At(this._repo,V())),this._rootInternal}_delete(){return this._rootInternal!==null&&(L1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qt("Cannot call "+e+" on a deleted database.")}}function j1(t=jc(),e){const n=ms(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=ex("database");r&&F1(n,...r)}return n}function F1(t,e,n,r={}){t=Pt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qt("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Qt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new io(io.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:tx(r.mockUserToken,t.app.options.projectId);s=new io(o)}A1(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){RS(gS),xn(new Gt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return D1(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),bt(nh,rh,t),bt(nh,rh,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={".sv":"timestamp"};function U1(){return z1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Mh(t,e,n){var r;if(t=Pt(t),hd("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=void 0)!==null&&r!==void 0?r:!0,s=new Xr,o=(a,u,d)=>{let c=null;a?s.reject(a):(c=new Hr(d,new At(t._repo,t._path),le),s.resolve(new B1(u,c)))},l=Pu(t,()=>{});return v1(t._repo,t._path,e,o,l,i),s.promise}Ut.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ut.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};W1();const $1={Joker:0,A:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,J:11,Q:12,K:13},Vs={7:"PEEK_SELF",8:"PEEK_SELF",9:"PEEK_ENEMY",10:"PEEK_ENEMY",J:"BLIND_SWAP",Q:"SEE_AND_SWAP",K:"SEE_AND_SWAP"},pe={DRAWING:"DRAWING",DISCARDING:"DISCARDING",RESOLVING_ABILITY:"RESOLVING_ABILITY",SELECTING_TARGET:"SELECTING_TARGET",SELECTING_OWN_CARD:"SELECTING_OWN_CARD",CONFIRMING_SWAP:"CONFIRMING_SWAP",WAITING:"WAITING"},ht={DRAW_DECK:"DRAW_DECK",DRAW_DISCARD:"DRAW_DISCARD",SWAP_CARD:"SWAP_CARD",DISCARD_DRAWN:"DISCARD_DRAWN",SLAP_MATCH:"SLAP_MATCH",CALL_KABUL:"CALL_KABUL",SELECT_OWN_CARD:"SELECT_OWN_CARD",SELECT_ENEMY_CARD:"SELECT_ENEMY_CARD",SELECT_TARGET_PLAYER:"SELECT_TARGET_PLAYER",CONFIRM_SWAP:"CONFIRM_SWAP",SKIP_ABILITY:"SKIP_ABILITY"};class V1{constructor(e){this.app=Mc(e),this.db=j1(this.app),this.listeners=new Map,this.currentPlayerId=null}async listRooms(){const e=await z(ye(this.db,"rooms"));return e.exists()?Object.entries(e.val()).map(([n,r])=>{var i,s,o,l;return{id:n,name:((i=r.config)==null?void 0:i.name)||`Room ${n.substr(0,4)}`,hostName:((s=r.config)==null?void 0:s.hostName)||"Unknown",playerCount:Object.keys(r.players||{}).length,maxPlayers:4,isPrivate:((o=r.config)==null?void 0:o.isPrivate)||!1,status:((l=r.gameState)==null?void 0:l.phase)||"WAITING",players:Object.entries(r.players||{}).map(([a,u])=>({id:a,name:u.name,isHost:u.isHost}))}}):[]}async createRoom(e,n,r){const i=I1(ye(this.db,"rooms")),s=i.key,o=this._generateDeck();return this._shuffle(o),await De(i,{config:{name:e,hostId:n,hostName:r,createdAt:U1()},gameState:{phase:"WAITING",currentTurn:null,turnPhase:"WAITING",abilityState:null,topDiscard:null,deckCount:54,kabulCaller:null,finalTurnsRemaining:null,winner:null},players:{[n]:{name:r,isHost:!0,hand:[],cardCount:0,score:0,hasCalledKabul:!1}},deck:o,discardPile:[],private:{}}),{success:!0,roomId:s}}async joinRoom(e,n,r){var a;const i=ye(this.db,`rooms/${e}`),s=await z(i);if(!s.exists())throw new Error("Room not found");const o=s.val();if(Object.keys(o.players||{}).length>=4)throw new Error("Room is full");if(((a=o.gameState)==null?void 0:a.phase)!=="WAITING")throw new Error("Game already started");return await U(ye(this.db,`rooms/${e}/players/${n}`),{name:r,isHost:!1,hand:[],cardCount:0,score:0,hasCalledKabul:!1}),{success:!0}}async leaveRoom(e,n){const r=ye(this.db,`rooms/${e}/players/${n}`);return await De(r,null),{success:!0}}async startGame(e){const n=ye(this.db,`rooms/${e}`),r=await z(n);if(!r.exists())throw new Error("Room not found");const i=r.val(),s=Object.keys(i.players||{});if(s.length<2)throw new Error("Need at least 2 players to start");const o=this._generateDeck();this._shuffle(o);const l={};s.forEach(u=>{const d=o.splice(0,4);l[`rooms/${e}/players/${u}/hand`]=d,l[`rooms/${e}/players/${u}/cardCount`]=4});const a=o.shift();return l[`rooms/${e}/deck`]=o,l[`rooms/${e}/discardPile`]=[a],l[`rooms/${e}/gameState/phase`]="MEMORIZE",l[`rooms/${e}/gameState/turnPhase`]="WAITING",l[`rooms/${e}/gameState/currentTurn`]=s[0],l[`rooms/${e}/gameState/topDiscard`]=a,l[`rooms/${e}/gameState/deckCount`]=o.length,await U(ye(this.db),l),setTimeout(async()=>{try{await U(ye(this.db,`rooms/${e}/gameState`),{phase:"PLAYING",turnPhase:pe.DRAWING})}catch(u){console.error("Failed to transition to PLAYING:",u)}},3e3),{success:!0}}_generateDeck(){const e=[],n=["","","",""],r=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];for(const i of n)for(const s of r){let o=$1[s];s==="K"&&(i===""||i==="")&&(o=-1),e.push({rank:s,suit:i,value:o,display:`${s}${i}`,actionType:Vs[s]||"NONE"})}return e.push({rank:"Joker",suit:null,value:0,display:"",actionType:"NONE"}),e.push({rank:"Joker",suit:null,value:0,display:"",actionType:"NONE"}),e}_shuffle(e){for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}_roomRef(e){return ye(this.db,`rooms/${e}`)}_gameStateRef(e){return ye(this.db,`rooms/${e}/gameState`)}_playerRef(e,n){return ye(this.db,`rooms/${e}/players/${n}`)}_privateRef(e,n){return ye(this.db,`rooms/${e}/private/${n}`)}_deckRef(e){return ye(this.db,`rooms/${e}/deck`)}_discardRef(e){return ye(this.db,`rooms/${e}/discardPile`)}listenToRoom(e,n,r){this.currentPlayerId=n;const i=this._gameStateRef(e),s=Pu(i,async a=>{var v;const u=a.val(),c=(await z(ye(this.db,`rooms/${e}/players`))).val()||{},g=(await z(this._privateRef(e,n))).val()||{},y=((v=c[n])==null?void 0:v.hand)||[];r({gameState:u,players:this._maskPlayers(c,n),myHand:y,myPrivate:g})}),o=this._privateRef(e,n),l=Pu(o,a=>{});this.listeners.set(e,{gameStateListener:s,privateListener:l,gameStateRef:i,privateRef:o})}stopListening(e){const n=this.listeners.get(e);n&&(Oh(n.gameStateRef),Oh(n.privateRef),this.listeners.delete(e))}_maskPlayers(e,n){if(!e)return{};const r={};for(const[i,s]of Object.entries(e)){const o=s.hand||[];r[i]={...s,hand:i===n?o:o.map(()=>({hidden:!0})),cardCount:o.length}}return r}async performAction(e,n,r,i={}){switch(r){case ht.DRAW_DECK:return this._drawCard(e,n,"deck");case ht.DRAW_DISCARD:return this._drawCard(e,n,"discard");case ht.SWAP_CARD:return this._swapCard(e,n,i.handIndex);case ht.DISCARD_DRAWN:return this._discardDrawn(e,n);case ht.SLAP_MATCH:return this._slapMatch(e,n,i.handIndex);case ht.CALL_KABUL:return this._callKabul(e,n);case ht.SELECT_OWN_CARD:return this._selectOwnCard(e,n,i.handIndex);case ht.SELECT_ENEMY_CARD:return this._selectEnemyCard(e,n,i.targetPlayerId,i.handIndex);case ht.SELECT_TARGET_PLAYER:return this._selectTargetPlayer(e,n,i.targetPlayerId);case ht.CONFIRM_SWAP:return this._confirmSwap(e,n,i.ownIndex,i.targetIndex);case ht.SKIP_ABILITY:return this._skipAbility(e,n);default:throw new Error(`Unknown action type: ${r}`)}}async _drawCard(e,n,r){const i=this._deckRef(e),s=this._gameStateRef(e),o=this._privateRef(e,n),a=(await z(i)).val();if(!a||a.length===0)throw new Error("Deck is empty");const d=(await z(s)).val();if(d.currentTurn!==n)throw new Error("Not your turn");if(d.turnPhase!==pe.DRAWING)throw new Error("Invalid turn phase");let c;if(r==="deck"){const g=(await z(i)).val();if(!g||g.length===0)throw new Error("Deck is empty after validation");c=g.shift(),await De(i,g),await U(s,{deckCount:g.length,turnPhase:pe.DISCARDING})}else{const f=this._discardRef(e),y=(await z(f)).val();if(!y||y.length===0)throw new Error("Discard pile is empty");c=y.pop(),await De(f,y),await U(s,{topDiscard:y.length>0?y[y.length-1]:null,turnPhase:pe.DISCARDING})}return await De(o,{drawnCard:{rank:c.rank,suit:c.suit,value:c.value,display:c.display,actionType:Vs[c.rank]||"NONE"}}),{success:!0,card:c}}async _swapCard(e,n,r){const i=this._gameStateRef(e),s=this._playerRef(e,n),o=this._privateRef(e,n),l=this._discardRef(e),[a,u,d]=await Promise.all([z(i),z(s),z(o)]),c=a.val(),f=u.val(),g=d.val();if(c.currentTurn!==n)throw new Error("Not your turn");if(c.turnPhase!==pe.DISCARDING)throw new Error("Must draw first");if(!(g!=null&&g.drawnCard))throw new Error("No card drawn");if(r<0||r>=f.hand.length)throw new Error("Invalid hand index");const y=g.drawnCard,v=f.hand[r],w=[...f.hand];w[r]={rank:y.rank,suit:y.suit,value:y.value,display:y.display},await Mh(l,p=>(p=p||[],p.push(v),p)),await U(s,{hand:w}),await U(i,{topDiscard:v}),await De(o,{drawnCard:null});const m=Vs[v.rank];return m?this._initiateAbility(e,n,m,v):this._advanceTurn(e,n)}async _discardDrawn(e,n){const r=this._gameStateRef(e),i=this._privateRef(e,n),s=this._discardRef(e),[o,l]=await Promise.all([z(r),z(i)]),a=o.val(),u=l.val();if(a.currentTurn!==n)throw new Error("Not your turn");if(a.turnPhase!==pe.DISCARDING)throw new Error("Must draw first");if(!(u!=null&&u.drawnCard))throw new Error("No card drawn");const d=u.drawnCard;await Mh(s,f=>(f=f||[],f.push(d),f)),await U(r,{topDiscard:d}),await De(i,{drawnCard:null});const c=Vs[d.rank];return c?this._initiateAbility(e,n,c,d):this._advanceTurn(e,n)}async _initiateAbility(e,n,r,i){const s=this._gameStateRef(e);let o,l;switch(r){case"PEEK_SELF":o=pe.SELECTING_OWN_CARD,l={type:"PEEK_SELF",activePlayer:n,step:"SELECTING"};break;case"PEEK_ENEMY":o=pe.SELECTING_TARGET,l={type:"PEEK_ENEMY",activePlayer:n,targetPlayer:null,targetCardIndex:null,step:"SELECTING_PLAYER"};break;case"BLIND_SWAP":o=pe.SELECTING_TARGET,l={type:"BLIND_SWAP",activePlayer:n,ownCardIndex:null,targetPlayer:null,targetCardIndex:null,step:"SELECTING_OWN"};break;case"SEE_AND_SWAP":o=pe.SELECTING_TARGET,l={type:"SEE_AND_SWAP",activePlayer:n,ownCardIndex:null,targetPlayer:null,targetCardIndex:null,revealedCardValue:null,step:"SELECTING_OWN"};break}return await U(s,{turnPhase:o,abilityState:l}),{success:!0,abilityInitiated:r}}async _selectOwnCard(e,n,r){var f,g;const i=this._gameStateRef(e),s=this._playerRef(e,n),o=this._privateRef(e,n),[l,a]=await Promise.all([z(i),z(s)]),u=l.val(),d=a.val();if(((f=u.abilityState)==null?void 0:f.activePlayer)!==n)throw new Error("Not your ability turn");if(((g=u.abilityState)==null?void 0:g.type)!=="PEEK_SELF")throw new Error("Wrong ability type");const c=d.hand[r];return await De(o,{revealedCard:{position:r,rank:c.rank,suit:c.suit,value:c.value,display:c.display,expiresAt:Date.now()+3e3}}),await U(i,{turnPhase:pe.WAITING,abilityState:null}),setTimeout(async()=>{await De(o,{revealedCard:null}),await this._advanceTurn(e,n)},3e3),{success:!0,revealed:c}}async _selectEnemyCard(e,n,r,i){var g,y;const s=this._gameStateRef(e),o=this._playerRef(e,r),l=this._privateRef(e,n),[a,u]=await Promise.all([z(s),z(o)]),d=a.val(),c=u.val();if(((g=d.abilityState)==null?void 0:g.activePlayer)!==n)throw new Error("Not your ability turn");if(((y=d.abilityState)==null?void 0:y.type)!=="PEEK_ENEMY")throw new Error("Wrong ability type");if(r===n)throw new Error("Cannot peek your own card with 9/10");const f=c.hand[i];return await De(l,{revealedCard:{position:i,targetPlayerId:r,rank:f.rank,suit:f.suit,value:f.value,display:f.display,expiresAt:Date.now()+3e3}}),await U(s,{turnPhase:pe.WAITING,abilityState:null}),setTimeout(async()=>{await De(l,{revealedCard:null}),await this._advanceTurn(e,n)},3e3),{success:!0,revealed:f}}async _handleBlindSwapStep(e,n,r){const i=this._gameStateRef(e),l=(await z(i)).val().abilityState;if((l==null?void 0:l.activePlayer)!==n||(l==null?void 0:l.type)!=="BLIND_SWAP")throw new Error("Invalid ability state");switch(l.step){case"SELECTING_OWN":return await U(i,{"abilityState/ownCardIndex":r.ownIndex,"abilityState/step":"SELECTING_TARGET"}),{success:!0,step:"SELECTING_TARGET"};case"SELECTING_TARGET":return await U(i,{"abilityState/targetPlayer":r.targetPlayerId,"abilityState/step":"SELECTING_TARGET_CARD"}),{success:!0,step:"SELECTING_TARGET_CARD"};case"SELECTING_TARGET_CARD":return this._executeBlindSwap(e,n,l.ownCardIndex,l.targetPlayer,r.targetIndex)}}async _executeBlindSwap(e,n,r,i,s){const o=this._playerRef(e,n),l=this._playerRef(e,i),a=this._gameStateRef(e),[u,d]=await Promise.all([z(o),z(l)]),c=u.val(),f=d.val(),g=c.hand[r],y=f.hand[s],v=[...c.hand],w=[...f.hand];return v[r]=y,w[s]=g,await Promise.all([U(o,{hand:v}),U(l,{hand:w})]),await U(a,{turnPhase:pe.WAITING,abilityState:null}),this._advanceTurn(e,n)}async _seeSwapSelectOwn(e,n,r){const i=this._gameStateRef(e);return await U(i,{"abilityState/ownCardIndex":r,"abilityState/step":"SELECTING_TARGET_PLAYER"}),{success:!0,step:"SELECTING_TARGET_PLAYER"}}async _seeSwapSelectTarget(e,n,r){const i=this._gameStateRef(e);return await U(i,{"abilityState/targetPlayer":r,"abilityState/step":"SELECTING_TARGET_CARD"}),{success:!0,step:"SELECTING_TARGET_CARD"}}async _seeSwapReveal(e,n,r){const i=this._gameStateRef(e),o=(await z(i)).val().abilityState,l=this._playerRef(e,o.targetPlayer),u=(await z(l)).val().hand[r],d=this._playerRef(e,n),f=(await z(d)).val().hand[o.ownCardIndex],g=this._privateRef(e,n);return await De(g,{swapPreview:{ownCard:{position:o.ownCardIndex,rank:f.rank,suit:f.suit,value:f.value,display:f.display},targetCard:{position:r,targetPlayerId:o.targetPlayer,rank:u.rank,suit:u.suit,value:u.value,display:u.display}}}),await U(i,{"abilityState/targetCardIndex":r,"abilityState/step":"CONFIRMING",turnPhase:pe.CONFIRMING_SWAP}),{success:!0,step:"CONFIRMING",ownCard:{display:f.display,value:f.value},targetCard:{display:u.display,value:u.value}}}async _confirmSwap(e,n,r,i){const s=this._gameStateRef(e),l=(await z(s)).val().abilityState;if((l==null?void 0:l.activePlayer)!==n)throw new Error("Not your ability");const a=this._playerRef(e,n),u=this._playerRef(e,l.targetPlayer),d=this._privateRef(e,n),[c,f]=await Promise.all([z(a),z(u)]),g=c.val(),y=f.val(),v=g.hand[l.ownCardIndex],w=y.hand[l.targetCardIndex],m=[...g.hand],p=[...y.hand];return m[l.ownCardIndex]=w,p[l.targetCardIndex]=v,await Promise.all([U(a,{hand:m}),U(u,{hand:p}),De(d,{swapPreview:null}),U(s,{turnPhase:pe.WAITING,abilityState:null})]),this._advanceTurn(e,n)}async _slapMatch(e,n,r){const i=this._gameStateRef(e),s=this._playerRef(e,n),o=this._discardRef(e),l=this._deckRef(e),u=(await z(s)).val(),d=u.hand[r];if(!d)throw new Error("Card not found");const f=(await z(o)).val()||[],g=f[f.length-1];if(!g)throw new Error("Discard pile is empty");if(d.rank===g.rank){const y=[...u.hand],v=y.splice(r,1)[0];return f.push(v),await De(o,f),await U(s,{hand:y,cardCount:y.length}),await U(i,{topDiscard:v}),{success:!0,message:`Match! Removed ${v.rank}`}}else{const v=(await z(l)).val()||[];if(v.length>0){const w=v.shift(),m=[...u.hand,w];return await U(s,{hand:m,cardCount:m.length}),await De(l,v),await U(i,{deckCount:v.length}),{success:!1,message:`Wrong! +1 card (${w.rank})`}}else return{success:!1,message:"Wrong! No penalty (deck empty)"}}}async _callKabul(e,n){const r=this._gameStateRef(e),i=this._playerRef(e,n),o=(await z(r)).val();if(o.currentTurn!==n)throw new Error("Not your turn");if(o.turnPhase!==pe.DRAWING)throw new Error("Can only call Kabul at start of turn");const a=(await z(ye(this.db,`rooms/${e}/players`))).val(),u=Object.keys(a).length;return await U(i,{hasCalledKabul:!0}),await U(r,{kabulCaller:n,finalTurnsRemaining:u-1}),this._advanceTurnAfterKabul(e,n,u)}async _skipAbility(e,n){const r=this._gameStateRef(e),i=this._privateRef(e,n);return await Promise.all([U(r,{turnPhase:pe.WAITING,abilityState:null}),De(i,{revealedCard:null})]),this._advanceTurn(e,n)}async _advanceTurn(e,n){const r=this._gameStateRef(e),i=ye(this.db,`rooms/${e}/players`),[s,o]=await Promise.all([z(r),z(i)]),l=s.val(),a=Object.keys(o.val());let d=(a.indexOf(n)+1)%a.length,c=a[d];if(c===l.kabulCaller&&(d=(d+1)%a.length,c=a[d]),l.kabulCaller){const f=l.finalTurnsRemaining-1;if(f<=0)return this._endGame(e);await U(r,{finalTurnsRemaining:f})}return await U(r,{currentTurn:c,turnPhase:pe.DRAWING}),{success:!0,nextTurn:c}}async _advanceTurnAfterKabul(e,n,r){const i=this._gameStateRef(e),s=ye(this.db,`rooms/${e}/players`),o=await z(s),l=Object.keys(o.val()),u=(l.indexOf(n)+1)%l.length;return await U(i,{currentTurn:l[u],turnPhase:pe.DRAWING}),{success:!0,message:"KABUL! Others get 1 final turn."}}async _endGame(e){const n=this._gameStateRef(e),r=ye(this.db,`rooms/${e}/players`),s=(await z(r)).val();let o=null,l=1/0;for(const[a,u]of Object.entries(s)){const d=u.hand.reduce((c,f)=>c+f.value,0);await U(this._playerRef(e,a),{finalScore:d}),d<l&&(l=d,o=a)}return await U(n,{phase:"ENDED",winner:o,turnPhase:pe.WAITING,abilityState:null}),{success:!0,winner:o,score:l}}}const V_="@firebase/installations",yd="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=1e4,G_=`w:${yd}`,K_="FIS_v2",H1="https://firebaseinstallations.googleapis.com/v1",G1=60*60*1e3,K1="installations",Q1="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zn=new dl(K1,Q1,Y1);function Q_(t){return t instanceof rr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_({projectId:t}){return`${H1}/projects/${t}/installations`}function q_(t){return{token:t.token,requestStatus:2,expiresIn:X1(t.expiresIn),creationTime:Date.now()}}async function X_(t,e){const r=(await e.json()).error;return Zn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function J_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function q1(t,{refreshToken:e}){const n=J_(t);return n.append("Authorization",J1(e)),n}async function Z_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function X1(t){return Number(t.replace("s","000"))}function J1(t){return`${K_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Y_(t),i=J_(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:K_,appId:t.appId,sdkVersion:G_},l={method:"POST",headers:i,body:JSON.stringify(o)},a=await Z_(()=>fetch(r,l));if(a.ok){const u=await a.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:q_(u.authToken)}}else throw await X_("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=/^[cdef][\w-]{21}$/,Du="";function nN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=rN(t);return tN.test(n)?n:Du}catch{return Du}}function rN(t){return eN(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;function ny(t,e){const n=Tl(t);ry(n,e),iN(n,e)}function ry(t,e){const n=ty.get(t);if(n)for(const r of n)r(e)}function iN(t,e){const n=sN();n&&n.postMessage({key:t,fid:e}),oN()}let zn=null;function sN(){return!zn&&"BroadcastChannel"in self&&(zn=new BroadcastChannel("[Firebase] FID Change"),zn.onmessage=t=>{ry(t.data.key,t.data.fid)}),zn}function oN(){ty.size===0&&zn&&(zn.close(),zn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebase-installations-database",aN=1,er="firebase-installations-store";let pa=null;function vd(){return pa||(pa=Rg(lN,aN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(er)}}})),pa}async function Go(t,e){const n=Tl(t),i=(await vd()).transaction(er,"readwrite"),s=i.objectStore(er),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&ny(t,e.fid),e}async function iy(t){const e=Tl(t),r=(await vd()).transaction(er,"readwrite");await r.objectStore(er).delete(e),await r.done}async function Il(t,e){const n=Tl(t),i=(await vd()).transaction(er,"readwrite"),s=i.objectStore(er),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&ny(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(t){let e;const n=await Il(t.appConfig,r=>{const i=uN(r),s=cN(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Du?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function uN(t){const e=t||{fid:nN(),registrationStatus:0};return sy(e)}function cN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Zn.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=dN(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fN(t)}:{installationEntry:e}}async function dN(t,e){try{const n=await Z1(t,e);return Go(t.appConfig,n)}catch(n){throw Q_(n)&&n.customData.serverCode===409?await iy(t.appConfig):await Go(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function fN(t){let e=await jh(t.appConfig);for(;e.registrationStatus===1;)await ey(100),e=await jh(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await wd(t);return r||n}return e}function jh(t){return Il(t,e=>{if(!e)throw Zn.create("installation-not-found");return sy(e)})}function sy(t){return hN(t)?{fid:t.fid,registrationStatus:0}:t}function hN(t){return t.registrationStatus===1&&t.registrationTime+H_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN({appConfig:t,heartbeatServiceProvider:e},n){const r=mN(t,n),i=q1(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:G_,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},a=await Z_(()=>fetch(r,l));if(a.ok){const u=await a.json();return q_(u)}else throw await X_("Generate Auth Token",a)}function mN(t,{fid:e}){return`${Y_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(t,e=!1){let n;const r=await Il(t.appConfig,s=>{if(!oy(s))throw Zn.create("not-registered");const o=s.authToken;if(!e&&yN(o))return s;if(o.requestStatus===1)return n=gN(t,e),s;{if(!navigator.onLine)throw Zn.create("app-offline");const l=wN(s);return n=_N(t,l),l}});return n?await n:r.authToken}async function gN(t,e){let n=await Fh(t.appConfig);for(;n.authToken.requestStatus===1;)await ey(100),n=await Fh(t.appConfig);const r=n.authToken;return r.requestStatus===0?xd(t,e):r}function Fh(t){return Il(t,e=>{if(!oy(e))throw Zn.create("not-registered");const n=e.authToken;return xN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _N(t,e){try{const n=await pN(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Go(t.appConfig,r),n}catch(n){if(Q_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await iy(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Go(t.appConfig,r)}throw n}}function oy(t){return t!==void 0&&t.registrationStatus===2}function yN(t){return t.requestStatus===2&&!vN(t)}function vN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+G1}function wN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function xN(t){return t.requestStatus===1&&t.requestTime+H_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t){const e=t,{installationEntry:n,registrationPromise:r}=await wd(e);return r?r.catch(console.error):xd(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e=!1){const n=t;return await EN(n),(await xd(n,e)).token}async function EN(t){const{registrationPromise:e}=await wd(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){if(!t||!t.options)throw ma("App Configuration");if(!t.name)throw ma("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ma(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ma(t){return Zn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="installations",kN="installations-internal",TN=t=>{const e=t.getProvider("app").getImmediate(),n=NN(e),r=ms(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},IN=t=>{const e=t.getProvider("app").getImmediate(),n=ms(e,ly).getImmediate();return{getId:()=>SN(n),getToken:i=>CN(n,i)}};function RN(){xn(new Gt(ly,TN,"PUBLIC")),xn(new Gt(kN,IN,"PRIVATE"))}RN();bt(V_,yd);bt(V_,yd,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="analytics",bN="firebase_id",PN="origin",AN=60*1e3,DN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sd="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=new Lc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ze=new dl("analytics","Analytics",LN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){if(!t.startsWith(Sd)){const e=Ze.create("invalid-gtag-resource",{gtagURL:t});return Ye.warn(e.message),""}return t}function ay(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function MN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jN(t,e){const n=MN("firebase-js-sdk-policy",{createScriptURL:ON}),r=document.createElement("script"),i=`${Sd}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function FN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WN(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const a=(await ay(n)).find(u=>u.measurementId===i);a&&await e[a.appId]}}catch(l){Ye.error(l)}t("config",i,s)}async function zN(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await ay(n);for(const a of o){const u=l.find(c=>c.measurementId===a),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ye.error(s)}}function UN(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,a]=o;await zN(t,e,n,l,a)}else if(s==="config"){const[l,a]=o;await WN(t,e,n,r,l,a)}else if(s==="consent"){const[l,a]=o;t("consent",l,a)}else if(s==="get"){const[l,a,u]=o;t("get",l,a,u)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Ye.error(l)}}return i}function BN(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=UN(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function $N(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Sd)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=30,HN=1e3;class GN{constructor(e={},n=HN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const uy=new GN;function KN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function QN(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:KN(r)},s=DN.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const a=await o.json();!((e=a.error)===null||e===void 0)&&e.message&&(l=a.error.message)}catch{}throw Ze.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function YN(t,e=uy,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Ze.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ze.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new JN;return setTimeout(async()=>{l.abort()},AN),cy({appId:r,apiKey:i,measurementId:s},o,l,e)}async function cy(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=uy){var s;const{appId:o,measurementId:l}=t;try{await qN(r,e)}catch(a){if(l)return Ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:o,measurementId:l};throw a}try{const a=await QN(t);return i.deleteThrottleMetadata(o),a}catch(a){const u=a;if(!XN(u)){if(i.deleteThrottleMetadata(o),l)return Ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw a}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Gf(n,i.intervalMillis,VN):Gf(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,c),Ye.debug(`Calling attemptFetch again in ${d} millis`),cy(t,c,r,i)}}function qN(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Ze.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function XN(t){if(!(t instanceof rr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class JN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ZN(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(){if(Eg())try{await Ng()}catch(t){return Ye.warn(Ze.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ye.warn(Ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tk(t,e,n,r,i,s,o){var l;const a=YN(t);a.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Ye.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ye.error(g)),e.push(a);const u=ek().then(g=>{if(g)return r.getId()}),[d,c]=await Promise.all([a,u]);$N(s)||jN(s,d.measurementId),i("js",new Date);const f=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return f[PN]="firebase",f.update=!0,c!=null&&(f[bN]=c),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.app=e}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}}let Pi={},Wh=[];const zh={};let ga="dataLayer",rk="gtag",Uh,dy,Bh=!1;function ik(){const t=[];if(rx()&&t.push("This is a browser extension environment."),ox()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ze.create("invalid-analytics-context",{errorInfo:e});Ye.warn(n.message)}}function sk(t,e,n){ik();const r=t.options.appId;if(!r)throw Ze.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ze.create("no-api-key");if(Pi[r]!=null)throw Ze.create("already-exists",{id:r});if(!Bh){FN(ga);const{wrappedGtag:s,gtagCore:o}=BN(Pi,Wh,zh,ga,rk);dy=s,Uh=o,Bh=!0}return Pi[r]=tk(t,Wh,zh,e,Uh,ga,n),new nk(t)}function ok(t=jc()){t=Pt(t);const e=ms(t,Ko);return e.isInitialized()?e.getImmediate():lk(t)}function lk(t,e={}){const n=ms(t,Ko);if(n.isInitialized()){const i=n.getImmediate();if(Ao(e,n.getOptions()))return i;throw Ze.create("already-initialized")}return n.initialize({options:e})}function ak(t,e,n,r){t=Pt(t),ZN(dy,Pi[t.app.options.appId],e,n,r).catch(i=>Ye.error(i))}const $h="@firebase/analytics",Vh="0.10.8";function uk(){xn(new Gt(Ko,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return sk(r,i,n)},"PUBLIC")),xn(new Gt("analytics-internal",t,"PRIVATE")),bt($h,Vh),bt($h,Vh,"esm2017");function t(e){try{const n=e.getProvider(Ko).getImmediate();return{logEvent:(r,i,s)=>ak(n,r,i,s)}}catch(n){throw Ze.create("interop-component-reg-failed",{reason:n})}}}uk();const fy={apiKey:"AIzaSyBqAAOhCbNZ1Fy8CU5u5iZcOJ3wFVcEFqw",authDomain:"mlt-id.firebaseapp.com",databaseURL:"https://mlt-id-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"mlt-id",storageBucket:"mlt-id.firebasestorage.app",messagingSenderId:"6709876343",appId:"1:6709876343:web:7b270282b3095af36ed872",measurementId:"G-8YP9BT18XJ"},ck=_S().length===0?Mc(fy):jc();typeof window<"u"&&ok(ck);let _a=null;const hy=()=>(_a||(_a=new V1(fy)),_a),dk=()=>{const t=Ac(),{player:e}=Cd(),[n,r]=C.useState([]),[i,s]=C.useState(null),[o,l]=C.useState(!0),[a,u]=C.useState(!1),[d,c]=C.useState(null),f=hy();C.useEffect(()=>{const w=async()=>{try{l(!0);const p=await f.listRooms();r(p)}catch(p){console.error("Failed to fetch rooms:",p),c("Failed to load rooms")}finally{l(!1)}};w();const m=setInterval(w,5e3);return()=>clearInterval(m)},[]);const g=async()=>{try{const w=prompt("Enter room name:",`${e.name}'s Game`);if(!w)return;const m=await f.createRoom(w,e.id,e.name);m.roomId&&t(`/room/${m.roomId}`)}catch(w){console.error("Failed to create room:",w),alert("Failed to create room: "+w.message)}},y=async w=>{try{await f.joinRoom(w,e.id,e.name),t(`/room/${w}`)}catch(m){console.error("Failed to join room:",m),alert("Failed to join room: "+m.message)}},v=w=>{s(w)};return o&&n.length===0?h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"text-white/60 text-sm",children:"Loading rooms..."})]})}):d?h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 text-center",children:[h.jsx("span",{className:"material-symbols-outlined text-red-500 text-4xl mb-2",children:"error"}),h.jsx("p",{className:"text-red-400",children:d}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm",children:"Retry"})]})}):h.jsxs(h.Fragment,{children:[h.jsx(B0,{rooms:n,currentUser:e,selectedRoomId:i,onSelectRoom:v,onJoinRoom:y,onCreateRoom:g,onOpenRules:()=>u(!0)}),h.jsx(gg,{isOpen:a,onClose:()=>u(!1)})]})},it={DRAW_DECK:"DRAW_DECK",DRAW_DISCARD:"DRAW_DISCARD",SWAP_CARD:"SWAP_CARD",DISCARD_DRAWN:"DISCARD_DRAWN",SLAP_MATCH:"SLAP_MATCH",CALL_KABUL:"CALL_KABUL",SELECT_OWN_CARD:"SELECT_OWN_CARD",SELECT_ENEMY_CARD:"SELECT_ENEMY_CARD",CONFIRM_SWAP:"CONFIRM_SWAP",SKIP_ABILITY:"SKIP_ABILITY"},fk=()=>{const{roomId:t}=v0(),e=Ac(),{player:n}=Cd(),[r,i]=C.useState(null),[s,o]=C.useState({}),[l,a]=C.useState([]),[u,d]=C.useState({}),[c,f]=C.useState(!0),[g,y]=C.useState(null),[v,w]=C.useState(!1),[m,p]=C.useState(!1),_=C.useRef(hy()).current;C.useRef(null),C.useEffect(()=>{if(!(!t||!n.id)){f(!0);try{_.listenToRoom(t,n.id,O=>{i(O.gameState),o(O.players),a(O.myHand),d(O.myPrivate),f(!1),y(null)})}catch(O){console.error("Failed to connect to room:",O),y("Failed to connect to room"),f(!1)}return()=>{_.stopListening(t)}}},[t,n.id]),C.useCallback(()=>{const $=Object.keys(s).filter(k=>k!==n.id),G={top:null,left:null,right:null};return $.length===1?G.top=$[0]:$.length===2?(G.left=$[0],G.right=$[1]):$.length>=3&&(G.left=$[0],G.top=$[1],G.right=$[2]),G},[s,n.id]);const x=C.useCallback(async(O,$={})=>{try{console.log(`[Action] ${O}`,$),await _.performAction(t,n.id,O,$)}catch(G){console.error(`Action ${O} failed:`,G),alert(`Action failed: ${G.message}`)}},[t,n.id,_]),N=()=>x(it.DRAW_DECK),R=()=>x(it.DRAW_DISCARD),T=()=>x(it.DISCARD_DRAWN),b=()=>x(it.CALL_KABUL),H=()=>x(it.SKIP_ABILITY),A=O=>{x(it.SWAP_CARD,{handIndex:O})},Me=O=>{x(it.SLAP_MATCH,{handIndex:O})},Dt=O=>{var G;const $=(G=r==null?void 0:r.abilityState)==null?void 0:G.type;$==="BLIND_SWAP"||$==="SEE_AND_SWAP"?x(it.SELECT_OWN_CARD,{handIndex:O}):x(it.SELECT_OWN_CARD,{handIndex:O})},Lt=(O,$)=>{var k;((k=r==null?void 0:r.abilityState)==null?void 0:k.type)==="PEEK_ENEMY"?x(it.SELECT_ENEMY_CARD,{targetPlayerId:O,handIndex:$}):x(it.SELECT_ENEMY_CARD,{targetPlayerId:O,handIndex:$})},lr=()=>{const O=r==null?void 0:r.abilityState;O&&x(it.CONFIRM_SWAP,{ownIndex:O.ownCardIndex,targetIndex:O.targetCardIndex})};if(C.useEffect(()=>{},[r==null?void 0:r.phase,r==null?void 0:r.currentTurn,r==null?void 0:r.turnPhase,n.id,x]),c)return h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"text-white/60 text-sm",children:"Connecting to room..."})]})});if(g)return h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 text-center",children:[h.jsx("span",{className:"material-symbols-outlined text-red-500 text-4xl mb-2",children:"error"}),h.jsx("p",{className:"text-red-400 mb-4",children:g}),h.jsx("button",{onClick:()=>e("/"),className:"bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm",children:"Back to Lobby"})]})});if((r==null?void 0:r.phase)==="WAITING"){const O=Object.values(s);return h.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-surface-light dark:bg-[#1c2630] rounded-2xl p-8 max-w-md w-full text-center border border-[#283039]",children:[h.jsx("span",{className:"material-symbols-outlined text-primary text-5xl mb-4",children:"group"}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Waiting for Players"}),h.jsxs("p",{className:"text-white/60 mb-6",children:[O.length,"/4 players joined"]}),h.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-6",children:O.map($=>h.jsxs("div",{className:"bg-[#283039] px-4 py-2 rounded-full text-white text-sm font-medium flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),$.name]},$.id||$.name))}),O.length>=2&&h.jsx("button",{onClick:()=>_.startGame(t),className:"bg-primary hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-xl shadow-lg",children:"Start Game"})]})})}if((r==null?void 0:r.phase)==="ENDED"){const O=s[r.winner],$=Object.entries(s).map(([G,k])=>({id:G,...k})).sort((G,k)=>(G.finalScore||0)-(k.finalScore||0));return h.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-surface-light dark:bg-[#1c2630] rounded-2xl p-8 max-w-md w-full text-center border border-[#283039]",children:[h.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-5xl mb-4",children:"emoji_events"}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Game Over!"}),h.jsxs("p",{className:"text-primary text-xl font-bold mb-6",children:[(O==null?void 0:O.name)||"Unknown"," Wins!"]}),h.jsx("div",{className:"space-y-2 mb-6",children:$.map((G,k)=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${k===0?"bg-yellow-500/20 border border-yellow-500/30":"bg-[#283039]"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-white/60 text-sm",children:["#",k+1]}),h.jsx("span",{className:"text-white font-medium",children:G.name})]}),h.jsxs("span",{className:"text-primary font-bold",children:[G.finalScore??"?"," pts"]})]},G.id))}),h.jsx("button",{onClick:()=>e("/"),className:"bg-primary hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-xl shadow-lg",children:"Back to Lobby"})]})})}return h.jsxs(h.Fragment,{children:[h.jsx(U0,{gameState:r,myPlayerId:n.id,players:s,myHand:l,myPrivate:u,onDrawDeck:N,onDrawDiscard:R,onSwapCard:A,onDiscardDrawn:T,onSlap:Me,onCallKabul:b,onSelectOwnCard:Dt,onSelectEnemyCard:Lt,onConfirmSwap:lr,onSkipAbility:H,onOpenRules:()=>w(!0)}),m&&h.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-500/90 text-white px-4 py-2 rounded-full flex items-center gap-2 animate-pulse z-50",children:[h.jsx("span",{className:"material-symbols-outlined text-sm",children:"mic"}),h.jsx("span",{className:"text-xs font-bold uppercase",children:"Listening..."})]}),h.jsx(gg,{isOpen:v,onClose:()=>w(!1)})]})},py=C.createContext(null),Cd=()=>C.useContext(py),hk=()=>{let t=localStorage.getItem("kabul_player_id");return t||(t="player_"+crypto.randomUUID().slice(0,8),localStorage.setItem("kabul_player_id",t)),t},pk=()=>{let t=localStorage.getItem("kabul_player_name");return t||(t="Guest_"+Math.floor(Math.random()*1e3),localStorage.setItem("kabul_player_name",t)),t},mk=({children:t})=>{const[e,n]=C.useState(()=>({id:hk(),name:pk(),level:parseInt(localStorage.getItem("kabul_player_level")||"1",10)})),r=i=>{localStorage.setItem("kabul_player_name",i),n(s=>({...s,name:i}))};return h.jsx(py.Provider,{value:{player:e,updatePlayerName:r},children:t})},gk=({children:t})=>{const{player:e}=Cd(),[n,r]=C.useState(!1),i=()=>{localStorage.removeItem("kabul_player_id"),localStorage.removeItem("kabul_player_name"),window.location.reload()};return h.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen flex flex-col font-display selection:bg-primary/30",children:[h.jsx(V0,{user:e,onOpenRules:()=>r(!0),onLogout:i}),t]})},_k=()=>h.jsx(mk,{children:h.jsx(W0,{children:h.jsx(gk,{children:h.jsxs(M0,{children:[h.jsx(ro,{path:"/",element:h.jsx(dk,{})}),h.jsx(ro,{path:"/room/:roomId",element:h.jsx(fk,{})}),h.jsx(ro,{path:"*",element:h.jsx(L0,{to:"/",replace:!0})})]})})})});ya.createRoot(document.getElementById("root")).render(h.jsx(Fu.StrictMode,{children:h.jsx(_k,{})}));
